var O0=Object.defineProperty;var T0=(t,e,n)=>e in t?O0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var B=(t,e,n)=>(T0(t,typeof e!="symbol"?e+"":e,n),n);var mt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function A0(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),e}var L={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xs=Symbol.for("react.element"),D0=Symbol.for("react.portal"),I0=Symbol.for("react.fragment"),M0=Symbol.for("react.strict_mode"),L0=Symbol.for("react.profiler"),R0=Symbol.for("react.provider"),z0=Symbol.for("react.context"),j0=Symbol.for("react.forward_ref"),$0=Symbol.for("react.suspense"),F0=Symbol.for("react.memo"),N0=Symbol.for("react.lazy"),ad=Symbol.iterator;function U0(t){return t===null||typeof t!="object"?null:(t=ad&&t[ad]||t["@@iterator"],typeof t=="function"?t:null)}var np={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,rp={};function or(t,e,n){this.props=t,this.context=e,this.refs=rp,this.updater=n||np}or.prototype.isReactComponent={};or.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};or.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sp(){}sp.prototype=or.prototype;function Hc(t,e,n){this.props=t,this.context=e,this.refs=rp,this.updater=n||np}var Vc=Hc.prototype=new sp;Vc.constructor=Hc;ip(Vc,or.prototype);Vc.isPureReactComponent=!0;var ld=Array.isArray,op=Object.prototype.hasOwnProperty,Kc={current:null},ap={key:!0,ref:!0,__self:!0,__source:!0};function lp(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)op.call(e,i)&&!ap.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:xs,type:t,key:s,ref:o,props:r,_owner:Kc.current}}function B0(t,e){return{$$typeof:xs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yc(t){return typeof t=="object"&&t!==null&&t.$$typeof===xs}function W0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cd=/\/+/g;function Wa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?W0(""+t.key):e.toString(36)}function mo(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xs:case D0:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Wa(o,0):i,ld(r)?(n="",t!=null&&(n=t.replace(cd,"$&/")+"/"),mo(r,e,n,"",function(c){return c})):r!=null&&(Yc(r)&&(r=B0(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(cd,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",ld(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Wa(s,a);o+=mo(s,e,n,l,r)}else if(l=U0(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Wa(s,a++),o+=mo(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ms(t,e,n){if(t==null)return t;var i=[],r=0;return mo(t,i,"","",function(s){return e.call(n,s,r++)}),i}function H0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ne={current:null},yo={transition:null},V0={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:yo,ReactCurrentOwner:Kc};function cp(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Ms,forEach:function(t,e,n){Ms(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ms(t,function(){e++}),e},toArray:function(t){return Ms(t,function(e){return e})||[]},only:function(t){if(!Yc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};W.Component=or;W.Fragment=I0;W.Profiler=L0;W.PureComponent=Hc;W.StrictMode=M0;W.Suspense=$0;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V0;W.act=cp;W.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ip({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Kc.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)op.call(e,l)&&!ap.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:xs,type:t.type,key:r,ref:s,props:i,_owner:o}};W.createContext=function(t){return t={$$typeof:z0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:R0,_context:t},t.Consumer=t};W.createElement=lp;W.createFactory=function(t){var e=lp.bind(null,t);return e.type=t,e};W.createRef=function(){return{current:null}};W.forwardRef=function(t){return{$$typeof:j0,render:t}};W.isValidElement=Yc;W.lazy=function(t){return{$$typeof:N0,_payload:{_status:-1,_result:t},_init:H0}};W.memo=function(t,e){return{$$typeof:F0,type:t,compare:e===void 0?null:e}};W.startTransition=function(t){var e=yo.transition;yo.transition={};try{t()}finally{yo.transition=e}};W.unstable_act=cp;W.useCallback=function(t,e){return Ne.current.useCallback(t,e)};W.useContext=function(t){return Ne.current.useContext(t)};W.useDebugValue=function(){};W.useDeferredValue=function(t){return Ne.current.useDeferredValue(t)};W.useEffect=function(t,e){return Ne.current.useEffect(t,e)};W.useId=function(){return Ne.current.useId()};W.useImperativeHandle=function(t,e,n){return Ne.current.useImperativeHandle(t,e,n)};W.useInsertionEffect=function(t,e){return Ne.current.useInsertionEffect(t,e)};W.useLayoutEffect=function(t,e){return Ne.current.useLayoutEffect(t,e)};W.useMemo=function(t,e){return Ne.current.useMemo(t,e)};W.useReducer=function(t,e,n){return Ne.current.useReducer(t,e,n)};W.useRef=function(t){return Ne.current.useRef(t)};W.useState=function(t){return Ne.current.useState(t)};W.useSyncExternalStore=function(t,e,n){return Ne.current.useSyncExternalStore(t,e,n)};W.useTransition=function(){return Ne.current.useTransition()};W.version="18.3.1";L.exports=W;var vn=L.exports,Ll={},up={exports:{}},st={},dp={exports:{}},hp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,j){var $=T.length;T.push(j);e:for(;0<$;){var G=$-1>>>1,te=T[G];if(0<r(te,j))T[G]=j,T[$]=te,$=G;else break e}}function n(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var j=T[0],$=T.pop();if($!==j){T[0]=$;e:for(var G=0,te=T.length,at=te>>>1;G<at;){var _e=2*(G+1)-1,lt=T[_e],Te=_e+1,z=T[Te];if(0>r(lt,$))Te<te&&0>r(z,lt)?(T[G]=z,T[Te]=$,G=Te):(T[G]=lt,T[_e]=$,G=_e);else if(Te<te&&0>r(z,$))T[G]=z,T[Te]=$,G=Te;else break e}}return j}function r(T,j){var $=T.sortIndex-j.sortIndex;return $!==0?$:T.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(T){for(var j=n(c);j!==null;){if(j.callback===null)i(c);else if(j.startTime<=T)i(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function _(T){if(y=!1,v(T),!g)if(n(l)!==null)g=!0,ee(b);else{var j=n(c);j!==null&&ce(_,j.startTime-T)}}function b(T,j){g=!1,y&&(y=!1,p(P),P=-1),f=!0;var $=h;try{for(v(j),d=n(l);d!==null&&(!(d.expirationTime>j)||T&&!I());){var G=d.callback;if(typeof G=="function"){d.callback=null,h=d.priorityLevel;var te=G(d.expirationTime<=j);j=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(l)&&i(l),v(j)}else i(l);d=n(l)}if(d!==null)var at=!0;else{var _e=n(c);_e!==null&&ce(_,_e.startTime-j),at=!1}return at}finally{d=null,h=$,f=!1}}var k=!1,C=null,P=-1,D=5,A=-1;function I(){return!(t.unstable_now()-A<D)}function O(){if(C!==null){var T=t.unstable_now();A=T;var j=!0;try{j=C(!0,T)}finally{j?R():(k=!1,C=null)}}else k=!1}var R;if(typeof m=="function")R=function(){m(O)};else if(typeof MessageChannel!="undefined"){var F=new MessageChannel,Z=F.port2;F.port1.onmessage=O,R=function(){Z.postMessage(null)}}else R=function(){w(O,0)};function ee(T){C=T,k||(k=!0,R())}function ce(T,j){P=w(function(){T(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,ee(b))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(T){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var $=h;h=j;try{return T()}finally{h=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,j){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var $=h;h=T;try{return j()}finally{h=$}},t.unstable_scheduleCallback=function(T,j,$){var G=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?G+$:G):$=G,T){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=$+te,T={id:u++,callback:j,priorityLevel:T,startTime:$,expirationTime:te,sortIndex:-1},$>G?(T.sortIndex=$,e(c,T),n(l)===null&&T===n(c)&&(y?(p(P),P=-1):y=!0,ce(_,$-G))):(T.sortIndex=te,e(l,T),g||f||(g=!0,ee(b))),T},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(T){var j=h;return function(){var $=h;h=j;try{return T.apply(this,arguments)}finally{h=$}}}})(hp);dp.exports=hp;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0=L.exports,rt=dp.exports;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fp=new Set,Gr={};function di(t,e){qi(t,e),qi(t+"Capture",e)}function qi(t,e){for(Gr[t]=e,t=0;t<e.length;t++)fp.add(e[t])}var Gt=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Rl=Object.prototype.hasOwnProperty,Y0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ud={},dd={};function q0(t){return Rl.call(dd,t)?!0:Rl.call(ud,t)?!1:Y0.test(t)?dd[t]=!0:(ud[t]=!0,!1)}function J0(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G0(t,e,n,i){if(e===null||typeof e=="undefined"||J0(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ue(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Oe[t]=new Ue(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Oe[e]=new Ue(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Oe[t]=new Ue(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Oe[t]=new Ue(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Oe[t]=new Ue(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Oe[t]=new Ue(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Oe[t]=new Ue(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Oe[t]=new Ue(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Oe[t]=new Ue(t,5,!1,t.toLowerCase(),null,!1,!1)});var qc=/[\-:]([a-z])/g;function Jc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qc,Jc);Oe[e]=new Ue(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qc,Jc);Oe[e]=new Ue(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qc,Jc);Oe[e]=new Ue(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Oe[t]=new Ue(t,1,!1,t.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Oe[t]=new Ue(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gc(t,e,n,i){var r=Oe.hasOwnProperty(e)?Oe[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(G0(e,n,r,i)&&(n=null),i||r===null?q0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var en=K0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ls=Symbol.for("react.element"),ki=Symbol.for("react.portal"),Si=Symbol.for("react.fragment"),Qc=Symbol.for("react.strict_mode"),zl=Symbol.for("react.profiler"),pp=Symbol.for("react.provider"),gp=Symbol.for("react.context"),Xc=Symbol.for("react.forward_ref"),jl=Symbol.for("react.suspense"),$l=Symbol.for("react.suspense_list"),Zc=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),mp=Symbol.for("react.offscreen"),hd=Symbol.iterator;function dr(t){return t===null||typeof t!="object"?null:(t=hd&&t[hd]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,Ha;function Pr(t){if(Ha===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ha=e&&e[1]||""}return`
`+Ha+t}var Va=!1;function Ka(t,e){if(!t||Va)return"";Va=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Va=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pr(t):""}function Q0(t){switch(t.tag){case 5:return Pr(t.type);case 16:return Pr("Lazy");case 13:return Pr("Suspense");case 19:return Pr("SuspenseList");case 0:case 2:case 15:return t=Ka(t.type,!1),t;case 11:return t=Ka(t.type.render,!1),t;case 1:return t=Ka(t.type,!0),t;default:return""}}function Fl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Si:return"Fragment";case ki:return"Portal";case zl:return"Profiler";case Qc:return"StrictMode";case jl:return"Suspense";case $l:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gp:return(t.displayName||"Context")+".Consumer";case pp:return(t._context.displayName||"Context")+".Provider";case Xc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zc:return e=t.displayName||null,e!==null?e:Fl(t.type)||"Memo";case on:e=t._payload,t=t._init;try{return Fl(t(e))}catch{}}return null}function X0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fl(e);case 8:return e===Qc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function An(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z0(t){var e=yp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rs(t){t._valueTracker||(t._valueTracker=Z0(t))}function vp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=yp(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Io(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nl(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function fd(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=An(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wp(t,e){e=e.checked,e!=null&&Gc(t,"checked",e,!1)}function Ul(t,e){wp(t,e);var n=An(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bl(t,e.type,An(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bl(t,e,n){(e!=="number"||Io(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Er=Array.isArray;function ji(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+An(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Wl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(Er(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:An(n)}}function _p(t,e){var n=An(e.value),i=An(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function md(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zs,bp=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Lr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ey=["Webkit","ms","Moz","O"];Object.keys(Lr).forEach(function(t){ey.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Lr[e]=Lr[t]})});function kp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Lr.hasOwnProperty(t)&&Lr[t]?(""+e).trim():e+"px"}function Sp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=kp(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var ty=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(t,e){if(e){if(ty[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Kl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yl=null;function eu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,$i=null,Fi=null;function yd(t){if(t=Ss(t)){if(typeof ql!="function")throw Error(E(280));var e=t.stateNode;e&&(e=wa(e),ql(t.stateNode,t.type,e))}}function Cp(t){$i?Fi?Fi.push(t):Fi=[t]:$i=t}function Pp(){if($i){var t=$i,e=Fi;if(Fi=$i=null,yd(t),e)for(t=0;t<e.length;t++)yd(e[t])}}function Ep(t,e){return t(e)}function Op(){}var Ya=!1;function Tp(t,e,n){if(Ya)return t(e,n);Ya=!0;try{return Ep(t,e,n)}finally{Ya=!1,($i!==null||Fi!==null)&&(Op(),Pp())}}function Xr(t,e){var n=t.stateNode;if(n===null)return null;var i=wa(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Jl=!1;if(Gt)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{Jl=!1}function ny(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Rr=!1,Mo=null,Lo=!1,Gl=null,iy={onError:function(t){Rr=!0,Mo=t}};function ry(t,e,n,i,r,s,o,a,l){Rr=!1,Mo=null,ny.apply(iy,arguments)}function sy(t,e,n,i,r,s,o,a,l){if(ry.apply(this,arguments),Rr){if(Rr){var c=Mo;Rr=!1,Mo=null}else throw Error(E(198));Lo||(Lo=!0,Gl=c)}}function hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ap(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vd(t){if(hi(t)!==t)throw Error(E(188))}function oy(t){var e=t.alternate;if(!e){if(e=hi(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return vd(r),t;if(s===i)return vd(r),e;s=s.sibling}throw Error(E(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==i)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function Dp(t){return t=oy(t),t!==null?Ip(t):null}function Ip(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ip(t);if(e!==null)return e;t=t.sibling}return null}var Mp=rt.unstable_scheduleCallback,wd=rt.unstable_cancelCallback,ay=rt.unstable_shouldYield,ly=rt.unstable_requestPaint,ge=rt.unstable_now,cy=rt.unstable_getCurrentPriorityLevel,tu=rt.unstable_ImmediatePriority,Lp=rt.unstable_UserBlockingPriority,Ro=rt.unstable_NormalPriority,uy=rt.unstable_LowPriority,Rp=rt.unstable_IdlePriority,ga=null,jt=null;function dy(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(ga,t,void 0,(t.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:py,hy=Math.log,fy=Math.LN2;function py(t){return t>>>=0,t===0?32:31-(hy(t)/fy|0)|0}var js=64,$s=4194304;function Or(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zo(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Or(a):(s&=o,s!==0&&(i=Or(s)))}else o=n&~r,o!==0?i=Or(o):s!==0&&(i=Or(s));if(i===0)return 0;if(e!==0&&e!==i&&(e&r)===0&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if((i&4)!==0&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ct(e),r=1<<n,i|=t[n],e&=~r;return i}function gy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function my(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ct(s),a=1<<o,l=r[o];l===-1?((a&n)===0||(a&i)!==0)&&(r[o]=gy(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ql(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zp(){var t=js;return js<<=1,(js&4194240)===0&&(js=64),t}function qa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ct(e),t[e]=n}function yy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ct(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function nu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ct(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var X=0;function jp(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var $p,iu,Fp,Np,Up,Xl=!1,Fs=[],wn=null,_n=null,xn=null,Zr=new Map,es=new Map,cn=[],vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _d(t,e){switch(t){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":Zr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(e.pointerId)}}function fr(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ss(e),e!==null&&iu(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function wy(t,e,n,i,r){switch(e){case"focusin":return wn=fr(wn,t,e,n,i,r),!0;case"dragenter":return _n=fr(_n,t,e,n,i,r),!0;case"mouseover":return xn=fr(xn,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Zr.set(s,fr(Zr.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,es.set(s,fr(es.get(s)||null,t,e,n,i,r)),!0}return!1}function Bp(t){var e=Jn(t.target);if(e!==null){var n=hi(e);if(n!==null){if(e=n.tag,e===13){if(e=Ap(n),e!==null){t.blockedOn=e,Up(t.priority,function(){Fp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Yl=i,n.target.dispatchEvent(i),Yl=null}else return e=Ss(n),e!==null&&iu(e),t.blockedOn=n,!1;e.shift()}return!0}function xd(t,e,n){vo(t)&&n.delete(e)}function _y(){Xl=!1,wn!==null&&vo(wn)&&(wn=null),_n!==null&&vo(_n)&&(_n=null),xn!==null&&vo(xn)&&(xn=null),Zr.forEach(xd),es.forEach(xd)}function pr(t,e){t.blockedOn===e&&(t.blockedOn=null,Xl||(Xl=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,_y)))}function ts(t){function e(r){return pr(r,t)}if(0<Fs.length){pr(Fs[0],t);for(var n=1;n<Fs.length;n++){var i=Fs[n];i.blockedOn===t&&(i.blockedOn=null)}}for(wn!==null&&pr(wn,t),_n!==null&&pr(_n,t),xn!==null&&pr(xn,t),Zr.forEach(e),es.forEach(e),n=0;n<cn.length;n++)i=cn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)Bp(n),n.blockedOn===null&&cn.shift()}var Ni=en.ReactCurrentBatchConfig,jo=!0;function xy(t,e,n,i){var r=X,s=Ni.transition;Ni.transition=null;try{X=1,ru(t,e,n,i)}finally{X=r,Ni.transition=s}}function by(t,e,n,i){var r=X,s=Ni.transition;Ni.transition=null;try{X=4,ru(t,e,n,i)}finally{X=r,Ni.transition=s}}function ru(t,e,n,i){if(jo){var r=Zl(t,e,n,i);if(r===null)rl(t,e,i,$o,n),_d(t,i);else if(wy(r,t,e,n,i))i.stopPropagation();else if(_d(t,i),e&4&&-1<vy.indexOf(t)){for(;r!==null;){var s=Ss(r);if(s!==null&&$p(s),s=Zl(t,e,n,i),s===null&&rl(t,e,i,$o,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else rl(t,e,i,null,n)}}var $o=null;function Zl(t,e,n,i){if($o=null,t=eu(i),t=Jn(t),t!==null)if(e=hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ap(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $o=t,null}function Wp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cy()){case tu:return 1;case Lp:return 4;case Ro:case uy:return 16;case Rp:return 536870912;default:return 16}default:return 16}}var hn=null,su=null,wo=null;function Hp(){if(wo)return wo;var t,e=su,n=e.length,i,r="value"in hn?hn.value:hn.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return wo=r.slice(t,1<i?1-i:void 0)}function _o(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ns(){return!0}function bd(){return!1}function ot(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ns:bd,this.isPropagationStopped=bd,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),e}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ou=ot(ar),ks=he({},ar,{view:0,detail:0}),ky=ot(ks),Ja,Ga,gr,ma=he({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:au,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gr&&(gr&&t.type==="mousemove"?(Ja=t.screenX-gr.screenX,Ga=t.screenY-gr.screenY):Ga=Ja=0,gr=t),Ja)},movementY:function(t){return"movementY"in t?t.movementY:Ga}}),kd=ot(ma),Sy=he({},ma,{dataTransfer:0}),Cy=ot(Sy),Py=he({},ks,{relatedTarget:0}),Qa=ot(Py),Ey=he({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),Oy=ot(Ey),Ty=he({},ar,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ay=ot(Ty),Dy=he({},ar,{data:0}),Sd=ot(Dy),Iy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},My={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ry(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ly[t])?!!e[t]:!1}function au(){return Ry}var zy=he({},ks,{key:function(t){if(t.key){var e=Iy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_o(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?My[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:au,charCode:function(t){return t.type==="keypress"?_o(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_o(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jy=ot(zy),$y=he({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=ot($y),Fy=he({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:au}),Ny=ot(Fy),Uy=he({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),By=ot(Uy),Wy=he({},ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hy=ot(Wy),Vy=[9,13,27,32],lu=Gt&&"CompositionEvent"in window,zr=null;Gt&&"documentMode"in document&&(zr=document.documentMode);var Ky=Gt&&"TextEvent"in window&&!zr,Vp=Gt&&(!lu||zr&&8<zr&&11>=zr),Pd=String.fromCharCode(32),Ed=!1;function Kp(t,e){switch(t){case"keyup":return Vy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ci=!1;function Yy(t,e){switch(t){case"compositionend":return Yp(e);case"keypress":return e.which!==32?null:(Ed=!0,Pd);case"textInput":return t=e.data,t===Pd&&Ed?null:t;default:return null}}function qy(t,e){if(Ci)return t==="compositionend"||!lu&&Kp(t,e)?(t=Hp(),wo=su=hn=null,Ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vp&&e.locale!=="ko"?null:e.data;default:return null}}var Jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Od(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Jy[t.type]:e==="textarea"}function qp(t,e,n,i){Cp(i),e=Fo(e,"onChange"),0<e.length&&(n=new ou("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var jr=null,ns=null;function Gy(t){sg(t,0)}function ya(t){var e=Oi(t);if(vp(e))return t}function Qy(t,e){if(t==="change")return e}var Jp=!1;if(Gt){var Xa;if(Gt){var Za="oninput"in document;if(!Za){var Td=document.createElement("div");Td.setAttribute("oninput","return;"),Za=typeof Td.oninput=="function"}Xa=Za}else Xa=!1;Jp=Xa&&(!document.documentMode||9<document.documentMode)}function Ad(){jr&&(jr.detachEvent("onpropertychange",Gp),ns=jr=null)}function Gp(t){if(t.propertyName==="value"&&ya(ns)){var e=[];qp(e,ns,t,eu(t)),Tp(Gy,e)}}function Xy(t,e,n){t==="focusin"?(Ad(),jr=e,ns=n,jr.attachEvent("onpropertychange",Gp)):t==="focusout"&&Ad()}function Zy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ya(ns)}function ev(t,e){if(t==="click")return ya(e)}function tv(t,e){if(t==="input"||t==="change")return ya(e)}function nv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Et=typeof Object.is=="function"?Object.is:nv;function is(t,e){if(Et(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Rl.call(e,r)||!Et(t[r],e[r]))return!1}return!0}function Dd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Id(t,e){var n=Dd(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dd(n)}}function Qp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xp(){for(var t=window,e=Io();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Io(t.document)}return e}function cu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iv(t){var e=Xp(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qp(n.ownerDocument.documentElement,n)){if(i!==null&&cu(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Id(n,s);var o=Id(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rv=Gt&&"documentMode"in document&&11>=document.documentMode,Pi=null,ec=null,$r=null,tc=!1;function Md(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tc||Pi==null||Pi!==Io(i)||(i=Pi,"selectionStart"in i&&cu(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),$r&&is($r,i)||($r=i,i=Fo(ec,"onSelect"),0<i.length&&(e=new ou("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Pi)))}function Us(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ei={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionend:Us("Transition","TransitionEnd")},el={},Zp={};Gt&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function va(t){if(el[t])return el[t];if(!Ei[t])return t;var e=Ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zp)return el[t]=e[n];return t}var eg=va("animationend"),tg=va("animationiteration"),ng=va("animationstart"),ig=va("transitionend"),rg=new Map,Ld="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(t,e){rg.set(t,e),di(e,[t])}for(var tl=0;tl<Ld.length;tl++){var nl=Ld[tl],sv=nl.toLowerCase(),ov=nl[0].toUpperCase()+nl.slice(1);Rn(sv,"on"+ov)}Rn(eg,"onAnimationEnd");Rn(tg,"onAnimationIteration");Rn(ng,"onAnimationStart");Rn("dblclick","onDoubleClick");Rn("focusin","onFocus");Rn("focusout","onBlur");Rn(ig,"onTransitionEnd");qi("onMouseEnter",["mouseout","mouseover"]);qi("onMouseLeave",["mouseout","mouseover"]);qi("onPointerEnter",["pointerout","pointerover"]);qi("onPointerLeave",["pointerout","pointerover"]);di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));di("onBeforeInput",["compositionend","keypress","textInput","paste"]);di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),av=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Rd(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,sy(i,e,void 0,t),t.currentTarget=null}function sg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Rd(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Rd(r,a,c),s=l}}}if(Lo)throw t=Gl,Lo=!1,Gl=null,t}function se(t,e){var n=e[oc];n===void 0&&(n=e[oc]=new Set);var i=t+"__bubble";n.has(i)||(og(e,t,2,!1),n.add(i))}function il(t,e,n){var i=0;e&&(i|=4),og(n,t,i,e)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function rs(t){if(!t[Bs]){t[Bs]=!0,fp.forEach(function(n){n!=="selectionchange"&&(av.has(n)||il(n,!1,t),il(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bs]||(e[Bs]=!0,il("selectionchange",!1,e))}}function og(t,e,n,i){switch(Wp(e)){case 1:var r=xy;break;case 4:r=by;break;default:r=ru}n=r.bind(null,e,n,t),r=void 0,!Jl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function rl(t,e,n,i,r){var s=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Jn(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Tp(function(){var c=s,u=eu(n),d=[];e:{var h=rg.get(t);if(h!==void 0){var f=ou,g=t;switch(t){case"keypress":if(_o(n)===0)break e;case"keydown":case"keyup":f=jy;break;case"focusin":g="focus",f=Qa;break;case"focusout":g="blur",f=Qa;break;case"beforeblur":case"afterblur":f=Qa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Ny;break;case eg:case tg:case ng:f=Oy;break;case ig:f=By;break;case"scroll":f=ky;break;case"wheel":f=Hy;break;case"copy":case"cut":case"paste":f=Ay;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Cd}var y=(e&4)!==0,w=!y&&t==="scroll",p=y?h!==null?h+"Capture":null:h;y=[];for(var m=c,v;m!==null;){v=m;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,p!==null&&(_=Xr(m,p),_!=null&&y.push(ss(m,_,v)))),w)break;m=m.return}0<y.length&&(h=new f(h,g,null,n,u),d.push({event:h,listeners:y}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Yl&&(g=n.relatedTarget||n.fromElement)&&(Jn(g)||g[Qt]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=c,g=g?Jn(g):null,g!==null&&(w=hi(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(y=kd,_="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=Cd,_="onPointerLeave",p="onPointerEnter",m="pointer"),w=f==null?h:Oi(f),v=g==null?h:Oi(g),h=new y(_,m+"leave",f,n,u),h.target=w,h.relatedTarget=v,_=null,Jn(u)===c&&(y=new y(p,m+"enter",g,n,u),y.target=v,y.relatedTarget=w,_=y),w=_,f&&g)t:{for(y=f,p=g,m=0,v=y;v;v=mi(v))m++;for(v=0,_=p;_;_=mi(_))v++;for(;0<m-v;)y=mi(y),m--;for(;0<v-m;)p=mi(p),v--;for(;m--;){if(y===p||p!==null&&y===p.alternate)break t;y=mi(y),p=mi(p)}y=null}else y=null;f!==null&&zd(d,h,f,y,!1),g!==null&&w!==null&&zd(d,w,g,y,!0)}}e:{if(h=c?Oi(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var b=Qy;else if(Od(h))if(Jp)b=tv;else{b=Zy;var k=Xy}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=ev);if(b&&(b=b(t,c))){qp(d,b,n,u);break e}k&&k(t,h,c),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Bl(h,"number",h.value)}switch(k=c?Oi(c):window,t){case"focusin":(Od(k)||k.contentEditable==="true")&&(Pi=k,ec=c,$r=null);break;case"focusout":$r=ec=Pi=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,Md(d,n,u);break;case"selectionchange":if(rv)break;case"keydown":case"keyup":Md(d,n,u)}var C;if(lu)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ci?Kp(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Vp&&n.locale!=="ko"&&(Ci||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ci&&(C=Hp()):(hn=u,su="value"in hn?hn.value:hn.textContent,Ci=!0)),k=Fo(c,P),0<k.length&&(P=new Sd(P,t,null,n,u),d.push({event:P,listeners:k}),C?P.data=C:(C=Yp(n),C!==null&&(P.data=C)))),(C=Ky?Yy(t,n):qy(t,n))&&(c=Fo(c,"onBeforeInput"),0<c.length&&(u=new Sd("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}sg(d,e)})}function ss(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fo(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Xr(t,n),s!=null&&i.unshift(ss(t,s,r)),s=Xr(t,e),s!=null&&i.push(ss(t,s,r))),t=t.return}return i}function mi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zd(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Xr(n,s),l!=null&&o.unshift(ss(n,l,a))):r||(l=Xr(n,s),l!=null&&o.push(ss(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lv=/\r\n?/g,cv=/\u0000|\uFFFD/g;function jd(t){return(typeof t=="string"?t:""+t).replace(lv,`
`).replace(cv,"")}function Ws(t,e,n){if(e=jd(e),jd(t)!==e&&n)throw Error(E(425))}function No(){}var nc=null,ic=null;function rc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sc=typeof setTimeout=="function"?setTimeout:void 0,uv=typeof clearTimeout=="function"?clearTimeout:void 0,$d=typeof Promise=="function"?Promise:void 0,dv=typeof queueMicrotask=="function"?queueMicrotask:typeof $d!="undefined"?function(t){return $d.resolve(null).then(t).catch(hv)}:sc;function hv(t){setTimeout(function(){throw t})}function sl(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ts(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ts(e)}function bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+lr,os="__reactProps$"+lr,Qt="__reactContainer$"+lr,oc="__reactEvents$"+lr,fv="__reactListeners$"+lr,pv="__reactHandles$"+lr;function Jn(t){var e=t[Rt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qt]||n[Rt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fd(t);t!==null;){if(n=t[Rt])return n;t=Fd(t)}return e}t=n,n=t.parentNode}return null}function Ss(t){return t=t[Rt]||t[Qt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function wa(t){return t[os]||null}var ac=[],Ti=-1;function zn(t){return{current:t}}function oe(t){0>Ti||(t.current=ac[Ti],ac[Ti]=null,Ti--)}function re(t,e){Ti++,ac[Ti]=t.current,t.current=e}var Dn={},Re=zn(Dn),Je=zn(!1),ni=Dn;function Ji(t,e){var n=t.type.contextTypes;if(!n)return Dn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ge(t){return t=t.childContextTypes,t!=null}function Uo(){oe(Je),oe(Re)}function Nd(t,e,n){if(Re.current!==Dn)throw Error(E(168));re(Re,e),re(Je,n)}function ag(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(E(108,X0(t)||"Unknown",r));return he({},n,i)}function Bo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dn,ni=Re.current,re(Re,t),re(Je,Je.current),!0}function Ud(t,e,n){var i=t.stateNode;if(!i)throw Error(E(169));n?(t=ag(t,e,ni),i.__reactInternalMemoizedMergedChildContext=t,oe(Je),oe(Re),re(Re,t)):oe(Je),re(Je,n)}var Vt=null,_a=!1,ol=!1;function lg(t){Vt===null?Vt=[t]:Vt.push(t)}function gv(t){_a=!0,lg(t)}function jn(){if(!ol&&Vt!==null){ol=!0;var t=0,e=X;try{var n=Vt;for(X=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Vt=null,_a=!1}catch(r){throw Vt!==null&&(Vt=Vt.slice(t+1)),Mp(tu,jn),r}finally{X=e,ol=!1}}return null}var Ai=[],Di=0,Wo=null,Ho=0,dt=[],ht=0,ii=null,Yt=1,qt="";function Hn(t,e){Ai[Di++]=Ho,Ai[Di++]=Wo,Wo=t,Ho=e}function cg(t,e,n){dt[ht++]=Yt,dt[ht++]=qt,dt[ht++]=ii,ii=t;var i=Yt;t=qt;var r=32-Ct(i)-1;i&=~(1<<r),n+=1;var s=32-Ct(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Yt=1<<32-Ct(e)+r|n<<r|i,qt=s+t}else Yt=1<<s|n<<r|i,qt=t}function uu(t){t.return!==null&&(Hn(t,1),cg(t,1,0))}function du(t){for(;t===Wo;)Wo=Ai[--Di],Ai[Di]=null,Ho=Ai[--Di],Ai[Di]=null;for(;t===ii;)ii=dt[--ht],dt[ht]=null,qt=dt[--ht],dt[ht]=null,Yt=dt[--ht],dt[ht]=null}var it=null,tt=null,ae=!1,kt=null;function ug(t,e){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,it=t,tt=bn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,it=t,tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ii!==null?{id:Yt,overflow:qt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,it=t,tt=null,!0):!1;default:return!1}}function lc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cc(t){if(ae){var e=tt;if(e){var n=e;if(!Bd(t,e)){if(lc(t))throw Error(E(418));e=bn(n.nextSibling);var i=it;e&&Bd(t,e)?ug(i,n):(t.flags=t.flags&-4097|2,ae=!1,it=t)}}else{if(lc(t))throw Error(E(418));t.flags=t.flags&-4097|2,ae=!1,it=t}}}function Wd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;it=t}function Hs(t){if(t!==it)return!1;if(!ae)return Wd(t),ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rc(t.type,t.memoizedProps)),e&&(e=tt)){if(lc(t))throw dg(),Error(E(418));for(;e;)ug(t,e),e=bn(e.nextSibling)}if(Wd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tt=bn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tt=null}}else tt=it?bn(t.stateNode.nextSibling):null;return!0}function dg(){for(var t=tt;t;)t=bn(t.nextSibling)}function Gi(){tt=it=null,ae=!1}function hu(t){kt===null?kt=[t]:kt.push(t)}var mv=en.ReactCurrentBatchConfig;function mr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var i=n.stateNode}if(!i)throw Error(E(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Vs(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hd(t){var e=t._init;return e(t._payload)}function hg(t){function e(p,m){if(t){var v=p.deletions;v===null?(p.deletions=[m],p.flags|=16):v.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function i(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function r(p,m){return p=Pn(p,m),p.index=0,p.sibling=null,p}function s(p,m,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<m?(p.flags|=2,m):v):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,m,v,_){return m===null||m.tag!==6?(m=fl(v,p.mode,_),m.return=p,m):(m=r(m,v),m.return=p,m)}function l(p,m,v,_){var b=v.type;return b===Si?u(p,m,v.props.children,_,v.key):m!==null&&(m.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===on&&Hd(b)===m.type)?(_=r(m,v.props),_.ref=mr(p,m,v),_.return=p,_):(_=Eo(v.type,v.key,v.props,null,p.mode,_),_.ref=mr(p,m,v),_.return=p,_)}function c(p,m,v,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=pl(v,p.mode,_),m.return=p,m):(m=r(m,v.children||[]),m.return=p,m)}function u(p,m,v,_,b){return m===null||m.tag!==7?(m=Zn(v,p.mode,_,b),m.return=p,m):(m=r(m,v),m.return=p,m)}function d(p,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=fl(""+m,p.mode,v),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ls:return v=Eo(m.type,m.key,m.props,null,p.mode,v),v.ref=mr(p,null,m),v.return=p,v;case ki:return m=pl(m,p.mode,v),m.return=p,m;case on:var _=m._init;return d(p,_(m._payload),v)}if(Er(m)||dr(m))return m=Zn(m,p.mode,v,null),m.return=p,m;Vs(p,m)}return null}function h(p,m,v,_){var b=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(p,m,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ls:return v.key===b?l(p,m,v,_):null;case ki:return v.key===b?c(p,m,v,_):null;case on:return b=v._init,h(p,m,b(v._payload),_)}if(Er(v)||dr(v))return b!==null?null:u(p,m,v,_,null);Vs(p,v)}return null}function f(p,m,v,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(v)||null,a(m,p,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ls:return p=p.get(_.key===null?v:_.key)||null,l(m,p,_,b);case ki:return p=p.get(_.key===null?v:_.key)||null,c(m,p,_,b);case on:var k=_._init;return f(p,m,v,k(_._payload),b)}if(Er(_)||dr(_))return p=p.get(v)||null,u(m,p,_,b,null);Vs(m,_)}return null}function g(p,m,v,_){for(var b=null,k=null,C=m,P=m=0,D=null;C!==null&&P<v.length;P++){C.index>P?(D=C,C=null):D=C.sibling;var A=h(p,C,v[P],_);if(A===null){C===null&&(C=D);break}t&&C&&A.alternate===null&&e(p,C),m=s(A,m,P),k===null?b=A:k.sibling=A,k=A,C=D}if(P===v.length)return n(p,C),ae&&Hn(p,P),b;if(C===null){for(;P<v.length;P++)C=d(p,v[P],_),C!==null&&(m=s(C,m,P),k===null?b=C:k.sibling=C,k=C);return ae&&Hn(p,P),b}for(C=i(p,C);P<v.length;P++)D=f(C,p,P,v[P],_),D!==null&&(t&&D.alternate!==null&&C.delete(D.key===null?P:D.key),m=s(D,m,P),k===null?b=D:k.sibling=D,k=D);return t&&C.forEach(function(I){return e(p,I)}),ae&&Hn(p,P),b}function y(p,m,v,_){var b=dr(v);if(typeof b!="function")throw Error(E(150));if(v=b.call(v),v==null)throw Error(E(151));for(var k=b=null,C=m,P=m=0,D=null,A=v.next();C!==null&&!A.done;P++,A=v.next()){C.index>P?(D=C,C=null):D=C.sibling;var I=h(p,C,A.value,_);if(I===null){C===null&&(C=D);break}t&&C&&I.alternate===null&&e(p,C),m=s(I,m,P),k===null?b=I:k.sibling=I,k=I,C=D}if(A.done)return n(p,C),ae&&Hn(p,P),b;if(C===null){for(;!A.done;P++,A=v.next())A=d(p,A.value,_),A!==null&&(m=s(A,m,P),k===null?b=A:k.sibling=A,k=A);return ae&&Hn(p,P),b}for(C=i(p,C);!A.done;P++,A=v.next())A=f(C,p,P,A.value,_),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?P:A.key),m=s(A,m,P),k===null?b=A:k.sibling=A,k=A);return t&&C.forEach(function(O){return e(p,O)}),ae&&Hn(p,P),b}function w(p,m,v,_){if(typeof v=="object"&&v!==null&&v.type===Si&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ls:e:{for(var b=v.key,k=m;k!==null;){if(k.key===b){if(b=v.type,b===Si){if(k.tag===7){n(p,k.sibling),m=r(k,v.props.children),m.return=p,p=m;break e}}else if(k.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===on&&Hd(b)===k.type){n(p,k.sibling),m=r(k,v.props),m.ref=mr(p,k,v),m.return=p,p=m;break e}n(p,k);break}else e(p,k);k=k.sibling}v.type===Si?(m=Zn(v.props.children,p.mode,_,v.key),m.return=p,p=m):(_=Eo(v.type,v.key,v.props,null,p.mode,_),_.ref=mr(p,m,v),_.return=p,p=_)}return o(p);case ki:e:{for(k=v.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(p,m.sibling),m=r(m,v.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=pl(v,p.mode,_),m.return=p,p=m}return o(p);case on:return k=v._init,w(p,m,k(v._payload),_)}if(Er(v))return g(p,m,v,_);if(dr(v))return y(p,m,v,_);Vs(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(p,m.sibling),m=r(m,v),m.return=p,p=m):(n(p,m),m=fl(v,p.mode,_),m.return=p,p=m),o(p)):n(p,m)}return w}var Qi=hg(!0),fg=hg(!1),Vo=zn(null),Ko=null,Ii=null,fu=null;function pu(){fu=Ii=Ko=null}function gu(t){var e=Vo.current;oe(Vo),t._currentValue=e}function uc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ui(t,e){Ko=t,fu=Ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(qe=!0),t.firstContext=null)}function yt(t){var e=t._currentValue;if(fu!==t)if(t={context:t,memoizedValue:e,next:null},Ii===null){if(Ko===null)throw Error(E(308));Ii=t,Ko.dependencies={lanes:0,firstContext:t}}else Ii=Ii.next=t;return e}var Gn=null;function mu(t){Gn===null?Gn=[t]:Gn.push(t)}function pg(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,mu(e)):(n.next=r.next,r.next=n),e.interleaved=n,Xt(t,i)}function Xt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var an=!1;function yu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(K&2)!==0){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Xt(t,n)}return r=i.interleaved,r===null?(e.next=e,mu(i)):(e.next=r.next,r.next=e),i.interleaved=e,Xt(t,n)}function xo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nu(t,n)}}function Vd(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yo(t,e,n,i){var r=t.updateQueue;an=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(h=e,f=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(f,d,h):g,h==null)break e;d=he({},d,h);break e;case 2:an=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);si|=o,t.lanes=o,t.memoizedState=d}}function Kd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(E(191,r));r.call(i)}}}var Cs={},$t=zn(Cs),as=zn(Cs),ls=zn(Cs);function Qn(t){if(t===Cs)throw Error(E(174));return t}function vu(t,e){switch(re(ls,e),re(as,t),re($t,Cs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hl(e,t)}oe($t),re($t,e)}function Xi(){oe($t),oe(as),oe(ls)}function mg(t){Qn(ls.current);var e=Qn($t.current),n=Hl(e,t.type);e!==n&&(re(as,t),re($t,n))}function wu(t){as.current===t&&(oe($t),oe(as))}var ue=zn(0);function qo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var al=[];function _u(){for(var t=0;t<al.length;t++)al[t]._workInProgressVersionPrimary=null;al.length=0}var bo=en.ReactCurrentDispatcher,ll=en.ReactCurrentBatchConfig,ri=0,de=null,ye=null,be=null,Jo=!1,Fr=!1,cs=0,yv=0;function De(){throw Error(E(321))}function xu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Et(t[n],e[n]))return!1;return!0}function bu(t,e,n,i,r,s){if(ri=s,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bo.current=t===null||t.memoizedState===null?xv:bv,t=n(i,r),Fr){s=0;do{if(Fr=!1,cs=0,25<=s)throw Error(E(301));s+=1,be=ye=null,e.updateQueue=null,bo.current=kv,t=n(i,r)}while(Fr)}if(bo.current=Go,e=ye!==null&&ye.next!==null,ri=0,be=ye=de=null,Jo=!1,e)throw Error(E(300));return t}function ku(){var t=cs!==0;return cs=0,t}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?de.memoizedState=be=t:be=be.next=t,be}function vt(){if(ye===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=ye.next;var e=be===null?de.memoizedState:be.next;if(e!==null)be=e,ye=t;else{if(t===null)throw Error(E(310));ye=t,t={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},be===null?de.memoizedState=be=t:be=be.next=t}return be}function us(t,e){return typeof e=="function"?e(t):e}function cl(t){var e=vt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var i=ye,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ri&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,de.lanes|=u,si|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Et(i,e.memoizedState)||(qe=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,de.lanes|=s,si|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ul(t){var e=vt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Et(s,e.memoizedState)||(qe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function yg(){}function vg(t,e){var n=de,i=vt(),r=e(),s=!Et(i.memoizedState,r);if(s&&(i.memoizedState=r,qe=!0),i=i.queue,Su(xg.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,ds(9,_g.bind(null,n,i,r,e),void 0,null),Se===null)throw Error(E(349));(ri&30)!==0||wg(n,e,r)}return r}function wg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _g(t,e,n,i){e.value=n,e.getSnapshot=i,bg(e)&&kg(t)}function xg(t,e,n){return n(function(){bg(e)&&kg(t)})}function bg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Et(t,n)}catch{return!0}}function kg(t){var e=Xt(t,1);e!==null&&Pt(e,t,1,-1)}function Yd(t){var e=It();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:t},e.queue=t,t=t.dispatch=_v.bind(null,de,t),[e.memoizedState,t]}function ds(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Sg(){return vt().memoizedState}function ko(t,e,n,i){var r=It();de.flags|=t,r.memoizedState=ds(1|e,n,void 0,i===void 0?null:i)}function xa(t,e,n,i){var r=vt();i=i===void 0?null:i;var s=void 0;if(ye!==null){var o=ye.memoizedState;if(s=o.destroy,i!==null&&xu(i,o.deps)){r.memoizedState=ds(e,n,s,i);return}}de.flags|=t,r.memoizedState=ds(1|e,n,s,i)}function qd(t,e){return ko(8390656,8,t,e)}function Su(t,e){return xa(2048,8,t,e)}function Cg(t,e){return xa(4,2,t,e)}function Pg(t,e){return xa(4,4,t,e)}function Eg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Og(t,e,n){return n=n!=null?n.concat([t]):null,xa(4,4,Eg.bind(null,e,t),n)}function Cu(){}function Tg(t,e){var n=vt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xu(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ag(t,e){var n=vt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xu(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Dg(t,e,n){return(ri&21)===0?(t.baseState&&(t.baseState=!1,qe=!0),t.memoizedState=n):(Et(n,e)||(n=zp(),de.lanes|=n,si|=n,t.baseState=!0),e)}function vv(t,e){var n=X;X=n!==0&&4>n?n:4,t(!0);var i=ll.transition;ll.transition={};try{t(!1),e()}finally{X=n,ll.transition=i}}function Ig(){return vt().memoizedState}function wv(t,e,n){var i=Cn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Mg(t))Lg(e,n);else if(n=pg(t,e,n,i),n!==null){var r=Fe();Pt(n,t,i,r),Rg(n,e,i)}}function _v(t,e,n){var i=Cn(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mg(t))Lg(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Et(a,o)){var l=e.interleaved;l===null?(r.next=r,mu(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=pg(t,e,r,i),n!==null&&(r=Fe(),Pt(n,t,i,r),Rg(n,e,i))}}function Mg(t){var e=t.alternate;return t===de||e!==null&&e===de}function Lg(t,e){Fr=Jo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Rg(t,e,n){if((n&4194240)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nu(t,n)}}var Go={readContext:yt,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},xv={readContext:yt,useCallback:function(t,e){return It().memoizedState=[t,e===void 0?null:e],t},useContext:yt,useEffect:qd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ko(4194308,4,Eg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ko(4194308,4,t,e)},useInsertionEffect:function(t,e){return ko(4,2,t,e)},useMemo:function(t,e){var n=It();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=It();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=wv.bind(null,de,t),[i.memoizedState,t]},useRef:function(t){var e=It();return t={current:t},e.memoizedState=t},useState:Yd,useDebugValue:Cu,useDeferredValue:function(t){return It().memoizedState=t},useTransition:function(){var t=Yd(!1),e=t[0];return t=vv.bind(null,t[1]),It().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=de,r=It();if(ae){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),Se===null)throw Error(E(349));(ri&30)!==0||wg(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,qd(xg.bind(null,i,s,t),[t]),i.flags|=2048,ds(9,_g.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=It(),e=Se.identifierPrefix;if(ae){var n=qt,i=Yt;n=(i&~(1<<32-Ct(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=cs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bv={readContext:yt,useCallback:Tg,useContext:yt,useEffect:Su,useImperativeHandle:Og,useInsertionEffect:Cg,useLayoutEffect:Pg,useMemo:Ag,useReducer:cl,useRef:Sg,useState:function(){return cl(us)},useDebugValue:Cu,useDeferredValue:function(t){var e=vt();return Dg(e,ye.memoizedState,t)},useTransition:function(){var t=cl(us)[0],e=vt().memoizedState;return[t,e]},useMutableSource:yg,useSyncExternalStore:vg,useId:Ig,unstable_isNewReconciler:!1},kv={readContext:yt,useCallback:Tg,useContext:yt,useEffect:Su,useImperativeHandle:Og,useInsertionEffect:Cg,useLayoutEffect:Pg,useMemo:Ag,useReducer:ul,useRef:Sg,useState:function(){return ul(us)},useDebugValue:Cu,useDeferredValue:function(t){var e=vt();return ye===null?e.memoizedState=t:Dg(e,ye.memoizedState,t)},useTransition:function(){var t=ul(us)[0],e=vt().memoizedState;return[t,e]},useMutableSource:yg,useSyncExternalStore:vg,useId:Ig,unstable_isNewReconciler:!1};function _t(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ba={isMounted:function(t){return(t=t._reactInternals)?hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Fe(),r=Cn(t),s=Jt(i,r);s.payload=e,n!=null&&(s.callback=n),e=kn(t,s,r),e!==null&&(Pt(e,t,r,i),xo(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Fe(),r=Cn(t),s=Jt(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=kn(t,s,r),e!==null&&(Pt(e,t,r,i),xo(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fe(),i=Cn(t),r=Jt(n,i);r.tag=2,e!=null&&(r.callback=e),e=kn(t,r,i),e!==null&&(Pt(e,t,i,n),xo(e,t,i))}};function Jd(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!is(n,i)||!is(r,s):!0}function zg(t,e,n){var i=!1,r=Dn,s=e.contextType;return typeof s=="object"&&s!==null?s=yt(s):(r=Ge(e)?ni:Re.current,i=e.contextTypes,s=(i=i!=null)?Ji(t,r):Dn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ba,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Gd(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ba.enqueueReplaceState(e,e.state,null)}function hc(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},yu(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=yt(s):(s=Ge(e)?ni:Re.current,r.context=Ji(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(dc(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ba.enqueueReplaceState(r,r.state,null),Yo(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Zi(t,e){try{var n="",i=e;do n+=Q0(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function dl(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function fc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sv=typeof WeakMap=="function"?WeakMap:Map;function jg(t,e,n){n=Jt(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Xo||(Xo=!0,kc=i),fc(t,e)},n}function $g(t,e,n){n=Jt(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){fc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fc(t,e),typeof i!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Qd(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Sv;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=$v.bind(null,t,e,n),e.then(t,t))}function Xd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zd(t,e,n,i,r){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jt(-1,1),e.tag=2,kn(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var Cv=en.ReactCurrentOwner,qe=!1;function $e(t,e,n,i){e.child=t===null?fg(e,null,n,i):Qi(e,t.child,n,i)}function eh(t,e,n,i,r){n=n.render;var s=e.ref;return Ui(e,r),i=bu(t,e,n,i,s,r),n=ku(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zt(t,e,r)):(ae&&n&&uu(e),e.flags|=1,$e(t,e,i,r),e.child)}function th(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Mu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Fg(t,e,s,i,r)):(t=Eo(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&r)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:is,n(o,i)&&t.ref===e.ref)return Zt(t,e,r)}return e.flags|=1,t=Pn(s,i),t.ref=e.ref,t.return=e,e.child=t}function Fg(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(is(s,i)&&t.ref===e.ref)if(qe=!1,e.pendingProps=i=s,(t.lanes&r)!==0)(t.flags&131072)!==0&&(qe=!0);else return e.lanes=t.lanes,Zt(t,e,r)}return pc(t,e,n,i,r)}function Ng(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(Li,et),et|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(Li,et),et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,re(Li,et),et|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,re(Li,et),et|=i;return $e(t,e,r,n),e.child}function Ug(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pc(t,e,n,i,r){var s=Ge(n)?ni:Re.current;return s=Ji(e,s),Ui(e,r),n=bu(t,e,n,i,s,r),i=ku(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zt(t,e,r)):(ae&&i&&uu(e),e.flags|=1,$e(t,e,n,r),e.child)}function nh(t,e,n,i,r){if(Ge(n)){var s=!0;Bo(e)}else s=!1;if(Ui(e,r),e.stateNode===null)So(t,e),zg(e,n,i),hc(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yt(c):(c=Ge(n)?ni:Re.current,c=Ji(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&Gd(e,o,i,c),an=!1;var h=e.memoizedState;o.state=h,Yo(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Je.current||an?(typeof u=="function"&&(dc(e,n,u,i),l=e.memoizedState),(a=an||Jd(e,n,a,i,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,gg(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:_t(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yt(l):(l=Ge(n)?ni:Re.current,l=Ji(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Gd(e,o,i,l),an=!1,h=e.memoizedState,o.state=h,Yo(e,i,o,r);var g=e.memoizedState;a!==d||h!==g||Je.current||an?(typeof f=="function"&&(dc(e,n,f,i),g=e.memoizedState),(c=an||Jd(e,n,c,i,h,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return gc(t,e,n,i,s,r)}function gc(t,e,n,i,r,s){Ug(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Ud(e,n,!1),Zt(t,e,s);i=e.stateNode,Cv.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Qi(e,t.child,null,s),e.child=Qi(e,null,a,s)):$e(t,e,a,s),e.memoizedState=i.state,r&&Ud(e,n,!0),e.child}function Bg(t){var e=t.stateNode;e.pendingContext?Nd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nd(t,e.context,!1),vu(t,e.containerInfo)}function ih(t,e,n,i,r){return Gi(),hu(r),e.flags|=256,$e(t,e,n,i),e.child}var mc={dehydrated:null,treeContext:null,retryLane:0};function yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wg(t,e,n){var i=e.pendingProps,r=ue.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),re(ue,r&1),t===null)return cc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ca(o,i,0,null),t=Zn(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=yc(n),e.memoizedState=mc,t):Pu(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Pv(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return(o&1)===0&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Pn(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Pn(a,s):(s=Zn(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?yc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=mc,i}return s=t.child,t=s.sibling,i=Pn(s,{mode:"visible",children:i.children}),(e.mode&1)===0&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Pu(t,e){return e=Ca({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ks(t,e,n,i){return i!==null&&hu(i),Qi(e,t.child,null,n),t=Pu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Pv(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=dl(Error(E(422))),Ks(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ca({mode:"visible",children:i.children},r,0,null),s=Zn(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,(e.mode&1)!==0&&Qi(e,t.child,null,o),e.child.memoizedState=yc(o),e.memoizedState=mc,s);if((e.mode&1)===0)return Ks(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(E(419)),i=dl(s,i,void 0),Ks(t,e,o,i)}if(a=(o&t.childLanes)!==0,qe||a){if(i=Se,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=(r&(i.suspendedLanes|o))!==0?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Xt(t,r),Pt(i,t,r,-1))}return Iu(),i=dl(Error(E(421))),Ks(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Fv.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,tt=bn(r.nextSibling),it=e,ae=!0,kt=null,t!==null&&(dt[ht++]=Yt,dt[ht++]=qt,dt[ht++]=ii,Yt=t.id,qt=t.overflow,ii=e),e=Pu(e,i.children),e.flags|=4096,e)}function rh(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),uc(t.return,e,n)}function hl(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Hg(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if($e(t,e,i.children,n),i=ue.current,(i&2)!==0)i=i&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rh(t,n,e);else if(t.tag===19)rh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(re(ue,i),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&qo(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),hl(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&qo(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}hl(e,!0,n,null,s);break;case"together":hl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function So(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),si|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=Pn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ev(t,e,n){switch(e.tag){case 3:Bg(e),Gi();break;case 5:mg(e);break;case 1:Ge(e.type)&&Bo(e);break;case 4:vu(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;re(Vo,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(re(ue,ue.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?Wg(t,e,n):(re(ue,ue.current&1),t=Zt(t,e,n),t!==null?t.sibling:null);re(ue,ue.current&1);break;case 19:if(i=(n&e.childLanes)!==0,(t.flags&128)!==0){if(i)return Hg(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),re(ue,ue.current),i)break;return null;case 22:case 23:return e.lanes=0,Ng(t,e,n)}return Zt(t,e,n)}var Vg,vc,Kg,Yg;Vg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vc=function(){};Kg=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Qn($t.current);var s=null;switch(n){case"input":r=Nl(t,r),i=Nl(t,i),s=[];break;case"select":r=he({},r,{value:void 0}),i=he({},i,{value:void 0}),s=[];break;case"textarea":r=Wl(t,r),i=Wl(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=No)}Vl(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Gr.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Gr.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Yg=function(t,e,n,i){n!==i&&(e.flags|=4)};function yr(t,e){if(!ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Ov(t,e,n){var i=e.pendingProps;switch(du(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return Ge(e.type)&&Uo(),Ie(e),null;case 3:return i=e.stateNode,Xi(),oe(Je),oe(Re),_u(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Hs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,kt!==null&&(Pc(kt),kt=null))),vc(t,e),Ie(e),null;case 5:wu(e);var r=Qn(ls.current);if(n=e.type,t!==null&&e.stateNode!=null)Kg(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(E(166));return Ie(e),null}if(t=Qn($t.current),Hs(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Rt]=e,i[os]=s,t=(e.mode&1)!==0,n){case"dialog":se("cancel",i),se("close",i);break;case"iframe":case"object":case"embed":se("load",i);break;case"video":case"audio":for(r=0;r<Tr.length;r++)se(Tr[r],i);break;case"source":se("error",i);break;case"img":case"image":case"link":se("error",i),se("load",i);break;case"details":se("toggle",i);break;case"input":fd(i,s),se("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},se("invalid",i);break;case"textarea":gd(i,s),se("invalid",i)}Vl(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ws(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ws(i.textContent,a,t),r=["children",""+a]):Gr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&se("scroll",i)}switch(n){case"input":Rs(i),pd(i,s,!0);break;case"textarea":Rs(i),md(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=No)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Rt]=e,t[os]=i,Vg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kl(n,i),n){case"dialog":se("cancel",t),se("close",t),r=i;break;case"iframe":case"object":case"embed":se("load",t),r=i;break;case"video":case"audio":for(r=0;r<Tr.length;r++)se(Tr[r],t);r=i;break;case"source":se("error",t),r=i;break;case"img":case"image":case"link":se("error",t),se("load",t),r=i;break;case"details":se("toggle",t),r=i;break;case"input":fd(t,i),r=Nl(t,i),se("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=he({},i,{value:void 0}),se("invalid",t);break;case"textarea":gd(t,i),r=Wl(t,i),se("invalid",t);break;default:r=i}Vl(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Sp(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bp(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qr(t,l):typeof l=="number"&&Qr(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Gr.hasOwnProperty(s)?l!=null&&s==="onScroll"&&se("scroll",t):l!=null&&Gc(t,s,l,o))}switch(n){case"input":Rs(t),pd(t,i,!1);break;case"textarea":Rs(t),md(t);break;case"option":i.value!=null&&t.setAttribute("value",""+An(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?ji(t,!!i.multiple,s,!1):i.defaultValue!=null&&ji(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=No)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)Yg(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(E(166));if(n=Qn(ls.current),Qn($t.current),Hs(e)){if(i=e.stateNode,n=e.memoizedProps,i[Rt]=e,(s=i.nodeValue!==n)&&(t=it,t!==null))switch(t.tag){case 3:Ws(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ws(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Rt]=e,e.stateNode=i}return Ie(e),null;case 13:if(oe(ue),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ae&&tt!==null&&(e.mode&1)!==0&&(e.flags&128)===0)dg(),Gi(),e.flags|=98560,s=!1;else if(s=Hs(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[Rt]=e}else Gi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ie(e),s=!1}else kt!==null&&(Pc(kt),kt=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(ue.current&1)!==0?ve===0&&(ve=3):Iu())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return Xi(),vc(t,e),t===null&&rs(e.stateNode.containerInfo),Ie(e),null;case 10:return gu(e.type._context),Ie(e),null;case 17:return Ge(e.type)&&Uo(),Ie(e),null;case 19:if(oe(ue),s=e.memoizedState,s===null)return Ie(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)yr(s,!1);else{if(ve!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=qo(t),o!==null){for(e.flags|=128,yr(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(ue,ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&ge()>er&&(e.flags|=128,i=!0,yr(s,!1),e.lanes=4194304)}else{if(!i)if(t=qo(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ae)return Ie(e),null}else 2*ge()-s.renderingStartTime>er&&n!==1073741824&&(e.flags|=128,i=!0,yr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ge(),e.sibling=null,n=ue.current,re(ue,i?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return Du(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&(e.mode&1)!==0?(et&1073741824)!==0&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function Tv(t,e){switch(du(e),e.tag){case 1:return Ge(e.type)&&Uo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xi(),oe(Je),oe(Re),_u(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return wu(e),null;case 13:if(oe(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Gi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(ue),null;case 4:return Xi(),null;case 10:return gu(e.type._context),null;case 22:case 23:return Du(),null;case 24:return null;default:return null}}var Ys=!1,Le=!1,Av=typeof WeakSet=="function"?WeakSet:Set,M=null;function Mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){fe(t,e,i)}else n.current=null}function wc(t,e,n){try{n()}catch(i){fe(t,e,i)}}var sh=!1;function Dv(t,e){if(nc=jo,t=Xp(),cu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===r&&(a=o),h===s&&++u===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ic={focusedElem:t,selectionRange:n},jo=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var g=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:_t(e.type,y),w);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(_){fe(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return g=sh,sh=!1,g}function Nr(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&wc(e,n,s)}r=r.next}while(r!==i)}}function ka(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function _c(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qg(t){var e=t.alternate;e!==null&&(t.alternate=null,qg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rt],delete e[os],delete e[oc],delete e[fv],delete e[pv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jg(t){return t.tag===5||t.tag===3||t.tag===4}function oh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=No));else if(i!==4&&(t=t.child,t!==null))for(xc(t,e,n),t=t.sibling;t!==null;)xc(t,e,n),t=t.sibling}function bc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(bc(t,e,n),t=t.sibling;t!==null;)bc(t,e,n),t=t.sibling}var Pe=null,xt=!1;function nn(t,e,n){for(n=n.child;n!==null;)Gg(t,e,n),n=n.sibling}function Gg(t,e,n){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(ga,n)}catch{}switch(n.tag){case 5:Le||Mi(n,e);case 6:var i=Pe,r=xt;Pe=null,nn(t,e,n),Pe=i,xt=r,Pe!==null&&(xt?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(xt?(t=Pe,n=n.stateNode,t.nodeType===8?sl(t.parentNode,n):t.nodeType===1&&sl(t,n),ts(t)):sl(Pe,n.stateNode));break;case 4:i=Pe,r=xt,Pe=n.stateNode.containerInfo,xt=!0,nn(t,e,n),Pe=i,xt=r;break;case 0:case 11:case 14:case 15:if(!Le&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&wc(n,e,o),r=r.next}while(r!==i)}nn(t,e,n);break;case 1:if(!Le&&(Mi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){fe(n,e,a)}nn(t,e,n);break;case 21:nn(t,e,n);break;case 22:n.mode&1?(Le=(i=Le)||n.memoizedState!==null,nn(t,e,n),Le=i):nn(t,e,n);break;default:nn(t,e,n)}}function ah(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Av),e.forEach(function(i){var r=Nv.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function wt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pe=a.stateNode,xt=!1;break e;case 3:Pe=a.stateNode.containerInfo,xt=!0;break e;case 4:Pe=a.stateNode.containerInfo,xt=!0;break e}a=a.return}if(Pe===null)throw Error(E(160));Gg(s,o,r),Pe=null,xt=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){fe(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qg(e,t),e=e.sibling}function Qg(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wt(e,t),Tt(t),i&4){try{Nr(3,t,t.return),ka(3,t)}catch(y){fe(t,t.return,y)}try{Nr(5,t,t.return)}catch(y){fe(t,t.return,y)}}break;case 1:wt(e,t),Tt(t),i&512&&n!==null&&Mi(n,n.return);break;case 5:if(wt(e,t),Tt(t),i&512&&n!==null&&Mi(n,n.return),t.flags&32){var r=t.stateNode;try{Qr(r,"")}catch(y){fe(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wp(r,s),Kl(a,o);var c=Kl(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Sp(r,d):u==="dangerouslySetInnerHTML"?bp(r,d):u==="children"?Qr(r,d):Gc(r,u,d,c)}switch(a){case"input":Ul(r,s);break;case"textarea":_p(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ji(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?ji(r,!!s.multiple,s.defaultValue,!0):ji(r,!!s.multiple,s.multiple?[]:"",!1))}r[os]=s}catch(y){fe(t,t.return,y)}}break;case 6:if(wt(e,t),Tt(t),i&4){if(t.stateNode===null)throw Error(E(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){fe(t,t.return,y)}}break;case 3:if(wt(e,t),Tt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ts(e.containerInfo)}catch(y){fe(t,t.return,y)}break;case 4:wt(e,t),Tt(t);break;case 13:wt(e,t),Tt(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Tu=ge())),i&4&&ah(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Le=(c=Le)||u,wt(e,t),Le=c):wt(e,t),Tt(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&(t.mode&1)!==0)for(M=t,u=t.child;u!==null;){for(d=M=u;M!==null;){switch(h=M,f=h.child,h.tag){case 0:case 11:case 14:case 15:Nr(4,h,h.return);break;case 1:Mi(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){fe(i,n,y)}}break;case 5:Mi(h,h.return);break;case 22:if(h.memoizedState!==null){ch(d);continue}}f!==null?(f.return=h,M=f):ch(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kp("display",o))}catch(y){fe(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){fe(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wt(e,t),Tt(t),i&4&&ah(t);break;case 21:break;default:wt(e,t),Tt(t)}}function Tt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jg(n)){var i=n;break e}n=n.return}throw Error(E(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Qr(r,""),i.flags&=-33);var s=oh(t);bc(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=oh(t);xc(t,a,o);break;default:throw Error(E(161))}}catch(l){fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Iv(t,e,n){M=t,Xg(t)}function Xg(t,e,n){for(var i=(t.mode&1)!==0;M!==null;){var r=M,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Ys;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Le;a=Ys;var c=Le;if(Ys=o,(Le=l)&&!c)for(M=r;M!==null;)o=M,l=o.child,o.tag===22&&o.memoizedState!==null?uh(r):l!==null?(l.return=o,M=l):uh(r);for(;s!==null;)M=s,Xg(s),s=s.sibling;M=r,Ys=a,Le=c}lh(t)}else(r.subtreeFlags&8772)!==0&&s!==null?(s.return=r,M=s):lh(t)}}function lh(t){for(;M!==null;){var e=M;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Le||ka(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Le)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:_t(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Kd(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Kd(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ts(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Le||e.flags&512&&_c(e)}catch(h){fe(e,e.return,h)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function ch(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function uh(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ka(4,e)}catch(l){fe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){fe(e,r,l)}}var s=e.return;try{_c(e)}catch(l){fe(e,s,l)}break;case 5:var o=e.return;try{_c(e)}catch(l){fe(e,o,l)}}}catch(l){fe(e,e.return,l)}if(e===t){M=null;break}var a=e.sibling;if(a!==null){a.return=e.return,M=a;break}M=e.return}}var Mv=Math.ceil,Qo=en.ReactCurrentDispatcher,Eu=en.ReactCurrentOwner,gt=en.ReactCurrentBatchConfig,K=0,Se=null,me=null,Ee=0,et=0,Li=zn(0),ve=0,hs=null,si=0,Sa=0,Ou=0,Ur=null,He=null,Tu=0,er=1/0,Wt=null,Xo=!1,kc=null,Sn=null,qs=!1,fn=null,Zo=0,Br=0,Sc=null,Co=-1,Po=0;function Fe(){return(K&6)!==0?ge():Co!==-1?Co:Co=ge()}function Cn(t){return(t.mode&1)===0?1:(K&2)!==0&&Ee!==0?Ee&-Ee:mv.transition!==null?(Po===0&&(Po=zp()),Po):(t=X,t!==0||(t=window.event,t=t===void 0?16:Wp(t.type)),t)}function Pt(t,e,n,i){if(50<Br)throw Br=0,Sc=null,Error(E(185));bs(t,n,i),((K&2)===0||t!==Se)&&(t===Se&&((K&2)===0&&(Sa|=n),ve===4&&un(t,Ee)),Qe(t,i),n===1&&K===0&&(e.mode&1)===0&&(er=ge()+500,_a&&jn()))}function Qe(t,e){var n=t.callbackNode;my(t,e);var i=zo(t,t===Se?Ee:0);if(i===0)n!==null&&wd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&wd(n),e===1)t.tag===0?gv(dh.bind(null,t)):lg(dh.bind(null,t)),dv(function(){(K&6)===0&&jn()}),n=null;else{switch(jp(i)){case 1:n=tu;break;case 4:n=Lp;break;case 16:n=Ro;break;case 536870912:n=Rp;break;default:n=Ro}n=om(n,Zg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zg(t,e){if(Co=-1,Po=0,(K&6)!==0)throw Error(E(327));var n=t.callbackNode;if(Bi()&&t.callbackNode!==n)return null;var i=zo(t,t===Se?Ee:0);if(i===0)return null;if((i&30)!==0||(i&t.expiredLanes)!==0||e)e=ea(t,i);else{e=i;var r=K;K|=2;var s=tm();(Se!==t||Ee!==e)&&(Wt=null,er=ge()+500,Xn(t,e));do try{zv();break}catch(a){em(t,a)}while(1);pu(),Qo.current=s,K=r,me!==null?e=0:(Se=null,Ee=0,e=ve)}if(e!==0){if(e===2&&(r=Ql(t),r!==0&&(i=r,e=Cc(t,r))),e===1)throw n=hs,Xn(t,0),un(t,i),Qe(t,ge()),n;if(e===6)un(t,i);else{if(r=t.current.alternate,(i&30)===0&&!Lv(r)&&(e=ea(t,i),e===2&&(s=Ql(t),s!==0&&(i=s,e=Cc(t,s))),e===1))throw n=hs,Xn(t,0),un(t,i),Qe(t,ge()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(E(345));case 2:Vn(t,He,Wt);break;case 3:if(un(t,i),(i&130023424)===i&&(e=Tu+500-ge(),10<e)){if(zo(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Fe(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=sc(Vn.bind(null,t,He,Wt),e);break}Vn(t,He,Wt);break;case 4:if(un(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ct(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ge()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Mv(i/1960))-i,10<i){t.timeoutHandle=sc(Vn.bind(null,t,He,Wt),i);break}Vn(t,He,Wt);break;case 5:Vn(t,He,Wt);break;default:throw Error(E(329))}}}return Qe(t,ge()),t.callbackNode===n?Zg.bind(null,t):null}function Cc(t,e){var n=Ur;return t.current.memoizedState.isDehydrated&&(Xn(t,e).flags|=256),t=ea(t,e),t!==2&&(e=He,He=n,e!==null&&Pc(e)),t}function Pc(t){He===null?He=t:He.push.apply(He,t)}function Lv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Et(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function un(t,e){for(e&=~Ou,e&=~Sa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ct(e),i=1<<n;t[n]=-1,e&=~i}}function dh(t){if((K&6)!==0)throw Error(E(327));Bi();var e=zo(t,0);if((e&1)===0)return Qe(t,ge()),null;var n=ea(t,e);if(t.tag!==0&&n===2){var i=Ql(t);i!==0&&(e=i,n=Cc(t,i))}if(n===1)throw n=hs,Xn(t,0),un(t,e),Qe(t,ge()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vn(t,He,Wt),Qe(t,ge()),null}function Au(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(er=ge()+500,_a&&jn())}}function oi(t){fn!==null&&fn.tag===0&&(K&6)===0&&Bi();var e=K;K|=1;var n=gt.transition,i=X;try{if(gt.transition=null,X=1,t)return t()}finally{X=i,gt.transition=n,K=e,(K&6)===0&&jn()}}function Du(){et=Li.current,oe(Li)}function Xn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uv(n)),me!==null)for(n=me.return;n!==null;){var i=n;switch(du(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Uo();break;case 3:Xi(),oe(Je),oe(Re),_u();break;case 5:wu(i);break;case 4:Xi();break;case 13:oe(ue);break;case 19:oe(ue);break;case 10:gu(i.type._context);break;case 22:case 23:Du()}n=n.return}if(Se=t,me=t=Pn(t.current,null),Ee=et=e,ve=0,hs=null,Ou=Sa=si=0,He=Ur=null,Gn!==null){for(e=0;e<Gn.length;e++)if(n=Gn[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Gn=null}return t}function em(t,e){do{var n=me;try{if(pu(),bo.current=Go,Jo){for(var i=de.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Jo=!1}if(ri=0,be=ye=de=null,Fr=!1,cs=0,Eu.current=null,n===null||n.return===null){ve=1,hs=e,me=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ee,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if((u.mode&1)===0&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Xd(o);if(f!==null){f.flags&=-257,Zd(f,o,a,s,e),f.mode&1&&Qd(s,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if((e&1)===0){Qd(s,c,e),Iu();break e}l=Error(E(426))}}else if(ae&&a.mode&1){var w=Xd(o);if(w!==null){(w.flags&65536)===0&&(w.flags|=256),Zd(w,o,a,s,e),hu(Zi(l,a));break e}}s=l=Zi(l,a),ve!==4&&(ve=2),Ur===null?Ur=[s]:Ur.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=jg(s,l,e);Vd(s,p);break e;case 1:a=l;var m=s.type,v=s.stateNode;if((s.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Sn===null||!Sn.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=$g(s,a,e);Vd(s,_);break e}}s=s.return}while(s!==null)}im(n)}catch(b){e=b,me===n&&n!==null&&(me=n=n.return);continue}break}while(1)}function tm(){var t=Qo.current;return Qo.current=Go,t===null?Go:t}function Iu(){(ve===0||ve===3||ve===2)&&(ve=4),Se===null||(si&268435455)===0&&(Sa&268435455)===0||un(Se,Ee)}function ea(t,e){var n=K;K|=2;var i=tm();(Se!==t||Ee!==e)&&(Wt=null,Xn(t,e));do try{Rv();break}catch(r){em(t,r)}while(1);if(pu(),K=n,Qo.current=i,me!==null)throw Error(E(261));return Se=null,Ee=0,ve}function Rv(){for(;me!==null;)nm(me)}function zv(){for(;me!==null&&!ay();)nm(me)}function nm(t){var e=sm(t.alternate,t,et);t.memoizedProps=t.pendingProps,e===null?im(t):me=e,Eu.current=null}function im(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=Ov(n,e,et),n!==null){me=n;return}}else{if(n=Tv(n,e),n!==null){n.flags&=32767,me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ve=6,me=null;return}}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);ve===0&&(ve=5)}function Vn(t,e,n){var i=X,r=gt.transition;try{gt.transition=null,X=1,jv(t,e,n,i)}finally{gt.transition=r,X=i}return null}function jv(t,e,n,i){do Bi();while(fn!==null);if((K&6)!==0)throw Error(E(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yy(t,s),t===Se&&(me=Se=null,Ee=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||qs||(qs=!0,om(Ro,function(){return Bi(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=gt.transition,gt.transition=null;var o=X;X=1;var a=K;K|=4,Eu.current=null,Dv(t,n),Qg(n,t),iv(ic),jo=!!nc,ic=nc=null,t.current=n,Iv(n),ly(),K=a,X=o,gt.transition=s}else t.current=n;if(qs&&(qs=!1,fn=t,Zo=r),s=t.pendingLanes,s===0&&(Sn=null),dy(n.stateNode),Qe(t,ge()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Xo)throw Xo=!1,t=kc,kc=null,t;return(Zo&1)!==0&&t.tag!==0&&Bi(),s=t.pendingLanes,(s&1)!==0?t===Sc?Br++:(Br=0,Sc=t):Br=0,jn(),null}function Bi(){if(fn!==null){var t=jp(Zo),e=gt.transition,n=X;try{if(gt.transition=null,X=16>t?16:t,fn===null)var i=!1;else{if(t=fn,fn=null,Zo=0,(K&6)!==0)throw Error(E(331));var r=K;for(K|=4,M=t.current;M!==null;){var s=M,o=s.child;if((M.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(M=c;M!==null;){var u=M;switch(u.tag){case 0:case 11:case 15:Nr(8,u,s)}var d=u.child;if(d!==null)d.return=u,M=d;else for(;M!==null;){u=M;var h=u.sibling,f=u.return;if(qg(u),u===c){M=null;break}if(h!==null){h.return=f,M=h;break}M=f}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}M=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,M=o;else e:for(;M!==null;){if(s=M,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Nr(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,M=p;break e}M=s.return}}var m=t.current;for(M=m;M!==null;){o=M;var v=o.child;if((o.subtreeFlags&2064)!==0&&v!==null)v.return=o,M=v;else e:for(o=m;M!==null;){if(a=M,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:ka(9,a)}}catch(b){fe(a,a.return,b)}if(a===o){M=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,M=_;break e}M=a.return}}if(K=r,jn(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(ga,t)}catch{}i=!0}return i}finally{X=n,gt.transition=e}}return!1}function hh(t,e,n){e=Zi(n,e),e=jg(t,e,1),t=kn(t,e,1),e=Fe(),t!==null&&(bs(t,1,e),Qe(t,e))}function fe(t,e,n){if(t.tag===3)hh(t,t,n);else for(;e!==null;){if(e.tag===3){hh(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Sn===null||!Sn.has(i))){t=Zi(n,t),t=$g(e,t,1),e=kn(e,t,1),t=Fe(),e!==null&&(bs(e,1,t),Qe(e,t));break}}e=e.return}}function $v(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Fe(),t.pingedLanes|=t.suspendedLanes&n,Se===t&&(Ee&n)===n&&(ve===4||ve===3&&(Ee&130023424)===Ee&&500>ge()-Tu?Xn(t,0):Ou|=n),Qe(t,e)}function rm(t,e){e===0&&((t.mode&1)===0?e=1:(e=$s,$s<<=1,($s&130023424)===0&&($s=4194304)));var n=Fe();t=Xt(t,e),t!==null&&(bs(t,e,n),Qe(t,n))}function Fv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rm(t,n)}function Nv(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(E(314))}i!==null&&i.delete(e),rm(t,n)}var sm;sm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Je.current)qe=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return qe=!1,Ev(t,e,n);qe=(t.flags&131072)!==0}else qe=!1,ae&&(e.flags&1048576)!==0&&cg(e,Ho,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;So(t,e),t=e.pendingProps;var r=Ji(e,Re.current);Ui(e,n),r=bu(null,e,i,t,r,n);var s=ku();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ge(i)?(s=!0,Bo(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,yu(e),r.updater=ba,e.stateNode=r,r._reactInternals=e,hc(e,i,t,n),e=gc(null,e,i,!0,s,n)):(e.tag=0,ae&&s&&uu(e),$e(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(So(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Bv(i),t=_t(i,t),r){case 0:e=pc(null,e,i,t,n);break e;case 1:e=nh(null,e,i,t,n);break e;case 11:e=eh(null,e,i,t,n);break e;case 14:e=th(null,e,i,_t(i.type,t),n);break e}throw Error(E(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_t(i,r),pc(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_t(i,r),nh(t,e,i,r,n);case 3:e:{if(Bg(e),t===null)throw Error(E(387));i=e.pendingProps,s=e.memoizedState,r=s.element,gg(t,e),Yo(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Zi(Error(E(423)),e),e=ih(t,e,i,n,r);break e}else if(i!==r){r=Zi(Error(E(424)),e),e=ih(t,e,i,n,r);break e}else for(tt=bn(e.stateNode.containerInfo.firstChild),it=e,ae=!0,kt=null,n=fg(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gi(),i===r){e=Zt(t,e,n);break e}$e(t,e,i,n)}e=e.child}return e;case 5:return mg(e),t===null&&cc(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,rc(i,r)?o=null:s!==null&&rc(i,s)&&(e.flags|=32),Ug(t,e),$e(t,e,o,n),e.child;case 6:return t===null&&cc(e),null;case 13:return Wg(t,e,n);case 4:return vu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Qi(e,null,i,n):$e(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_t(i,r),eh(t,e,i,r,n);case 7:return $e(t,e,e.pendingProps,n),e.child;case 8:return $e(t,e,e.pendingProps.children,n),e.child;case 12:return $e(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,re(Vo,i._currentValue),i._currentValue=o,s!==null)if(Et(s.value,o)){if(s.children===r.children&&!Je.current){e=Zt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Jt(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),uc(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),uc(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$e(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ui(e,n),r=yt(r),i=i(r),e.flags|=1,$e(t,e,i,n),e.child;case 14:return i=e.type,r=_t(i,e.pendingProps),r=_t(i.type,r),th(t,e,i,r,n);case 15:return Fg(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_t(i,r),So(t,e),e.tag=1,Ge(i)?(t=!0,Bo(e)):t=!1,Ui(e,n),zg(e,i,r),hc(e,i,r,n),gc(null,e,i,!0,t,n);case 19:return Hg(t,e,n);case 22:return Ng(t,e,n)}throw Error(E(156,e.tag))};function om(t,e){return Mp(t,e)}function Uv(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(t,e,n,i){return new Uv(t,e,n,i)}function Mu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bv(t){if(typeof t=="function")return Mu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xc)return 11;if(t===Zc)return 14}return 2}function Pn(t,e){var n=t.alternate;return n===null?(n=ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Eo(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Mu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Si:return Zn(n.children,r,s,e);case Qc:o=8,r|=8;break;case zl:return t=ft(12,n,e,r|2),t.elementType=zl,t.lanes=s,t;case jl:return t=ft(13,n,e,r),t.elementType=jl,t.lanes=s,t;case $l:return t=ft(19,n,e,r),t.elementType=$l,t.lanes=s,t;case mp:return Ca(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pp:o=10;break e;case gp:o=9;break e;case Xc:o=11;break e;case Zc:o=14;break e;case on:o=16,i=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=ft(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Zn(t,e,n,i){return t=ft(7,t,i,e),t.lanes=n,t}function Ca(t,e,n,i){return t=ft(22,t,i,e),t.elementType=mp,t.lanes=n,t.stateNode={isHidden:!1},t}function fl(t,e,n){return t=ft(6,t,null,e),t.lanes=n,t}function pl(t,e,n){return e=ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Wv(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Lu(t,e,n,i,r,s,o,a,l){return t=new Wv(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ft(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yu(s),t}function Hv(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ki,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function am(t){if(!t)return Dn;t=t._reactInternals;e:{if(hi(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ge(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Ge(n))return ag(t,n,e)}return e}function lm(t,e,n,i,r,s,o,a,l){return t=Lu(n,i,!0,t,r,s,o,a,l),t.context=am(null),n=t.current,i=Fe(),r=Cn(n),s=Jt(i,r),s.callback=e!=null?e:null,kn(n,s,r),t.current.lanes=r,bs(t,r,i),Qe(t,i),t}function Pa(t,e,n,i){var r=e.current,s=Fe(),o=Cn(r);return n=am(n),e.context===null?e.context=n:e.pendingContext=n,e=Jt(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=kn(r,e,o),t!==null&&(Pt(t,r,o,s),xo(t,r,o)),o}function ta(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ru(t,e){fh(t,e),(t=t.alternate)&&fh(t,e)}function Vv(){return null}var cm=typeof reportError=="function"?reportError:function(t){console.error(t)};function zu(t){this._internalRoot=t}Ea.prototype.render=zu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Pa(t,e,null,null)};Ea.prototype.unmount=zu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oi(function(){Pa(null,t,null,null)}),e[Qt]=null}};function Ea(t){this._internalRoot=t}Ea.prototype.unstable_scheduleHydration=function(t){if(t){var e=Np();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cn.length&&e!==0&&e<cn[n].priority;n++);cn.splice(n,0,t),n===0&&Bp(t)}};function ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ph(){}function Kv(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=ta(o);s.call(c)}}var o=lm(e,i,t,0,null,!1,!1,"",ph);return t._reactRootContainer=o,t[Qt]=o.current,rs(t.nodeType===8?t.parentNode:t),oi(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=ta(l);a.call(c)}}var l=Lu(t,0,!1,null,null,!1,!1,"",ph);return t._reactRootContainer=l,t[Qt]=l.current,rs(t.nodeType===8?t.parentNode:t),oi(function(){Pa(e,l,n,i)}),l}function Ta(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=ta(o);a.call(l)}}Pa(e,o,t,r)}else o=Kv(n,e,t,r,i);return ta(o)}$p=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Or(e.pendingLanes);n!==0&&(nu(e,n|1),Qe(e,ge()),(K&6)===0&&(er=ge()+500,jn()))}break;case 13:oi(function(){var i=Xt(t,1);if(i!==null){var r=Fe();Pt(i,t,1,r)}}),Ru(t,1)}};iu=function(t){if(t.tag===13){var e=Xt(t,134217728);if(e!==null){var n=Fe();Pt(e,t,134217728,n)}Ru(t,134217728)}};Fp=function(t){if(t.tag===13){var e=Cn(t),n=Xt(t,e);if(n!==null){var i=Fe();Pt(n,t,e,i)}Ru(t,e)}};Np=function(){return X};Up=function(t,e){var n=X;try{return X=t,e()}finally{X=n}};ql=function(t,e,n){switch(e){case"input":if(Ul(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wa(i);if(!r)throw Error(E(90));vp(i),Ul(i,r)}}}break;case"textarea":_p(t,n);break;case"select":e=n.value,e!=null&&ji(t,!!n.multiple,e,!1)}};Ep=Au;Op=oi;var Yv={usingClientEntryPoint:!1,Events:[Ss,Oi,wa,Cp,Pp,Au]},vr={findFiberByHostInstance:Jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qv={bundleType:vr.bundleType,version:vr.version,rendererPackageName:vr.rendererPackageName,rendererConfig:vr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:en.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dp(t),t===null?null:t.stateNode},findFiberByHostInstance:vr.findFiberByHostInstance||Vv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Js=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Js.isDisabled&&Js.supportsFiber)try{ga=Js.inject(qv),jt=Js}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yv;st.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ju(e))throw Error(E(200));return Hv(t,e,null,n)};st.createRoot=function(t,e){if(!ju(t))throw Error(E(299));var n=!1,i="",r=cm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Lu(t,1,!1,null,null,n,!1,i,r),t[Qt]=e.current,rs(t.nodeType===8?t.parentNode:t),new zu(e)};st.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Dp(e),t=t===null?null:t.stateNode,t};st.flushSync=function(t){return oi(t)};st.hydrate=function(t,e,n){if(!Oa(e))throw Error(E(200));return Ta(null,t,e,!0,n)};st.hydrateRoot=function(t,e,n){if(!ju(t))throw Error(E(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=cm;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lm(e,null,t,1,n!=null?n:null,r,!1,s,o),t[Qt]=e.current,rs(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ea(e)};st.render=function(t,e,n){if(!Oa(e))throw Error(E(200));return Ta(null,t,e,!1,n)};st.unmountComponentAtNode=function(t){if(!Oa(t))throw Error(E(40));return t._reactRootContainer?(oi(function(){Ta(null,null,t,!1,function(){t._reactRootContainer=null,t[Qt]=null})}),!0):!1};st.unstable_batchedUpdates=Au;st.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Oa(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Ta(t,e,n,!1,i)};st.version="18.3.1-next-f1338f8080-20240426";function um(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(um)}catch(t){console.error(t)}}um(),up.exports=st;var gh=up.exports;Ll.createRoot=gh.createRoot,Ll.hydrateRoot=gh.hydrateRoot;const Jv="f71910da-e7e2-4deb-b99f-cc00eeddb1d0",Gv=chrome.identity.getRedirectURL();async function Qv(){try{const{currentOrgId:t,organizationId:e}=await chrome.storage.local.get(["currentOrgId","organizationId"]),n=t||e;if(!n)throw new Error("Please navigate to your Dynamics CRM environment first.");const i=Xv(n);return new Promise((r,s)=>{chrome.identity.launchWebAuthFlow({url:i,interactive:!0},async o=>{var a;try{if(chrome.runtime.lastError||!o){s({success:!1,error:((a=chrome.runtime.lastError)==null?void 0:a.message)||"Authentication failed"});return}const l=new URL(o).hash.substring(1),c=new URLSearchParams(l),u=c.get("access_token"),d=c.get("expires_in");if(!u){s({success:!1,error:"No access token received"});return}const h=Date.now()+parseInt(d)*1e3,f=u.startsWith("Bearer ")?u:`Bearer ${u}`;r({success:!0,token:f,expirationTime:h,error:null})}catch(l){s({success:!1,error:l})}})})}catch(t){return console.error("Dynamics authentication error:",t),{success:!1,error:t}}}function Xv(t){const e=`https://${t}.crm.dynamics.com/.default`;return`https://login.microsoftonline.com/common/oauth2/v2.0/authorize?${new URLSearchParams({client_id:Jv,response_type:"token",response_mode:"fragment",redirect_uri:Gv,scope:e,prompt:"consent",state:Date.now().toString(),nonce:Math.random().toString(36).substring(2)}).toString()}`}async function Zv(t){try{const{currentOrgId:e,organizationId:n}=await chrome.storage.local.get(["currentOrgId","organizationId"]),i=e||n;if(!i)throw new Error("Organization ID not found");const r=`https://${i}.crm.dynamics.com/api/data/v9.2/WhoAmI`,s=await fetch(r,{headers:{Authorization:t,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(!s.ok)throw new Error(`Failed to fetch user info: ${s.status}`);const o=await s.json(),a=`https://${i}.crm.dynamics.com/api/data/v9.2/systemusers(${o.UserId})`,l=await fetch(a,{headers:{Authorization:t,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(!l.ok)return{id:o.UserId,email:"unknown@example.com",name:"Unknown User",organizationId:i};const c=await l.json();return{id:o.UserId,email:c.internalemailaddress||c.domainname||"unknown@example.com",name:`${c.firstname||""} ${c.lastname||""}`.trim()||"Unknown User",organizationId:i}}catch(e){console.error("Error fetching user info:",e);const n=await chrome.storage.local.get(["currentOrgId","organizationId"]).then(i=>i.currentOrgId||i.organizationId||"unknown");return{id:"unknown",email:"unknown@example.com",name:"Unknown User",organizationId:n}}}const Ec={loginWithDynamicsCrm:Qv,fetchUserInfo:Zv},e1="modulepreload",mh={},t1="/",tr=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${t1}${i}`,i in mh)return;mh[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":e1,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},n1=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...n)=>tr(()=>Promise.resolve().then(function(){return cr}),void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class $u extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class i1 extends $u{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class r1 extends $u{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class s1 extends $u{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Oc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Oc||(Oc={}));var o1=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class a1{constructor(e,{headers:n={},customFetch:i,region:r=Oc.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=n1(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return o1(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob!="undefined"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData!="undefined"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:c}).catch(g=>{throw new i1(g)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new r1(u);if(!u.ok)throw new s1(u);let h=((i=u.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(r){return{data:null,error:r}}})}}var Ve={},Fu={},Aa={},Ps={},Da={},Ia={},l1=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")},nr=l1();const c1=nr.fetch;var dm=nr.fetch.bind(nr);const hm=nr.Headers,u1=nr.Request,d1=nr.Response;var cr=Object.freeze(Object.defineProperty({__proto__:null,fetch:c1,default:dm,Headers:hm,Request:u1,Response:d1},Symbol.toStringTag,{value:"Module"})),h1=A0(cr),Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});class f1 extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}Ma.default=f1;var fm=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ia,"__esModule",{value:!0});const p1=fm(h1),g1=fm(Ma);class m1{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch=="undefined"?this.fetch=p1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,d=null,h=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const p=await s.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await s.text();try{c=JSON.parse(y),Array.isArray(c)&&s.status===404&&(u=[],c=null,h=200,f="OK")}catch{s.status===404&&y===""?(h=204,f="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&((l=c==null?void 0:c.details)===null||l===void 0?void 0:l.includes("0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw new g1.default(c)}return{error:c,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(r=r.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,n)}returns(){return this}overrideTypes(){return this}}Ia.default=m1;var y1=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Da,"__esModule",{value:!0});const v1=y1(Ia);class w1 extends v1.default{select(e){let n=!1;const i=(e!=null?e:"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:i,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i=="undefined"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,n,{foreignTable:i,referencedTable:r=i}={}){const s=typeof r=="undefined"?"offset":`${r}.offset`,o=typeof r=="undefined"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:i=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,i?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}Da.default=w1;var _1=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ps,"__esModule",{value:!0});const x1=_1(Da);class b1 extends x1.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const i=Array.from(new Set(n)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:i,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(e,n,i){return this.url.searchParams.append(e,`not.${n}.${i}`),this}or(e,{foreignTable:n,referencedTable:i=n}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,n,i){return this.url.searchParams.append(e,`${n}.${i}`),this}}Ps.default=b1;var k1=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Aa,"__esModule",{value:!0});const wr=k1(Ps);class S1{constructor(e,{headers:n={},schema:i,fetch:r}){this.url=e,this.headers=n,this.schema=i,this.fetch=r}select(e,{head:n=!1,count:i}={}){const r=n?"HEAD":"GET";let s=!1;const o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new wr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:i=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new wr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:i=!1,count:r,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new wr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new wr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new wr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}Aa.default=S1;var La={},Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.version=void 0;Ra.version="0.0.0-automated";Object.defineProperty(La,"__esModule",{value:!0});La.DEFAULT_HEADERS=void 0;const C1=Ra;La.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${C1.version}`};var pm=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fu,"__esModule",{value:!0});const P1=pm(Aa),E1=pm(Ps),O1=La;class Nu{constructor(e,{headers:n={},schema:i,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},O1.DEFAULT_HEADERS),n),this.schemaName=i,this.fetch=r}from(e){const n=new URL(`${this.url}/${e}`);return new P1.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Nu(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:r=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;i||r?(o=i?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new E1.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}Fu.default=Nu;var ur=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.PostgrestError=Ve.PostgrestBuilder=Ve.PostgrestTransformBuilder=Ve.PostgrestFilterBuilder=Ve.PostgrestQueryBuilder=Ve.PostgrestClient=void 0;const gm=ur(Fu);Ve.PostgrestClient=gm.default;const mm=ur(Aa);Ve.PostgrestQueryBuilder=mm.default;const ym=ur(Ps);Ve.PostgrestFilterBuilder=ym.default;const vm=ur(Da);Ve.PostgrestTransformBuilder=vm.default;const wm=ur(Ia);Ve.PostgrestBuilder=wm.default;const _m=ur(Ma);Ve.PostgrestError=_m.default;var T1=Ve.default={PostgrestClient:gm.default,PostgrestQueryBuilder:mm.default,PostgrestFilterBuilder:ym.default,PostgrestTransformBuilder:vm.default,PostgrestBuilder:wm.default,PostgrestError:_m.default};const{PostgrestClient:A1,PostgrestQueryBuilder:L2,PostgrestFilterBuilder:R2,PostgrestTransformBuilder:z2,PostgrestBuilder:j2,PostgrestError:$2}=T1,D1="2.11.2",I1={"X-Client-Info":`realtime-js/${D1}`},M1="1.0.0",xm=1e4,L1=1e3;var Wi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Wi||(Wi={}));var Xe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xe||(Xe={}));var bt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(bt||(bt={}));var Tc;(function(t){t.websocket="websocket"})(Tc||(Tc={}));var qn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(qn||(qn={}));class R1{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const r=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=i.decode(e.slice(o,o+r));o=o+r;const l=i.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(i.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class bm{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ne||(ne={}));const yh=(t,e,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((s,o)=>(s[o]=z1(o,t,e,r),s),{})},z1=(t,e,n,i)=>{const r=e.find(a=>a.name===t),s=r==null?void 0:r.type,o=n[t];return s&&!i.includes(s)?km(s,o):Ac(o)},km=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return N1(e,n)}switch(t){case ne.bool:return j1(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return $1(e);case ne.json:case ne.jsonb:return F1(e);case ne.timestamp:return U1(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return Ac(e);default:return Ac(e)}},Ac=t=>t,j1=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},$1=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},F1=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},N1=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>km(e,a))}return t},U1=t=>typeof t=="string"?t.replace(" ","T"):t,Sm=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class gl{constructor(e,n,i={},r=xm){this.channel=e,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(vh||(vh={}));class Wr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wr.syncState(this.state,r,s,o),this.pendingDiffs.forEach(l=>{this.state=Wr.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Wr.syncDiff(this.state,r,s,o),a())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,r){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const h=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),g=u.filter(w=>f.indexOf(w.presence_ref)<0),y=d.filter(w=>h.indexOf(w.presence_ref)<0);g.length>0&&(a[c]=g),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},i,r)}static syncDiff(e,n,i,r){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}i(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const r=e[i];return"metas"in r?n[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[i]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(wh||(wh={}));var _h;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_h||(_h={}));var Ht;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ht||(Ht={}));class Uu{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new gl(this,bt.join,this.params,this.timeout),this.rejoinTimer=new bm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bt.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new Wr(this),this.broadcastEndpointURL=Sm(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Ht.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ht.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(u=>u.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Ht.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,g=[];for(let y=0;y<f;y++){const w=h[y],{filter:{event:p,schema:m,table:v,filter:_}}=w,b=u&&u[y];if(b&&b.event===p&&b.schema===m&&b.table===v&&b.filter===_)g.push(Object.assign(Object.assign({},w),{id:b.id}));else{this.unsubscribe(),e==null||e(Ht.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Ht.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Ht.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ht.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this._on(e,n,i)}async send(e,n={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const r=new gl(this,bt.leave,{},e);r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,n,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(s),o}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new gl(this,e,n,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var r,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=bt;if(i&&[a,l,c,u].indexOf(o)>=0&&i!==this._joinRef())return;let h=this._onMessage(o,n,i);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var g,y,w;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((w=(y=f.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(h,i)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var g,y,w,p,m,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,b=(g=f.filter)===null||g===void 0?void 0:g.event;return _&&((y=n.ids)===null||y===void 0?void 0:y.includes(_))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(m=(p=f==null?void 0:f.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:y,table:w,commit_timestamp:p,type:m,errors:v}=g;h=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:p,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(g))}f.callback(h,i)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const r=e.toLocaleLowerCase(),s={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&Uu.isEqual(r.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(bt.close,{},e)}_onError(e){this._on(bt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=yh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=yh(e.columns,e.old_record)),n}}const B1=()=>{},W1=typeof WebSocket!="undefined",H1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class V1{constructor(e,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=I1,this.params={},this.timeout=xm,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=B1,this.conn=null,this.sendBuffer=[],this.serializer=new R1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch=="undefined"?o=(...a)=>tr(()=>Promise.resolve().then(function(){return cr}),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Tc.websocket}`,this.httpEndpoint=Sm(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(i=n==null?void 0:n.params)===null||i===void 0?void 0:i.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new bm(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(W1){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new K1(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),tr(()=>import("./browser.js").then(function(e){return e.b}),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:M1}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n!=null?n:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Wi.connecting:return qn.Connecting;case Wi.open:return qn.Open;case Wi.closing:return qn.Closing;default:return qn.Closed}}isConnected(){return this.connectionState()===qn.Open}channel(e,n={config:{}}){const i=new Uu(`realtime:${e}`,n,this);return this.channels.push(i),i}push(e){const{topic:n,event:i,payload:r,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${i} (${s})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let i=null;try{i=JSON.parse(atob(n.split(".")[1]))}catch{}if(i&&i.exp&&!(Math.floor(Date.now()/1e3)-i.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`);this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n}),r.joinedOnce&&r._isJoined()&&r._push(bt.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(L1,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:i,event:r,payload:s,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${r} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(r,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(bt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${i}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([H1],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class K1{constructor(e,n,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Wi.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}}class Bu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Y1 extends Bu{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Dc extends Bu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var q1=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const Cm=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...n)=>tr(()=>Promise.resolve().then(function(){return cr}),void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},J1=()=>q1(void 0,void 0,void 0,function*(){return typeof Response=="undefined"?(yield tr(()=>Promise.resolve().then(function(){return cr}),void 0)).Response:Response}),Ic=t=>{if(Array.isArray(t))return t.map(n=>Ic(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=Ic(i)}),e};var fi=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const ml=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),G1=(t,e,n)=>fi(void 0,void 0,void 0,function*(){const i=yield J1();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{e(new Y1(ml(r),t.status||500))}).catch(r=>{e(new Dc(ml(r),r))}):e(new Dc(ml(t),t))}),Q1=(t,e,n,i)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i&&(r.body=JSON.stringify(i)),Object.assign(Object.assign({},r),n))};function Es(t,e,n,i,r,s){return fi(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Q1(e,i,r,s)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>G1(l,a,i))})})}function na(t,e,n,i){return fi(this,void 0,void 0,function*(){return Es(t,"GET",e,n,i)})}function ln(t,e,n,i,r){return fi(this,void 0,void 0,function*(){return Es(t,"POST",e,i,r,n)})}function X1(t,e,n,i,r){return fi(this,void 0,void 0,function*(){return Es(t,"PUT",e,i,r,n)})}function Z1(t,e,n,i){return fi(this,void 0,void 0,function*(){return Es(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Pm(t,e,n,i,r){return fi(this,void 0,void 0,function*(){return Es(t,"DELETE",e,i,r,n)})}var Be=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const ew={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tw{constructor(e,n={},i,r){this.url=e,this.headers=n,this.bucketId=i,this.fetch=Cm(r)}uploadOrUpdate(e,n,i,r){return Be(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},xh),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob!="undefined"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",i)):typeof FormData!="undefined"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}upload(e,n,i){return Be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,r){return Be(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:xh.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob!="undefined"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData!="undefined"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(xe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Be(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const s=yield ln(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Bu("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}update(e,n,i){return Be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return Be(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}copy(e,n,i){return Be(this,void 0,void 0,function*(){try{return{data:{path:(yield ln(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,n,i){return Be(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield ln(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,i){return Be(this,void 0,void 0,function*(){try{const r=yield ln(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}download(e,n){return Be(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)!="undefined"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield na(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(xe(a))return{data:null,error:a};throw a}})}info(e){return Be(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield na(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ic(i),error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}exists(e){return Be(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Z1(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(xe(i)&&i instanceof Dc){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),r=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&r.push(s);const a=typeof(n==null?void 0:n.transform)!="undefined"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${c}`)}}}remove(e){return Be(this,void 0,void 0,function*(){try{return{data:yield Pm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}list(e,n,i){return Be(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},ew),n),{prefix:e||""});return{data:yield ln(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer!="undefined"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const nw="2.7.1",iw={"X-Client-Info":`storage-js/${nw}`};var yi=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class rw{constructor(e,n={},i){this.url=e,this.headers=Object.assign(Object.assign({},iw),n),this.fetch=Cm(i)}listBuckets(){return yi(this,void 0,void 0,function*(){try{return{data:yield na(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return yi(this,void 0,void 0,function*(){try{return{data:yield na(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return yi(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return yi(this,void 0,void 0,function*(){try{return{data:yield X1(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}emptyBucket(e){return yi(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return yi(this,void 0,void 0,function*(){try{return{data:yield Pm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}}class sw extends rw{constructor(e,n={},i){super(e,n,i)}from(e){return new tw(this.url,this.headers,e,this.fetch)}}const ow="2.49.4";let Ar="";typeof Deno!="undefined"?Ar="deno":typeof document!="undefined"?Ar="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?Ar="react-native":Ar="node";const aw={"X-Client-Info":`supabase-js-${Ar}/${ow}`},lw={headers:aw},cw={schema:"public"},uw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dw={};var hw=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const fw=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=dm:e=fetch,(...n)=>e(...n)},pw=()=>typeof Headers=="undefined"?hm:Headers,gw=(t,e,n)=>{const i=fw(n),r=pw();return(s,o)=>hw(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,Object.assign(Object.assign({},o),{headers:c}))})};var mw=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};function yw(t){return t.replace(/\/$/,"")}function vw(t,e){const{db:n,auth:i,realtime:r,global:s}=t,{db:o,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),i),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),s),accessToken:()=>mw(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const Em="2.69.1",xi=30*1e3,Mc=3,yl=Mc*xi,ww="http://localhost:9999",_w="supabase.auth.token",xw={"X-Client-Info":`gotrue-js/${Em}`},Lc="X-Supabase-Api-Version",Om={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kw=6e5;class Wu extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function N(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Sw extends Wu{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function Cw(t){return N(t)&&t.name==="AuthApiError"}class Tm extends Wu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class $n extends Wu{constructor(e,n,i,r){super(e,i,r),this.name=n,this.status=i}}class rn extends $n{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Pw(t){return N(t)&&t.name==="AuthSessionMissingError"}class vl extends $n{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gs extends $n{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qs extends $n{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ew(t){return N(t)&&t.name==="AuthImplicitGrantRedirectError"}class bh extends $n{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rc extends $n{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function wl(t){return N(t)&&t.name==="AuthRetryableFetchError"}class kh extends $n{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Hr extends $n{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ch=` 	
\r=`.split(""),Ow=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ch.length;e+=1)t[Ch[e].charCodeAt(0)]=-2;for(let e=0;e<Sh.length;e+=1)t[Sh[e].charCodeAt(0)]=e;return t})();function Am(t,e,n){const i=Ow[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ph(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=o=>{Dw(o,i,n)};for(let o=0;o<t.length;o+=1)Am(t.charCodeAt(o),r,s);return e.join("")}function Tw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Aw(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}Tw(i,e)}}function Dw(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Iw(t){const e=[],n={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Am(t.charCodeAt(r),n,i);return new Uint8Array(e)}function Mw(t){const e=[];return Aw(t,n=>e.push(n)),new Uint8Array(e)}function Lw(t){return Math.round(Date.now()/1e3)+t}function Rw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const At=()=>typeof window!="undefined"&&typeof document!="undefined",Fn={tested:!1,writable:!1},Vr=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fn.tested)return Fn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Fn.tested=!0,Fn.writable=!0}catch{Fn.tested=!0,Fn.writable=!1}return Fn.writable};function zw(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return n.searchParams.forEach((i,r)=>{e[r]=i}),e}const Dm=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...n)=>tr(()=>Promise.resolve().then(function(){return cr}),void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},jw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Im=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Xs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Zs=async(t,e)=>{await t.removeItem(e)};class za{constructor(){this.promise=new za.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}za.promiseConstructor=Promise;function _l(t){const e=t.split(".");if(e.length!==3)throw new Hr("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!bw.test(e[i]))throw new Hr("JWT not in base64url format");return{header:JSON.parse(Ph(e[0])),payload:JSON.parse(Ph(e[1])),signature:Iw(e[2]),raw:{header:e[0],payload:e[1]}}}async function $w(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Fw(t,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){r(o);return}}})()})}function Nw(t){return("0"+t.toString(16)).substr(-2)}function Uw(){const e=new Uint32Array(56);if(typeof crypto=="undefined"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let s=0;s<56;s++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,Nw).join("")}async function Bw(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function Ww(t){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Bw(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vi(t,e,n=!1){const i=Uw();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await Im(t,`${e}-code-verifier`,r);const s=await Ww(i);return[s,i===s?"plain":"s256"]}const Hw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vw(t){const e=t.headers.get(Lc);if(!e||!e.match(Hw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Kw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Yw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var qw=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};const Kn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Jw=[502,503,504];async function Eh(t){var e;if(!jw(t))throw new Rc(Kn(t),0);if(Jw.includes(t.status))throw new Rc(Kn(t),t.status);let n;try{n=await t.json()}catch(s){throw new Tm(Kn(s),s)}let i;const r=Vw(t);if(r&&r.getTime()>=Om["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new kh(Kn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new rn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new kh(Kn(n),t.status,n.weak_password.reasons);throw new Sw(Kn(n),t.status||500,i)}const Gw=(t,e,n,i)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function V(t,e,n,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[Lc]||(s[Lc]=Om["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const o=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Qw(t,e,n+a,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function Qw(t,e,n,i,r,s){const o=Gw(e,i,r,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Rc(Kn(l),0)}if(a.ok||await Eh(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await Eh(l)}}function sn(t){var e;let n=null;t_(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Lw(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function Oh(t){const e=sn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function dn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Xw(t){return{data:t,error:null}}function Zw(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s}=t,o=qw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function e_(t){return t}function t_(t){return t.access_token&&t.refresh_token&&t.expires_in}var n_=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};class i_{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=Dm(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await V(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await V(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:dn})}catch(i){if(N(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=n_(e,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await V(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Zw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(N(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await V(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:dn})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,r,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await V(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:e_});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);c[`${w}Page`]=y}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(N(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await V(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:dn})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await V(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:dn})}catch(i){if(N(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){try{return await V(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:dn})}catch(i){if(N(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){try{const{data:n,error:i}=await V(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(N(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await V(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}}}const r_={getItem:t=>Vr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{!Vr()||globalThis.localStorage.setItem(t,e)},removeItem:t=>{!Vr()||globalThis.localStorage.removeItem(t)}};function Th(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function s_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self!="undefined"&&(self.globalThis=self)}}const wi={debug:!!(globalThis&&Vr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class o_ extends Mm{}async function a_(t,e,n){wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),wi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new o_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wi.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}s_();const l_={url:ww,storageKey:_w,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ah(t,e,n){return await n()}class fs{constructor(e){var n,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fs.nextInstanceID,fs.nextInstanceID+=1,this.instanceID>0&&At()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},l_),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new i_({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Dm(r.fetch),this.lock=r.lock||Ah,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:At()&&((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0?void 0:n.locks)?this.lock=a_:this.lock=Ah,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Vr()?this.storage=r_:(this.memoryStorage={},this.storage=Th(this.memoryStorage)):(this.memoryStorage={},this.storage=Th(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Em}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=zw(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),At()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(n,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Ew(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return N(n)?{error:n}:{error:new Tm("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,r;try{const s=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:sn}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(N(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,i,r;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await vi(this.storage,this.storageKey)),s=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},xform:sn})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},channel:(r=h==null?void 0:h.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:sn})}else throw new Gs("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(N(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Oh})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Oh})}else throw new Gs("You must provide either an email or phone number and a password");const{data:i,error:r}=n;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new vl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Xs(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n!=null?n:"").split("/");try{const{data:s,error:o}=await V(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:sn});if(await Zs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new vl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:r!=null?r:null}),error:o})}catch(s){if(N(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:i,token:r,access_token:s,nonce:o}=e,a=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:sn}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new vl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,r,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await vi(this.storage,this.storageKey));const{error:d}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Gs("You must provide either an email or phone number.")}catch(a){if(N(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,i;try{let r,s;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:a}=await V(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:sn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(N(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var n,i,r;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await vi(this.storage,this.storageKey)),await V(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Xw})}catch(s){if(N(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new rn;const{error:r}=await V(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(N(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:s}=e,{error:o}=await V(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:o,error:a}=await V(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Gs("You must provide either an email or phone number and a type")}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<yl:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:dn}):await this._useSession(async n=>{var i,r,s;const{data:o,error:a}=n;if(a)throw a;return!(!((i=o.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rn}:await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:dn})})}catch(n){if(N(n))return Pw(n)&&(await this._removeSession(),await Zs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new rn;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await vi(this.storage,this.storageKey));const{data:c,error:u}=await V(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:dn});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(i){if(N(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rn;const n=Date.now()/1e3;let i=n,r=!0,s=null;const{payload:o}=_l(e.access_token);if(o.exp&&(i=o.exp,r=i<=n),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(N(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(i=o.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new rn;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!At())throw new Qs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new bh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qs("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bh("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Qs("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=xi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const g=h-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:y,error:w}=await this._getUser(s);if(w)throw w;const p={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(i){if(N(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Xs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return{error:s};const o=(i=r.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Cw(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Zs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Rw(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,r;try{const{data:{session:s},error:o}=n;if(o)throw o;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await vi(this.storage,this.storageKey,!0));try{return await V(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(N(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:r}=await this._useSession(async s=>{var o,a,l,c,u;const{data:d,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await V(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return At()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(N(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,r;const{data:s,error:o}=n;if(o)throw o;return await V(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await Fw(async r=>(r>0&&await $w(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await V(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:sn})),(r,s)=>{const o=200*Math.pow(2,r);return s&&wl(s)&&Date.now()+o-i<xi})}catch(i){if(this._debug(n,"error",i),N(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),At()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Xs(this.storage,this.storageKey);if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<yl;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${yl}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),wl(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new za;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new rn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(r,"error",s),N(s)){const o={session:null,error:s};return wl(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Im(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Zs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&At()&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/xi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${xi}ms, refresh threshold is ${Mc} ticks`),r<=Mc&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Mm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,o]=await vi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?{data:null,error:s}:await V(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await V(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&((r=l==null?void 0:l.totp)===null||r===void 0?void 0:r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await V(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(N(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?{data:null,error:s}:await V(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(N(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(e==null?void 0:e.factors)||[],r=i.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=i.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:i,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=_l(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((i=(n=r.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(o=>o.kid===e);if(i||(i=this.jwks.keys.find(o=>o.kid===e),i&&this.jwks_cached_at+kw>Date.now()))return i;const{data:r,error:s}=await V(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!r.keys||r.keys.length===0)throw new Hr("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),i=r.keys.find(o=>o.kid===e),!i)throw new Hr("No matching signing key found in JWKS");return i}async getClaims(e,n={keys:[]}){try{let i=e;if(!i){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};i=f.session.access_token}const{header:r,payload:s,signature:o,raw:{header:a,payload:l}}=_l(i);if(Kw(s.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(i);if(f)throw f;return{data:{claims:s,header:r,signature:o},error:null}}const c=Yw(r.alg),u=await this.fetchJwk(r.kid,n),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,Mw(`${a}.${l}`)))throw new Hr("Invalid JWT signature");return{data:{claims:s,header:r,signature:o},error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}}}fs.nextInstanceID=0;const c_=fs;class u_ extends c_{constructor(e){super(e)}}var d_=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class h_{constructor(e,n,i){var r,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=yw(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:cw,realtime:dw,auth:Object.assign(Object.assign({},uw),{storageKey:l}),global:lw},u=vw(i!=null?i:{},c);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=gw(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new A1(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new a1(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new sw(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return d_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:r,storageKey:s,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new u_({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:r,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new V1(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const f_=(t,e,n)=>new h_(t,e,n),p_="https://izeyvfbioqdftncourod.supabase.co",g_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6ZXl2ZmJpb3FkZnRuY291cm9kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQyMjExMDksImV4cCI6MjA1OTc5NzEwOX0.qtPLzjqY-o6pIFcodsv2ZVfUQTkWnDUVjrbTg4pKlfQ",m_={auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1},global:{headers:{"Content-Type":"application/json",Accept:"application/json"}}},In=f_(p_,g_,m_);async function y_(){try{const{error:t}=await In.from("users").select("id",{count:"exact",head:!0}).limit(1);return{connected:!t,error:t}}catch(t){return console.error("Supabase connection error:",t),{connected:!1,error:t}}}async function v_(t){try{if(!t.email||t.email==="unknown@example.com")throw new Error("Valid email required for Supabase sync");const e=t.email.split("@")[1]||"unknown.com",n=t.organizationId||`org_${e.replace(/\./g,"_")}`;await w_(n,e);const{data:i}=await In.from("users").select("id, login_count, subscription_status").eq("email",t.email).single(),r=!i,s=(i==null?void 0:i.login_count)||0,o={email:t.email,name:t.name||"Unknown User",organization_id:n,last_login:new Date,login_count:s+1,extension_version:"1.0.0",dynamics_user_id:t.id||"unknown"};r&&(o.subscription_status="free",o.first_login=new Date);const{error:a}=await In.from("users").upsert(o,{onConflict:"email"});if(a)throw a;return{success:!0}}catch(e){return console.error("Error syncing with Supabase:",e),{success:!1,error:e}}}async function w_(t,e){const{error:n}=await In.from("organizations").upsert({id:t,name:e.split(".")[0]||"Unknown Org",domain:e,last_active:new Date},{onConflict:"id"});n&&console.error("Error updating organization:",n)}async function __(){return In.auth.signOut()}const Lm={syncUserWithSupabase:v_,signOut:__};async function x_(t){try{if(console.log("Checking subscription status for:",t),!t)return console.error("Email is required for subscription check"),xl();const{manualSubscription:e}=await chrome.storage.local.get(["manualSubscription"]);if(e&&e.email===t)return console.log("Using manual subscription override:",e.status),e;const{data:n,error:i}=await In.from("users").select("subscription_status, subscription_end_date, organization_id").eq("email",t).single();if(i)return console.error("Error fetching user subscription data:",i),xl();const r=bi(n.subscription_status),{data:s}=await In.from("organizations").select("subscription_status, subscription_end_date, subscription_seats").eq("id",n.organization_id).single(),o=b_(n,s);return console.log("Effective subscription:",o),o}catch(e){return console.error("Error getting subscription status:",e),xl()}}function bi(t){return{active:"pro",cancelled:"free",trialing:"pro"}[t]||t||"free"}function b_(t,e){if(!e)return{status:bi(t.subscription_status),endDate:t.subscription_end_date||null,isActive:!t.subscription_end_date||new Date(t.subscription_end_date)>new Date,isOrgSubscription:!1,organizationId:t.organization_id};const n=["free","basic","pro","enterprise"],i=n.indexOf(bi(t.subscription_status)),r=n.indexOf(bi(e.subscription_status));return r>i&&r>=0?{status:bi(e.subscription_status),endDate:e.subscription_end_date||null,isActive:!e.subscription_end_date||new Date(e.subscription_end_date)>new Date,isOrgSubscription:!0,organizationId:t.organization_id,orgSeats:e.subscription_seats||0}:{status:bi(t.subscription_status),endDate:t.subscription_end_date||null,isActive:!t.subscription_end_date||new Date(t.subscription_end_date)>new Date,isOrgSubscription:!1,organizationId:t.organization_id}}async function k_(t,e){try{if(!t)throw new Error("Email is required for manual subscription");if(!["free","basic","pro","enterprise"].includes(e))throw new Error("Invalid subscription status");const n={email:t,status:e,endDate:e==="free"?null:new Date(Date.now()+30*24*60*60*1e3).toISOString(),isActive:!0,isManual:!0};return await chrome.storage.local.set({manualSubscription:n}),{success:!0,subscription:n}}catch(n){return console.error("Error setting manual subscription:",n),{success:!1,error:n}}}function xl(){return{status:"free",endDate:null,isActive:!0,isOrgSubscription:!1}}const S_={getSubscriptionStatus:x_,setManualSubscription:k_};async function C_(){try{const t=await Ec.loginWithDynamicsCrm();if(!t.success)return{success:!1,error:t.error};const e=await Ec.fetchUserInfo(t.token);try{await Lm.syncUserWithSupabase(e)}catch(i){console.warn("Supabase sync failed, continuing with Dynamics auth only:",i)}const n=await S_.getSubscriptionStatus(e.email);return await O_(t,e,n),{success:!0,token:t.token,user:e,subscription:n,error:null}}catch(t){return console.error("Login error:",t),{success:!1,error:t.message}}}async function Dh(){try{const{accessToken:t,expirationTime:e}=await chrome.storage.local.get(["accessToken","expirationTime"]);return t&&e&&Date.now()<e}catch(t){return console.error("Login check error:",t),!1}}async function P_(){try{const{user:t}=await chrome.storage.local.get(["user"]);if(t&&t.email)return t;const e=await E_();if(e){const n=await Ec.fetchUserInfo(e);return await chrome.storage.local.set({user:n}),n}return null}catch(t){return console.error("Error getting current user:",t),null}}async function Ih(t={}){try{await Lm.signOut(),await chrome.storage.local.remove(["accessToken","rawAccessToken","expirationTime","tokenType","user","subscription","currentOpportunityId","lastUpdated","supabaseSession"]);for(const e in t)typeof t[e]=="function"&&t[e](null);return{success:!0,message:"Logged out successfully"}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}}async function E_(){try{const{accessToken:t,expirationTime:e}=await chrome.storage.local.get(["accessToken","expirationTime"]);return!t||Date.now()>e?null:t}catch(t){return console.error("Error getting access token:",t),null}}async function O_(t,e,n){await chrome.storage.local.set({accessToken:t.token,expirationTime:t.expirationTime,user:e,subscription:n})}let eo=null;const T_=t=>{if(!t)return"Token is null or undefined";const e=t.startsWith("Bearer "),n=t.length,i=t.substring(0,Math.min(30,n));return{format:e?"Has 'Bearer' prefix":"Missing 'Bearer' prefix",length:n,preview:i+"...",isJWT:t.includes(".")&&t.split(".").length===3}},Hi=async()=>{try{const{currentOrgId:t,organizationId:e}=await chrome.storage.local.get(["currentOrgId","organizationId"]);if(t||e){const r=t||e;return console.log("[OppUtil] Found organization ID in storage:",r),r}const i=(await chrome.tabs.query({active:!0,currentWindow:!0}))[0];if((i==null?void 0:i.url)&&i.url.includes("crm.dynamics.com"))try{const r=await new Promise((s,o)=>{try{chrome.tabs.sendMessage(i.id,{type:"GET_ORGANIZATION_ID"},a=>{if(chrome.runtime.lastError){console.warn("Error sending message:",chrome.runtime.lastError),o(chrome.runtime.lastError);return}s(a)})}catch(a){o(a)}});if(r!=null&&r.organizationId)return chrome.storage.local.set({currentOrgId:r.organizationId,organizationId:r.organizationId,lastOrgIdUpdated:Date.now()}),r.organizationId}catch(r){if(console.warn("Could not communicate with content script:",r),i.url){const s=i.url.match(/https:\/\/([^.]+)\.crm\.dynamics\.com/i);if(s&&s[1]){const o=s[1];return chrome.storage.local.set({currentOrgId:o,organizationId:o,lastOrgIdUpdated:Date.now()}),o}}}return null}catch(t){return console.error("Error getting organization ID:",t),null}},ir=async()=>{if(eo)return eo;const t=await Hi();return t?(eo=`https://${t}.crm.dynamics.com/api/data/v9.2`,eo):(console.error("Cannot create base URL: No organization ID available"),null)},Rm=async t=>{try{const e=await ir();if(!e)return console.error("[OppUtil][getCurrentUserId] Cannot determine API base URL - organization ID not found"),null;let n=t;t.startsWith("Bearer ")||(n=`Bearer ${t}`),console.log(`[OppUtil][getCurrentUserId] Fetching current user with WhoAmI endpoint: ${e}/WhoAmI`),console.log(`[OppUtil][getCurrentUserId] Using token format: ${n.substring(0,20)}...`),console.log("[OppUtil][getCurrentUserId] Token debug info:",T_(t));const i=await fetch(`${e}/WhoAmI`,{method:"GET",headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0","Content-Type":"application/json"}});if(console.log(`[OppUtil][getCurrentUserId] WhoAmI URL used: ${e}/WhoAmI`),console.log(`[OppUtil][getCurrentUserId] WhoAmI response status: ${i.status} token: ${t}`),console.log("[OppUtil][getCurrentUserId] Token at WhoAmI call:",t==null?void 0:t.substring(0,30)),!i.ok){const o=await i.text();if(console.error(`[OppUtil][getCurrentUserId] Failed to fetch current user: ${i.status} - ${o}`),i.status===401)throw new Error("[OppUtil][getCurrentUserId] Authentication failed. Please log in again.");return null}const r=await i.json();if(console.log("[OppUtil][getCurrentUserId] WhoAmI response data:",JSON.stringify(r,null,2)),r.UserId)return console.log(`[OppUtil][getCurrentUserId] Found UserId: ${r.UserId}`),r.UserId;if(r.value&&r.value.UserId)return console.log(`[OppUtil][getCurrentUserId] Found UserId in value property: ${r.value.UserId}`),r.value.UserId;const s=["userId","userid","user_id","id"];for(const o of s)if(r[o])return console.log(`[OppUtil][getCurrentUserId] Found user ID in property ${o}: ${r[o]}`),r[o];throw console.error(`[OppUtil][getCurrentUserId] No user ID found in response: ${JSON.stringify(r)}`),new Error("[OppUtil][getCurrentUserId] User ID not found in response. Please check the Dynamics CRM configuration.")}catch(e){throw console.error("[OppUtil][getCurrentUserId] Error fetching current user:",e),new Error(`[OppUtil][getCurrentUserId] Error fetching current user: ${e.message}`)}},A_=async()=>{try{const t=await chrome.storage.local.get(["currentOpportunityId"]);if(t.currentOpportunityId)return console.log("[OppUtil] Found opportunity ID in storage:",t.currentOpportunityId),t.currentOpportunityId;const n=(await chrome.tabs.query({active:!0,currentWindow:!0}))[0];return(n==null?void 0:n.url)&&n.url.includes("crm.dynamics.com")?new Promise((i,r)=>{try{chrome.tabs.sendMessage(n.id,{type:"CHECK_OPPORTUNITY_ID"},s=>{if(chrome.runtime.lastError){console.warn("Error sending message:",chrome.runtime.lastError),i(null);return}console.log("[OppUtil] Content script response:",s),i((s==null?void 0:s.opportunityId)||null)})}catch(s){console.error("Message sending error:",s),i(null)}}):null}catch(t){return console.error("Error getting opportunity ID:",t),null}},D_=async(t,e)=>{var r;console.log(`[OppUtil] Attempting to fetch activities for opportunity: ${e}`);const n=await ir();if(!n)return console.error("Cannot fetch activities: Organization ID not found"),[];const i=`${n}/activitypointers?$filter=_regardingobjectid_value eq '${e}'&$select=activityid,subject,activitytypecode,actualstart,actualend,createdon,scheduledstart`;console.log("[OppUtil] FETCHING ACTIVITIES FROM:",i);try{const s=await fetch(i,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(console.log(`[OppUtil] Activities API response status: ${s.status}`),s.status===401)return console.warn("Authentication token expired or invalid when fetching activities"),[];if(!s.ok){const a=await s.text();throw new Error(`Failed to fetch activities: ${s.status} - ${a}`)}const o=await s.json();return console.log(`[OppUtil] Received ${((r=o.value)==null?void 0:r.length)||0} activities`),o.value||[]}catch(s){return console.error("Error fetching activities:",s),[]}},I_=async(t,e,n,i,r,s)=>{if(!!e)try{n(!0),i(null),console.log(`[OppUtil][fetchOpportunityDetails] Attempting to fetch opportunity details for ID: ${e}`);const o=await ir();if(!o)throw new Error("Cannot fetch opportunity details: Organization ID not found. Please navigate to Dynamics CRM first.");const a=[`${o}/opportunities(${e})`,`${o}/opportunities(guid'${e}')`,`${o}/opportunities?$filter=opportunityid eq ${e}`,`${o}/opportunities?$filter=opportunityid eq guid'${e}'`];let l=null,c=null,u=!1;for(const f of a){console.log(`[OppUtil][fetchOpportunityDetails] Trying URL format: ${f}`);try{const g=await fetch(f,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0","Content-Type":"application/json"}});if(console.log(`[OppUtil][fetchOpportunityDetails] Response status for ${f}: ${g.status}`),g.status===401){u=!0,l={status:401,url:f,text:"Authentication failed"};break}if(g.ok){c=g;break}l={status:g.status,url:f,text:await g.text()}}catch(g){console.log(`[OppUtil][fetchOpportunityDetails] Error with format ${f}: ${g.message}`),l={message:g.message,url:f}}}if(u)throw new Error("[OppUtil][fetchOpportunityDetails] Authentication failed. Please log in again.");if(!c)throw console.error("[OppUtil][fetchOpportunityDetails] All URL formats failed:",l),new Error(`[OppUtil][fetchOpportunityDetails] Failed to fetch opportunity details: ${l.status||"API Error"}`);const d=await c.json();console.log("[OppUtil][fetchOpportunityDetails] Opportunity data received:",d),d.value&&Array.isArray(d.value)&&d.value.length>0?r(d.value[0]):r(d);const h=await D_(t,e);s(h),console.log("[OppUtil][fetchOpportunityDetails] Activities data received:",h)}catch(o){console.error("[OppUtil][fetchOpportunityDetails] Error fetching opportunity details:",o),i(`[OppUtil][fetchOpportunityDetails] Failed to fetch opportunity details: ${o.message}`)}finally{n(!1)}},Mh=async(t,e,n,i,r)=>{var s;try{e(!0),n(null);const o=await ir();if(!o)throw new Error("[OppUtil][fetchOpportunitiesWithActivities] Cannot fetch opportunities: Organization ID not found. Please navigate to Dynamics CRM first.");const a=await Rm(t);if(!a)throw new Error("[OppUtil][fetchOpportunitiesWithActivities] Could not determine current user ID");const l=`${o}/opportunities?$filter=statecode eq 0 and _ownerid_value eq ${a}&$select=name,opportunityid,_customerid_value,createdon,statecode,estimatedvalue,estimatedclosedate,actualclosedate&$expand=customerid_account($select=name)`;console.log(`\u2705 [OppUtil][fetchOpportunitiesWithActivities] Fetching opportunities list from ${l}`);const c=await fetch(l,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(console.log(`[OppUtil][fetchOpportunitiesWithActivities] Response status: ${c.status}`),console.log(`[OppUtil][fetchOpportunitiesWithActivities] Token used: ${t}`),c.status===401)throw console.warn("[OppUtil][fetchOpportunitiesWithActivities] Status 401: Authentication token expired or invalid."),new Error("[OppUtil][fetchOpportunitiesWithActivities] Status 401: Authentication failed. Please log in again.");if(!c.ok){let h="";try{const f=await c.json();h=JSON.stringify(f)}catch{h=await c.text()}throw console.error(`[OppUtil][fetchOpportunitiesWithActivities] API Error: ${c.status}`,h),new Error(`[OppUtil][fetchOpportunitiesWithActivities] Failed to fetch data: ${c.status} - ${h}`)}const u=await c.json();console.log(`[OppUtil][fetchOpportunitiesWithActivities] Received ${((s=u.value)==null?void 0:s.length)||0} opportunities`);const d=await Promise.all((u.value||[]).map(async(h,f)=>{try{const g=h.opportunityid;if(!g)return console.warn(`[OppUtil][fetchOpportunitiesWithActivities] Skipping opportunity at index ${f} without ID`,h),{...h,opportunities_list_index:f,activities:[],lastActivity:null};const w=`${await ir()}/activitypointers?$filter=_regardingobjectid_value eq ${g}&$select=activityid,subject,activitytypecode,scheduledstart,actualstart,createdon&$orderby=createdon desc`,p=await fetch(w,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});let m=[];return p.ok&&(m=(await p.json()).value||[]),{...h,opportunities_list_index:f,activities:m,lastActivity:m.length>0?m[0].createdon:null}}catch(g){return console.error(`[OppUtil][fetchOpportunitiesWithActivities] Error processing opportunity at index ${f}:`,g),{...h,opportunities_list_index:f,activities:[],lastActivity:null}}}));i(d)}catch(o){console.error("[OppUtil][fetchOpportunitiesWithActivities] Error fetching opportunities:",o),n(`[OppUtil][fetchOpportunitiesWithActivities] Failed to fetch opportunities list: ${o.message}`),r&&r({errorType:"[OppUtil][fetchOpportunitiesWithActivities] Opportunities List Error",message:o.message,timestamp:new Date().toISOString()})}finally{e(!1)}},M_=async(t,e,n,i)=>{var r;try{e&&e(!0),n&&n(null);const s=await ir();if(!s)throw new Error("[OppUtil][fetchClosedOpportunities] Cannot fetch closed opportunities: Organization ID not found. Please navigate to Dynamics CRM first.");const o=await Rm(t);if(!o)throw new Error("[OppUtil][fetchClosedOpportunities] Could not determine current user ID");const a=`${s}/opportunities?$filter=statecode ne 0 and _ownerid_value eq ${o}&$select=name,statecode,opportunityid,totalamount,actualclosedate,totaldiscountamount,exchangerate,createdon&$orderby=actualclosedate desc`;console.log("[OppUtil][fetchClosedOpportunities] Fetching closed opportunities..."),console.log("[OppUtil][fetchClosedOpportunities] closed opportunity URL:",a);const l=await fetch(a,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(l.status===401)throw console.warn("[OppUtil][fetchClosedOpportunities] Authentication token expired or invalid"),new Error("[OppUtil][fetchClosedOpportunities] Authentication failed. Please log in again.");if(!l.ok){let d="";try{const h=await l.json();d=JSON.stringify(h)}catch{d=await l.text()}throw console.error(`[OppUtil][fetchClosedOpportunities] API Error: ${l.status}`,d),new Error(`[OppUtil][fetchClosedOpportunities] Failed to fetch closed opportunities: ${l.status} - ${d}`)}const c=await l.json();console.log(`[OppUtil][fetchClosedOpportunities] Received ${((r=c.value)==null?void 0:r.length)||0} closed opportunities`);const u=(c.value||[]).filter(d=>d.actualclosedate&&d.createdon);return i&&i(u),u}catch(s){return console.error("[OppUtil][fetchClosedOpportunities] Error fetching closed opportunities:",s),n&&n(`[OppUtil][fetchClosedOpportunities] Failed to fetch closed opportunities: ${s.message}`),[]}finally{e&&e(!1)}},Vi=async t=>{if(!t)return"";const e=await Hi();return e?`https://${e}.crm.dynamics.com/main.aspx?appid=e82f31a2-d4e4-ef11-9341-6045bd0438e7&pagetype=entityrecord&etn=opportunity&id=${t}`:(console.error("[OppUtil][fetchClosedOpportunities] Cannot generate opportunity URL: Organization ID not found"),"")};var ja={exports:{}},$a={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_=L.exports,R_=Symbol.for("react.element"),z_=Symbol.for("react.fragment"),j_=Object.prototype.hasOwnProperty,$_=L_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F_={key:!0,ref:!0,__self:!0,__source:!0};function zm(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)j_.call(e,i)&&!F_.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:R_,type:t,key:s,ref:o,props:r,_owner:$_.current}}$a.Fragment=z_;$a.jsx=zm;$a.jsxs=zm;ja.exports=$a;const x=ja.exports.jsx,S=ja.exports.jsxs,zc=ja.exports.Fragment,N_=({message:t,onDismiss:e})=>t?S("div",{style:{padding:"8px",backgroundColor:"#ededed",color:"#c62828",borderRadius:"4px",margin:"8px",position:"relative"},children:[x("button",{onClick:e,style:{position:"absolute",top:"2px",right:"2px",background:"none",border:"none",fontSize:"16px",cursor:"pointer",color:"#c62828"},children:"\xD7"}),S("div",{style:{marginBottom:"4px"},children:[x("strong",{children:"Error:"})," ",t]})]}):null;var jm={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Lh=vn.createContext&&vn.createContext(jm),U_=["attr","size","title"];function B_(t,e){if(t==null)return{};var n=W_(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(n[i]=t[i]))}return n}function W_(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function ia(){return ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ia.apply(this,arguments)}function Rh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ra(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rh(Object(n),!0).forEach(function(i){H_(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rh(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function H_(t,e,n){return e=V_(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V_(t){var e=K_(t,"string");return typeof e=="symbol"?e:e+""}function K_(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $m(t){return t&&t.map((e,n)=>vn.createElement(e.tag,ra({key:n},e.attr),$m(e.child)))}function je(t){return e=>vn.createElement(Y_,ia({attr:ra({},t.attr)},e),$m(t.child))}function Y_(t){var e=n=>{var{attr:i,size:r,title:s}=t,o=B_(t,U_),a=r||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),vn.createElement("svg",ia({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:l,style:ra(ra({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&vn.createElement("title",null,s),t.children)};return Lh!==void 0?vn.createElement(Lh.Consumer,null,n=>e(n)):e(jm)}function q_(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M212.24,100.24l-80,80a6,6,0,0,1-8.48,0l-80-80a6,6,0,0,1,8.48-8.48L128,167.51l75.76-75.75a6,6,0,0,1,8.48,8.48Z"},child:[]}]})(t)}function J_(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M180.24,132.24l-80,80a6,6,0,0,1-8.48-8.48L167.51,128,91.76,52.24a6,6,0,0,1,8.48-8.48l80,80A6,6,0,0,1,180.24,132.24Z"},child:[]}]})(t)}function zh(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},child:[]}]})(t)}function G_(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M208,152h16a8,8,0,0,0,0-16H208V120h16a8,8,0,0,0,0-16H207.6a79.76,79.76,0,0,0-21.44-46.85l19.5-19.49a8,8,0,0,0-11.32-11.32l-20.29,20.3a79.74,79.74,0,0,0-92.1,0L61.66,26.34A8,8,0,0,0,50.34,37.66l19.5,19.49A79.76,79.76,0,0,0,48.4,104H32a8,8,0,0,0,0,16H48v16H32a8,8,0,0,0,0,16H48v8c0,2.7.14,5.37.4,8H32a8,8,0,0,0,0,16H51.68a80,80,0,0,0,152.64,0H224a8,8,0,0,0,0-16H207.6c.26-2.63.4-5.3.4-8ZM128,48a64.07,64.07,0,0,1,63.48,56h-127A64.07,64.07,0,0,1,128,48Zm8,175.48V144a8,8,0,0,0-16,0v79.48A64.07,64.07,0,0,1,64,160V120H192v40A64.07,64.07,0,0,1,136,223.48Z"},child:[]}]})(t)}function Q_(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-68-76a12,12,0,1,1-12-12A12,12,0,0,1,140,132Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,184,132ZM96,172a12,12,0,1,1-12-12A12,12,0,0,1,96,172Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,140,172Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,184,172Z"},child:[]}]})(t)}function X_(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM208,208V48H48V208H208Z"},child:[]}]})(t)}function Z_(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"},child:[]}]})(t)}function ex(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M219.31,108.68l-80-80a16,16,0,0,0-22.62,0l-80,80A15.87,15.87,0,0,0,32,120v96a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V160h32v56a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V120A15.87,15.87,0,0,0,219.31,108.68ZM208,208H160V152a8,8,0,0,0-8-8H104a8,8,0,0,0-8,8v56H48V120l80-80,80,80Z"},child:[]}]})(t)}function tx(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"},child:[]}]})(t)}function nx(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M174.63,81.37a80,80,0,1,0-93.26,93.26,80,80,0,1,0,93.26-93.26ZM100.69,136,120,155.31A63.48,63.48,0,0,1,96,160,63.48,63.48,0,0,1,100.69,136Zm33.75,11.13-25.57-25.57a64.65,64.65,0,0,1,12.69-12.69l25.57,25.57A64.65,64.65,0,0,1,134.44,147.13ZM155.31,120,136,100.69A63.48,63.48,0,0,1,160,96,63.48,63.48,0,0,1,155.31,120ZM32,96a64,64,0,0,1,126-16A80.08,80.08,0,0,0,80.05,158,64.11,64.11,0,0,1,32,96ZM160,224A64.11,64.11,0,0,1,98,176,80.08,80.08,0,0,0,176,98,64,64,0,0,1,160,224Z"},child:[]}]})(t)}function ix(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,128a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,128ZM40,72H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16ZM216,184H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"},child:[]}]})(t)}function jh(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},child:[]}]})(t)}function rx(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M144.27,45.93a8,8,0,0,1,9.8-5.66,86.22,86.22,0,0,1,61.66,61.66,8,8,0,0,1-5.66,9.8A8.23,8.23,0,0,1,208,112a8,8,0,0,1-7.73-5.94,70.35,70.35,0,0,0-50.33-50.33A8,8,0,0,1,144.27,45.93Zm-2.33,41.8c13.79,3.68,22.65,12.54,26.33,26.33A8,8,0,0,0,176,120a8.23,8.23,0,0,0,2.07-.27,8,8,0,0,0,5.66-9.8c-5.12-19.16-18.5-32.54-37.66-37.66a8,8,0,1,0-4.13,15.46Zm81.94,95.35A56.26,56.26,0,0,1,168,232C88.6,232,24,167.4,24,88A56.26,56.26,0,0,1,72.92,32.12a16,16,0,0,1,16.62,9.52l21.12,47.15,0,.12A16,16,0,0,1,109.39,104c-.18.27-.37.52-.57.77L88,129.45c7.49,15.22,23.41,31,38.83,38.51l24.34-20.71a8.12,8.12,0,0,1,.75-.56,16,16,0,0,1,15.17-1.4l.13.06,47.11,21.11A16,16,0,0,1,223.88,183.08Zm-15.88-2s-.07,0-.11,0h0l-47-21.05-24.35,20.71a8.44,8.44,0,0,1-.74.56,16,16,0,0,1-15.75,1.14c-18.73-9.05-37.4-27.58-46.46-46.11a16,16,0,0,1,1-15.7,6.13,6.13,0,0,1,.57-.77L96,95.15l-21-47a.61.61,0,0,1,0-.12A40.2,40.2,0,0,0,40,88,128.14,128.14,0,0,0,168,216,40.21,40.21,0,0,0,208,181.07Z"},child:[]}]})(t)}function sx(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40a8,8,0,0,0-11.32,11.32L204.69,120H112a8,8,0,0,0,0,16h92.69l-26.35,26.34a8,8,0,0,0,11.32,11.32l40-40A8,8,0,0,0,229.66,122.34Z"},child:[]}]})(t)}function ox(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"},child:[]}]})(t)}function $h(t){return je({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"},child:[]}]})(t)}const ax=({onLogin:t})=>S("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:[S("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"10px"},children:[x(nx,{size:25,style:{marginRight:"10px"}}),x("h2",{style:{fontFamily:"'Parkinsans', sans-serif",fontWeight:600,margin:0,fontSize:"24px"},children:"Lens"})]}),x("p",{style:{marginBottom:"20px",fontFamily:"Arial, sans-serif",color:"#666666"},children:"By NordCFO"}),x("button",{onClick:t,style:{padding:"10px 16px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",maxWidth:"300px",fontSize:"14px",fontWeight:"bold"},children:"Sign in with Microsoft"})]}),lx=()=>{var d,h,f,g,y;const[t,e]=L.exports.useState(!1),[n,i]=L.exports.useState(null),[r,s]=L.exports.useState(!1),[o,a]=L.exports.useState([]);L.exports.useEffect(()=>{const w=console.error,p=[];return console.error=function(...m){w.apply(console,m);const v={timestamp:new Date().toISOString(),message:m.map(_=>{if(_ instanceof Error)return{name:_.name,message:_.message};if(typeof _=="object")try{return JSON.stringify(_)}catch{return`[Object: ${typeof _}]`}else return String(_)}).join(" ")};p.unshift(v),p.length>10&&p.pop(),a([...p])},()=>{console.error=w}},[]);const l=async()=>{try{const w={userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,vendor:navigator.vendor,screen:{width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth},viewport:{width:window.innerWidth,height:window.innerHeight}};let p={};try{p={id:chrome.runtime.id,version:chrome.runtime.getManifest().version}}catch(k){p={error:k.message}}let m="unknown";try{const k=await chrome.tabs.query({active:!0,currentWindow:!0});if(k&&k[0]&&k[0].url){const C=new URL(k[0].url);m=`${C.protocol}//${C.hostname}${C.pathname.split("/").slice(0,-1).join("/")}/[REDACTED]`}}catch(k){m=`Error getting URL: ${k.message}`}let v={};try{v=await chrome.storage.local.get(null),v.currentOpportunityId&&(v.currentOpportunityId="REDACTED")}catch(k){v={error:k.message}}let _={};try{if(window.performance){const k=window.performance;_={memory:k.memory?{jsHeapSizeLimit:k.memory.jsHeapSizeLimit,totalJSHeapSize:k.memory.totalJSHeapSize,usedJSHeapSize:k.memory.usedJSHeapSize}:"Not available",navigation:k.navigation?{redirectCount:k.navigation.redirectCount,type:k.navigation.type}:"Not available",timing:k.timing?{domComplete:k.timing.domComplete,domContentLoadedEventEnd:k.timing.domContentLoadedEventEnd,loadEventEnd:k.timing.loadEventEnd}:"Not available"}}}catch(k){_={error:k.message}}const b={timestamp:new Date().toISOString(),browserInfo:w,extensionInfo:p,currentUrl:m,storageState:v,errorLog:o,performanceMetrics:_,buildInfo:{buildDate:window.__BUILD_DATE__||"unknown",environment:window.__ENV__||"unknown"}};i(b),e(!0)}catch(w){console.error("Error collecting debug information:",w),i({error:w.message,timestamp:new Date().toISOString()}),e(!0)}},c=()=>{try{navigator.clipboard.writeText(JSON.stringify(n,null,2)),s(!0),setTimeout(()=>s(!1),2e3)}catch(w){console.error("Error copying to clipboard:",w)}},u=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(n,null,2)),window.open("https://www.lens.nordcfo.com/debugcontact","_blank")}catch(w){console.error("Error opening debug page or copying log:",w),alert("Could not open the debug page. Please visit https://www.lens.nordcfo.com/debugcontact manually.")}};return S(zc,{children:[x("button",{onClick:l,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Debug",children:x(G_,{size:20})}),t&&x("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>e(!1),children:S("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"700px",width:"90%",maxHeight:"80vh",overflow:"auto"},onClick:w=>w.stopPropagation(),children:[x("h3",{style:{margin:"0 0 16px 0"},children:"Debug Information"}),S("div",{style:{marginBottom:"16px"},children:[x("p",{style:{fontSize:"14px",marginBottom:"8px"},children:"This information helps us diagnose and fix issues with the NordSales extension."}),S("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[S("div",{style:{backgroundColor:"#f0f4ff",padding:"8px",borderRadius:"4px",fontSize:"12px",flex:"1 0 auto"},children:[x("strong",{children:"Extension Version:"})," ",((d=n==null?void 0:n.extensionInfo)==null?void 0:d.version)||"Unknown"]}),S("div",{style:{backgroundColor:"#f0f4ff",padding:"8px",borderRadius:"4px",fontSize:"12px",flex:"1 0 auto"},children:[x("strong",{children:"Browser:"})," ",((h=n==null?void 0:n.browserInfo)==null?void 0:h.vendor)||""," ",((g=(f=n==null?void 0:n.browserInfo)==null?void 0:f.userAgent)==null?void 0:g.split(" ").pop())||"Unknown"]}),S("div",{style:{backgroundColor:"#f0f4ff",padding:"8px",borderRadius:"4px",fontSize:"12px",flex:"1 0 auto"},children:[x("strong",{children:"Errors:"})," ",((y=n==null?void 0:n.errorLog)==null?void 0:y.length)||0]})]})]}),x("pre",{style:{backgroundColor:"#f5f5f5",padding:"8px",borderRadius:"4px",overflow:"auto",fontSize:"12px",maxHeight:"300px"},children:JSON.stringify(n,null,2)}),S("div",{style:{marginTop:"16px",display:"flex",justifyContent:"space-between"},children:[x("div",{children:x("button",{onClick:u,style:{padding:"8px 16px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"8px"},children:"Email Report"})}),S("div",{children:[x("button",{onClick:c,style:{marginRight:"8px",padding:"8px 16px",backgroundColor:r?"#4caf50":"#f1f1f1",color:r?"white":"black",border:"none",borderRadius:"4px",cursor:"pointer"},children:r?"Copied!":"Copy"}),x("button",{onClick:()=>e(!1),style:{padding:"8px 16px",backgroundColor:"#f1f1f1",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Close"})]})]})]})})]})},cx=({subscription:t})=>{L.exports.useEffect(()=>{console.log("SubscriptionStatus component received subscription:",t)},[t]);let e,n;const i=(t==null?void 0:t.status)||"free";return console.log("Processing subscription tier:",i),i==="pro"||i==="enterprise"?(e=i.charAt(0).toUpperCase()+i.slice(1),n={background:"#111111",text:"#FFFFFF",hover:"#333333"}):i==="basic"?(e="Basic",n={background:"#444444",text:"#FFFFFF",hover:"#555555"}):(e="Free",n={background:"#666666",text:"#FFFFFF",hover:"#777777"}),x("div",{children:x("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"500",backgroundColor:n.background,color:n.text,marginRight:"8px"},children:e})})},Fm=({title:t="Lens",showBackButton:e=!0,onBackClick:n=()=>{},onMenuClick:i=()=>{},onSettingsClick:r=()=>{},onFetchMyOpenOpportunities:s=()=>{},onLogout:o=()=>{},isLoggingOut:a=!1,subscription:l={}})=>{const[c,u]=L.exports.useState(!1),d=()=>{u(!c),i()},h=()=>{o(),u(!1)};return S(zc,{children:[x("div",{style:{display:"flex",justifyContent:"space-between",position:"sticky",top:0,left:0,right:0,zIndex:100,backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:S("div",{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:"4px",boxSizing:"border-box",justifyContent:"space-between",padding:"10px 12px",backgroundColor:"#ffffff",border:"1px solid #e0e0e0",fontFamily:"Segoe UI, sans-serif"},children:[S("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x("button",{onClick:d,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:x(ix,{size:20})}),x("span",{style:{fontSize:"16px",fontWeight:"500",letterSpacing:"-0.5px"},children:t})]}),S("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x(cx,{subscription:l}),x(lx,{}),x("button",{onClick:s,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:x(zh,{size:20})}),S("button",{onClick:h,disabled:a,style:{background:"none",border:"none",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:a?.7:1},children:[x(sx,{size:20}),a&&x("span",{style:{fontSize:"10px",marginLeft:"2px",position:"absolute",right:"4px",top:"4px",width:"8px",height:"8px",borderRadius:"50%",borderTop:"2px solid #333",borderRight:"2px solid transparent",animation:"spin 1s linear infinite"}})]}),e&&x("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:x($h,{size:20})})]})]})}),x("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}),c&&x("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:101,display:"flex"},onClick:d,children:S("div",{onClick:f=>f.stopPropagation(),style:{width:"80%",maxWidth:"300px",height:"100%",backgroundColor:"white",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column"},children:[S("div",{style:{padding:"20px 16px",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[x("span",{style:{fontSize:"16px",fontWeight:"500",letterSpacing:"-0.5px"},children:t}),x("button",{onClick:d,style:{background:"none",border:"none",cursor:"pointer",display:"flex"},children:x($h,{size:24})})]}),S("div",{style:{flex:1,padding:"16px"},children:[x("div",{style:{marginBottom:"12px",cursor:"pointer",padding:"10px",borderRadius:"4px",backgroundColor:"#f5f5f5",fontWeight:"500"},onClick:s,children:S("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x(zh,{size:16}),"Refresh"]})}),x("div",{style:{marginBottom:"12px",cursor:"pointer",padding:"10px",borderRadius:"4px",fontWeight:"500",transition:"background-color 0.2s ease",backgroundColor:"transparent"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent"},onClick:()=>{u(!1)},children:S("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x(ex,{size:16}),"Dashboard"]})}),x("div",{style:{marginBottom:"12px",cursor:"pointer",padding:"10px",borderRadius:"4px",fontWeight:"500",transition:"background-color 0.2s ease",backgroundColor:"transparent"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent"},onClick:()=>{u(!1)},children:S("a",{href:"https://billing.stripe.com/p/login/eVa3ce7YdeM2gYofYY",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"inherit"},children:[S("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x(ox,{size:16}),"Manage Subscription"]}),(l==null?void 0:l.status)&&S("div",{style:{margin:"0 16px 12px",padding:"10px",borderRadius:"6px",backgroundColor:"#f9f9f9",fontSize:"13px",color:"#333",lineHeight:"1.5",boxShadow:"inset 0 0 2px rgba(0,0,0,0.05)"},children:[x("strong",{children:"Plan:"})," ",l.status.charAt(0).toUpperCase()+l.status.slice(1),x("br",{}),l.endDate&&S(zc,{children:[x("strong",{children:"Valid until:"})," ",new Date(l.endDate).toLocaleDateString()]})]})]})})]}),x("div",{style:{padding:"16px",borderTop:"1px solid #f0f0f0"},children:S("button",{onClick:h,disabled:a,style:{width:"100%",padding:"10px",backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"4px",cursor:a?"not-allowed":"pointer",textAlign:"center",position:"relative",opacity:a?.7:1,transition:"background-color 0.2s ease"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="white"},children:[a?"Logging out...":"Logout",a&&x("span",{style:{display:"inline-block",width:"10px",height:"10px",marginLeft:"8px",borderRadius:"50%",borderTop:"2px solid #333",borderRight:"2px solid transparent",animation:"spin 1s linear infinite"}})]})})]})})]})},ux=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],dx=["January","February","March","April","May","June","July","August","September","October","November","December"],Fh={4201:"#4285F4",4202:"#0F9D58",4204:"#F4B400",4210:"#DB4437",default:"#9E9E9E"},sa=t=>{if(!t)return"Activity";switch(t.toLowerCase()){case"appointment":return"Meeting";case"email":return"Email";case"phonecall":return"Phone Call";case"task":return"Task";default:return`Activity (${t})`}},hx=(t,e)=>{if(e<=1)return t;switch(t){case"Meeting":return"Meetings";case"Email":return"Emails";case"Phone Call":return"Phone Calls";case"Task":return"Tasks";default:return`${t}s`}},Hu=t=>{if(!t)return x(jh,{size:18,color:"#555"});switch(t.toLowerCase()){case"email":return x(Z_,{size:18,color:"#555"});case"meeting":return x(Q_,{size:18,color:"#555"});case"phone call":return x(rx,{size:18,color:"#555"});case"task":return x(X_,{size:18,color:"#555"});default:return x(jh,{size:18,color:"#555"})}},Nm=t=>{const e=parseInt(t,10);return Fh[e]||Fh.default},fx=t=>{if(!t||t.length===0)return[];const e={};return t.forEach(n=>{if(!n)return;const i=sa(n.activitytypecode);e[i]||(e[i]={count:0,label:i}),e[i].count++}),Object.values(e).map(n=>({...n,icon:Hu(n.label)}))},ps=t=>{var o,a;if(!t)return null;const e=l=>{if(!l)return null;try{const c=new Date(l);return isNaN(c.getTime())?null:c}catch(c){return console.warn("Error parsing date:",l,c),null}},n=e(t.createdon),i=e(t.scheduledstart),r=e(t.scheduledend),s=e(t.actualstart);return(o=t.activitytypecode)==null||o.toLowerCase(),s||i||n;return((a=t.activitytypecode)==null?void 0:a.toLowerCase())==="task"?i||s||n||r:n},px=t=>{if(!t||t.length===0)return null;const e=[...t].map(o=>({...o,_dateUsed:ps(o)})).filter(o=>o._dateUsed).sort((o,a)=>a._dateUsed-o._dateUsed),n=e.length>0?e[0]._dateUsed:null;if(!n)return null;const i=new Date,r=Math.abs(i-n);return{days:Math.ceil(r/(1e3*60*60*24)),date:n,activity:e[0]}},gx=t=>t===null?{text:"No activity",color:"#9e9e9e"}:t<=3?{text:"Last 3 days",color:"#4caf50"}:t<=7?{text:"Last 7 days",color:"#2196f3"}:t<=14?{text:"Last 2 weeks",color:"#ff9800"}:{text:`${t} days ago`,color:"#f44336"},Ki=(t,e)=>{const n=new Date(t),i=e?new Date(e):new Date,r=Math.abs(i-n);return Math.ceil(r/(1e3*60*60*24))},mx=(t,e,n)=>{const i=new Date(t,e,1),s=new Date(t,e+1,0).getDate();let o=i.getDay()-1;o<0&&(o=6);const a=[];let l=Array(7).fill(null);for(let u=0;u<o;u++)l[u]={day:null,activities:[]};const c={};n&&n.forEach(u=>{try{const d=ps(u);if(!d)return;const h=d.getMonth()===e,f=d.getFullYear()===t;if(h&&f){const g=d.getDate();c[g]||(c[g]=[]),c[g].push(u)}}catch(d){console.error("Error processing activity for calendar:",d)}});for(let u=1;u<=s;u++){const d=(o+u-1)%7;l[d]={day:u,activities:c[u]||[],isToday:new Date().getDate()===u&&new Date().getMonth()===e&&new Date().getFullYear()===t},(d===6||u===s)&&(a.push([...l]),l=Array(7).fill(null))}return a},yx=({opportunity:t,onClick:e})=>{const n=Array.isArray(t==null?void 0:t.activities)?t.activities:[],i=Ki(t.createdon,null),r=t.estimatedclosedate?Ki(new Date,t.estimatedclosedate):null,s=t.lastActivity?Ki(t.lastActivity,new Date):null,o=gx(s),a=()=>{const c=Array(8).fill(0),u=Array.isArray(n)?n:[];if(console.log("\u{1F6A8} Opportunity activities in card::",u),u.length>0){const f=new Date,g=7*24*60*60*1e3;u.forEach((y,w)=>{if(!y){console.warn(`\u{1F6A8} Null activity at index ${w}`);return}let p=null;try{p=ps(y)}catch(v){console.warn(`\u{1F6A8} Error getting date for activity ${w}:`,v);return}if(!p||isNaN(p)){console.warn(`\u{1F6A8} Invalid date for activity ${w}:`,y);return}const m=Math.floor((f-p)/g);m>=0&&m<8&&c[m]++})}else console.warn("\u{1F6A8} No activities or empty activities array",t);const d=Math.max(...c,1),h=f=>{if(f===0)return"#ebedf0";switch(Math.min(Math.ceil(f/d*4),4)){case 1:return"#c6e48b";case 2:return"#7bc96f";case 3:return"#239a3b";case 4:return"#196127";default:return"#ebedf0"}};return c.map((f,g)=>x("div",{title:`${f} ${f===1?"activity":"activities"} ${g===0?"this week":`${g} week${g!==1?"s":""} ago`}`,style:{flex:1,height:"24px",backgroundColor:h(f),borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center"},children:f>0&&x("span",{style:{fontSize:"10px",fontWeight:"bold",color:f>d/2?"#fff":"#333"},children:f})},`week-${g}`)).reverse()};return S("div",{style:{padding:"14px 16px 14px 16px",marginBottom:"12px",border:"1px solidrgb(200, 200, 200)",backgroundColor:"white",borderRadius:"8px",cursor:"pointer",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)",l.currentTarget.style.borderLeft="1px solid #ff8f6b"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.08)",l.currentTarget.style.borderLeft="0px solid #cccccc"},onClick:e,children:[x("div",{style:{marginBottom:"8px",fontSize:"12px",color:"#1f2223",fontWeight:"600"},children:t.name}),S("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"12px",fontWeight:"500",color:"#5f646a"},children:[x("div",{children:t.customerid_account&&x("span",{children:t.customerid_account.name})}),x("div",{style:{fontWeight:"500"},children:t.estimatedvalue?`$${t.estimatedvalue.toLocaleString()}`:"No est. value"})]}),S("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",gap:"12px"},children:[S("div",{style:{flex:1,backgroundColor:"#f5f5f5",borderRadius:"4px",padding:"8px 12px"},children:[S("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[x("div",{style:{fontSize:"12px",color:"#555"},children:"Open days"}),x("div",{style:{fontSize:"14px",fontWeight:"bold"},children:i})]}),x("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden"},children:x("div",{style:{height:"100%",width:`${Math.min(i/90*100,100)}%`,backgroundColor:i>60?"#f44336":i>30?"#ff9800":"#2196f3",borderRadius:"2px"}})})]}),S("div",{style:{flex:1,backgroundColor:"#f5f5f5",borderRadius:"4px",padding:"8px 12px"},children:[S("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[x("div",{style:{fontSize:"12px",color:"#555"},children:"Days to close"}),x("div",{style:{fontSize:"14px",fontWeight:"bold"},children:r!==null?r:"\u2014"})]}),r!==null&&x("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden"},children:x("div",{style:{height:"100%",width:`${Math.max(100-r/30*100,0)}%`,backgroundColor:r<7?"#f44336":r<15?"#ff9800":"#4caf50",borderRadius:"2px"}})})]})]}),S("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",gap:"4px"},children:[x("div",{style:{fontSize:"12px",color:"#555",marginRight:"8px"},children:"Activity:"}),x("div",{style:{flex:1,display:"flex",gap:"4px",height:"24px",alignItems:"center"},children:a()}),x("div",{style:{display:"inline-block",backgroundColor:`${o.color}20`,color:o.color,padding:"3px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",marginLeft:"8px"},children:o.text})]})]})},zt=({title:t,isOpen:e,onToggle:n,children:i})=>S("div",{style:{marginBottom:"16px",backgroundColor:"white",borderRadius:"8px",overflow:"hidden"},children:[x("div",{onClick:n,style:{padding:"12px 16px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:e?"1px solid #e0e0e0":"none"},children:S("div",{style:{display:"flex",alignItems:"center"},children:[x("span",{style:{marginRight:"10px",fontSize:"16px",fontWeight:"bold",paddingTop:"4px"},children:e?x(q_,{size:20}):x(J_,{size:20})}),x("h3",{style:{margin:"0",fontSize:"14px"},children:t})]})}),e&&x("div",{style:{padding:"16px"},children:i})]});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Os(t){return t+.5|0}const pn=(t,e,n)=>Math.max(Math.min(t,n),e);function Dr(t){return pn(Os(t*2.55),0,255)}function En(t){return pn(Os(t*255),0,255)}function Kt(t){return pn(Os(t/2.55)/100,0,1)}function Nh(t){return pn(Os(t*100),0,100)}const ut={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jc=[..."0123456789ABCDEF"],vx=t=>jc[t&15],wx=t=>jc[(t&240)>>4]+jc[t&15],to=t=>(t&240)>>4===(t&15),_x=t=>to(t.r)&&to(t.g)&&to(t.b)&&to(t.a);function xx(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ut[t[1]]*17,g:255&ut[t[2]]*17,b:255&ut[t[3]]*17,a:e===5?ut[t[4]]*17:255}:(e===7||e===9)&&(n={r:ut[t[1]]<<4|ut[t[2]],g:ut[t[3]]<<4|ut[t[4]],b:ut[t[5]]<<4|ut[t[6]],a:e===9?ut[t[7]]<<4|ut[t[8]]:255})),n}const bx=(t,e)=>t<255?e(t):"";function kx(t){var e=_x(t)?vx:wx;return t?"#"+e(t.r)+e(t.g)+e(t.b)+bx(t.a,e):void 0}const Sx=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Um(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Cx(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function Px(t,e,n){const i=Um(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Ex(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Vu(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Ex(n,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function Ku(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(En)}function Yu(t,e,n){return Ku(Um,t,e,n)}function Ox(t,e,n){return Ku(Px,t,e,n)}function Tx(t,e,n){return Ku(Cx,t,e,n)}function Bm(t){return(t%360+360)%360}function Ax(t){const e=Sx.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Dr(+e[5]):En(+e[5]));const r=Bm(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=Ox(r,s,o):e[1]==="hsv"?i=Tx(r,s,o):i=Yu(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function Dx(t,e){var n=Vu(t);n[0]=Bm(n[0]+e),n=Yu(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Ix(t){if(!t)return;const e=Vu(t),n=e[0],i=Nh(e[1]),r=Nh(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Kt(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const Uh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Bh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Mx(){const t={},e=Object.keys(Bh),n=Object.keys(Uh);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Uh[s]);s=parseInt(Bh[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let no;function Lx(t){no||(no=Mx(),no.transparent=[0,0,0,0]);const e=no[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Rx=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zx(t){const e=Rx.exec(t);let n=255,i,r,s;if(!!e){if(e[7]!==i){const o=+e[7];n=e[8]?Dr(o):pn(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Dr(i):pn(i,0,255)),r=255&(e[4]?Dr(r):pn(r,0,255)),s=255&(e[6]?Dr(s):pn(s,0,255)),{r:i,g:r,b:s,a:n}}}function jx(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Kt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const bl=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,_i=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function $x(t,e,n){const i=_i(Kt(t.r)),r=_i(Kt(t.g)),s=_i(Kt(t.b));return{r:En(bl(i+n*(_i(Kt(e.r))-i))),g:En(bl(r+n*(_i(Kt(e.g))-r))),b:En(bl(s+n*(_i(Kt(e.b))-s))),a:t.a+n*(e.a-t.a)}}function io(t,e,n){if(t){let i=Vu(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Yu(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Wm(t,e){return t&&Object.assign(e||{},t)}function Wh(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=En(t[3]))):(e=Wm(t,{r:0,g:0,b:0,a:1}),e.a=En(e.a)),e}function Fx(t){return t.charAt(0)==="r"?zx(t):Ax(t)}class gs{constructor(e){if(e instanceof gs)return e;const n=typeof e;let i;n==="object"?i=Wh(e):n==="string"&&(i=xx(e)||Lx(e)||Fx(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Wm(this._rgb);return e&&(e.a=Kt(e.a)),e}set rgb(e){this._rgb=Wh(e)}rgbString(){return this._valid?jx(this._rgb):void 0}hexString(){return this._valid?kx(this._rgb):void 0}hslString(){return this._valid?Ix(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=$x(this._rgb,e._rgb,n)),this}clone(){return new gs(this.rgb)}alpha(e){return this._rgb.a=En(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Os(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return io(this._rgb,2,e),this}darken(e){return io(this._rgb,2,-e),this}saturate(e){return io(this._rgb,1,e),this}desaturate(e){return io(this._rgb,1,-e),this}rotate(e){return Dx(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Nt(){}const Nx=(()=>{let t=0;return()=>t++})();function J(t){return t==null}function le(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Y(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ke(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ze(t,e){return ke(t)?t:e}function q(t,e){return typeof t=="undefined"?e:t}const Ux=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ie(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Q(t,e,n,i){let r,s,o;if(le(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(Y(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function oa(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function aa(t){if(le(t))return t.map(aa);if(Y(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=aa(t[n[r]]);return e}return t}function Hm(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Bx(t,e,n,i){if(!Hm(t))return;const r=e[t],s=n[t];Y(r)&&Y(s)?ms(r,s,i):e[t]=aa(s)}function ms(t,e,n){const i=le(e)?e:[e],r=i.length;if(!Y(t))return t;n=n||{};const s=n.merger||Bx;let o;for(let a=0;a<r;++a){if(o=i[a],!Y(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Kr(t,e){return ms(t,e,{merger:Wx})}function Wx(t,e,n){if(!Hm(t))return;const i=e[t],r=n[t];Y(i)&&Y(r)?Kr(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=aa(r))}const Hh={"":t=>t,x:t=>t.x,y:t=>t.y};function Hx(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Vx(t){const e=Hx(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function rr(t,e){return(Hh[e]||(Hh[e]=Vx(e)))(t)}function qu(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ys=t=>typeof t!="undefined",Mn=t=>typeof t=="function",Vh=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Kx(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ce=Math.PI,Ft=2*Ce,la=Number.POSITIVE_INFINITY,Yx=Ce/180,nt=Ce/2,Nn=Ce/4,Kh=Ce*2/3,gn=Math.log10,On=Math.sign;function Oo(t,e,n){return Math.abs(t-e)<n}function Yh(t){const e=Math.round(t);t=Oo(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(gn(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function qx(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function Jx(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function ca(t){return!Jx(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Gx(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Vm(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function mn(t){return t*(Ce/180)}function Ju(t){return t*(180/Ce)}function qh(t){if(!ke(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Qx(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Ce&&(s+=Ft),{angle:s,distance:r}}function Xx(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Lt(t){return(t%Ft+Ft)%Ft}function Zx(t,e,n,i){const r=Lt(t),s=Lt(e),o=Lt(n),a=Lt(s-r),l=Lt(o-r),c=Lt(r-s),u=Lt(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function St(t,e,n){return Math.max(e,Math.min(n,t))}function eb(t){return St(t,-32768,32767)}function Ri(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Gu(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const $c=(t,e,n,i)=>Gu(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),tb=(t,e,n)=>Gu(t,n,i=>t[i][e]>=n);function nb(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const Km=["push","pop","shift","splice","unshift"];function ib(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Km.forEach(n=>{const i="_onData"+qu(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Jh(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Km.forEach(s=>{delete t[s]}),delete t._chartjs)}function Ym(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const qm=function(){return typeof window=="undefined"?function(t){return t()}:window.requestAnimationFrame}();function Jm(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,qm.call(window,()=>{i=!1,t.apply(e,n)}))}}function rb(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Qu=t=>t==="start"?"left":t==="end"?"right":"center",Me=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,sb=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,ro=t=>t===0||t===1,Gh=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ft/n)),Qh=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ft/n)+1,Yr={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*nt)+1,easeOutSine:t=>Math.sin(t*nt),easeInOutSine:t=>-.5*(Math.cos(Ce*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ro(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ro(t)?t:Gh(t,.075,.3),easeOutElastic:t=>ro(t)?t:Qh(t,.075,.3),easeInOutElastic(t){return ro(t)?t:t<.5?.5*Gh(t*2,.1125,.45):.5+.5*Qh(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Yr.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Yr.easeInBounce(t*2)*.5:Yr.easeOutBounce(t*2-1)*.5+.5};function Gm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Xh(t){return Gm(t)?t:new gs(t)}function kl(t){return Gm(t)?t:new gs(t).saturate(.5).darken(.1).hexString()}const ob=["x","y","borderWidth","radius","tension"],ab=["color","borderColor","backgroundColor"];function lb(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:ab},numbers:{type:"number",properties:ob}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function cb(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Zh=new Map;function ub(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Zh.get(n);return i||(i=new Intl.NumberFormat(t,e),Zh.set(n,i)),i}function Xu(t,e,n){return ub(e,n).format(t)}const Qm={values(t){return le(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=db(t,n)}const o=gn(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Xu(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(gn(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Qm.numeric.call(this,t,e,n):""}};function db(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Fa={formatters:Qm};function hb(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Fa.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ai=Object.create(null),Fc=Object.create(null);function qr(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Sl(t,e,n){return typeof e=="string"?ms(qr(t,e),n):ms(qr(t,""),e)}class fb{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>kl(r.backgroundColor),this.hoverBorderColor=(i,r)=>kl(r.borderColor),this.hoverColor=(i,r)=>kl(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Sl(this,e,n)}get(e){return qr(this,e)}describe(e,n){return Sl(Fc,e,n)}override(e,n){return Sl(ai,e,n)}route(e,n,i,r){const s=qr(this,e),o=qr(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Y(l)?Object.assign({},c,l):q(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var pe=new fb({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[lb,cb,hb]);function pb(t){return!t||J(t.size)||J(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ua(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function gb(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],d!=null&&!le(d))o=ua(t,r,s,o,d);else if(le(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!le(h)&&(o=ua(t,r,s,o,h));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Un(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function ef(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function tf(t,e,n,i){Xm(t,e,n,i,null)}function Xm(t,e,n,i,r){let s,o,a,l,c,u,d,h;const f=e.pointStyle,g=e.rotation,y=e.radius;let w=(g||0)*Yx;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(w),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,y,0,0,Ft):t.arc(n,i,y,0,Ft),t.closePath();break;case"triangle":u=r?r/2:y,t.moveTo(n+Math.sin(w)*u,i-Math.cos(w)*y),w+=Kh,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*y),w+=Kh,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(w+Nn)*l,d=Math.cos(w+Nn)*(r?r/2-c:l),a=Math.sin(w+Nn)*l,h=Math.sin(w+Nn)*(r?r/2-c:l),t.arc(n-d,i-a,c,w-Ce,w-nt),t.arc(n+h,i-o,c,w-nt,w),t.arc(n+d,i+a,c,w,w+nt),t.arc(n-h,i+o,c,w+nt,w+Ce),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*y,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}w+=Nn;case"rectRot":d=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,h=Math.sin(w)*(r?r/2:y),t.moveTo(n-d,i-a),t.lineTo(n+h,i-o),t.lineTo(n+d,i+a),t.lineTo(n-h,i+o),t.closePath();break;case"crossRot":w+=Nn;case"cross":d=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,h=Math.sin(w)*(r?r/2:y),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o);break;case"star":d=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,h=Math.sin(w)*(r?r/2:y),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o),w+=Nn,d=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,h=Math.sin(w)*(r?r/2:y),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o);break;case"line":o=r?r/2:Math.cos(w)*y,a=Math.sin(w)*y,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(w)*(r?r/2:y),i+Math.sin(w)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function zi(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Zu(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ed(t){t.restore()}function mb(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),J(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function yb(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function vb(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function li(t,e,n,i,r,s={}){const o=le(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,mb(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&vb(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),J(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),yb(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function vs(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Ce,Ce,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Ce,nt,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,nt,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-nt,!0),t.lineTo(n+o.topLeft,i)}const wb=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_b=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function xb(t,e){const n=(""+t).match(wb);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const bb=t=>+t||0;function Zm(t,e){const n={},i=Y(e),r=i?Object.keys(e):e,s=Y(t)?i?o=>q(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=bb(s(o));return n}function e0(t){return Zm(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ei(t){return Zm(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ze(t){const e=e0(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function we(t,e){t=t||{},e=e||pe.font;let n=q(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=q(t.style,e.style);i&&!(""+i).match(_b)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:q(t.family,e.family),lineHeight:xb(q(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:q(t.weight,e.weight),string:""};return r.string=pb(r),r}function so(t,e,n,i){let r=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),n!==void 0&&le(a)&&(a=a[n%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function kb(t,e,n){const{min:i,max:r}=t,s=Ux(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function pi(t,e){return Object.assign(Object.create(t),e)}function td(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i=="undefined"&&(i=r0("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>td([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return n0(a,l,()=>Db(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return rf(a).includes(l)},ownKeys(a){return rf(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function sr(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:t0(t,i),setContext:s=>sr(t,s,n,i),override:s=>sr(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return n0(s,o,()=>Cb(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function t0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Mn(n)?n:()=>n,isIndexable:Mn(i)?i:()=>i}}const Sb=(t,e)=>t?t+qu(e):e,nd=(t,e)=>Y(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function n0(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Cb(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Mn(a)&&o.isScriptable(e)&&(a=Pb(e,a,t,n)),le(a)&&a.length&&(a=Eb(e,a,t,o.isIndexable)),nd(e,a)&&(a=sr(a,r,s&&s[e],o)),a}function Pb(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),nd(t,l)&&(l=id(r._scopes,r,t,l)),l}function Eb(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index!="undefined"&&i(t))return e[s.index%e.length];if(Y(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=id(c,r,t,u);e.push(sr(d,s,o&&o[t],a))}}return e}function i0(t,e,n){return Mn(t)?t(e,n):t}const Ob=(t,e)=>t===!0?e:typeof t=="string"?rr(e,t):void 0;function Tb(t,e,n,i,r){for(const s of e){const o=Ob(n,s);if(o){t.add(o);const a=i0(o._fallback,n,r);if(typeof a!="undefined"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i!="undefined"&&n!==i)return null}return!1}function id(t,e,n,i){const r=e._rootScopes,s=i0(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=nf(a,o,n,s||n,i);return l===null||typeof s!="undefined"&&s!==n&&(l=nf(a,o,s,l,i),l===null)?!1:td(Array.from(a),[""],r,s,()=>Ab(e,n,i))}function nf(t,e,n,i,r){for(;n;)n=Tb(t,e,n,i,r);return n}function Ab(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return le(r)&&Y(n)?n:r||{}}function Db(t,e,n,i){let r;for(const s of e)if(r=r0(Sb(s,t),n),typeof r!="undefined")return nd(t,r)?id(n,i,t,r):r}function r0(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i!="undefined")return i}}function rf(t){let e=t._keys;return e||(e=t._keys=Ib(t._scopes)),e}function Ib(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function rd(){return typeof window!="undefined"&&typeof document!="undefined"}function sd(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function da(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Na=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Mb(t,e){return Na(t).getPropertyValue(e)}const Lb=["top","right","bottom","left"];function ti(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Lb[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Rb=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function zb(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(Rb(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Yn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Na(n),s=r.boxSizing==="border-box",o=ti(r,"padding"),a=ti(r,"border","width"),{x:l,y:c,box:u}=zb(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:g}=e;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/f*n.width/i),y:Math.round((c-h)/g*n.height/i)}}function jb(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&sd(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Na(s),l=ti(a,"border","width"),c=ti(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=da(a.maxWidth,s,"clientWidth"),r=da(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||la,maxHeight:r||la}}const oo=t=>Math.round(t*10)/10;function $b(t,e,n,i){const r=Na(t),s=ti(r,"margin"),o=da(r.maxWidth,t,"clientWidth")||la,a=da(r.maxHeight,t,"clientHeight")||la,l=jb(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const h=ti(r,"border","width"),f=ti(r,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=oo(Math.min(c,o,l.maxWidth)),u=oo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=oo(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=oo(Math.floor(u*i))),{width:c,height:u}}function sf(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Fb=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};rd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function of(t,e){const n=Mb(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const Nb=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Ub=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Yi(t,e,n){return t?Nb(e,n):Ub()}function s0(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function o0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Bb{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=qm.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ut=new Bb;const af="transparent",Wb={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Xh(t||af),r=i.valid&&Xh(e||af);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Hb{constructor(e,n,i,r){const s=n[i];r=so([e.to,r,s,e.from]);const o=so([e.from,s,r]);this._active=!0,this._fn=e.fn||Wb[e.type||typeof o],this._easing=Yr[e.easing]||Yr.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=so([e.to,n,r,e.from]),this._from=so([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class a0{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Y(e))return;const n=Object.keys(pe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Y(s))return;const o={};for(const a of n)o[a]=s[a];(le(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=Kb(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&Vb(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new Hb(h,e,c,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Ut.add(this._chart,i),!0}}function Vb(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function Kb(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lf(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function Yb(t,e,n){if(n===!1)return!1;const i=lf(t,n),r=lf(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function qb(t){let e,n,i,r;return Y(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function l0(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function cf(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],ke(c)&&(s||e===0||On(e)===On(c))&&(e+=c)}return!u&&!i.all?0:e}function Jb(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:t[u]};return a}function Cl(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Gb(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Qb(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Xb(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function uf(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function df(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=Gb(s,o,i),d=e.length;let h;for(let f=0;f<d;++f){const g=e[f],{[l]:y,[c]:w}=g,p=g._stacks||(g._stacks={});h=p[c]=Xb(r,u,y),h[a]=w,h._top=uf(h,o,!0,i.type),h._bottom=uf(h,o,!1,i.type);const m=h._visualValues||(h._visualValues={});m[a]=w}}function Pl(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function Zb(t,e){return pi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function ek(t,e,n){return pi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _r(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(!!i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const El=t=>t==="reset"||t==="none",hf=(t,e)=>e?t:Object.assign({},t),tk=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:l0(n,!0),values:null};class Jr{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Cl(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_r(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,h,f,g)=>d==="x"?h:d==="r"?g:f,s=n.xAxisID=q(i.xAxisID,Pl(e,"x")),o=n.yAxisID=q(i.yAxisID,Pl(e,"y")),a=n.rAxisID=q(i.rAxisID,Pl(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),u=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Jh(this._data,this),e._stacked&&_r(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Y(n)){const r=this._cachedMeta;this._data=Jb(n,r)}else if(i!==n){if(i){Jh(i,this);const r=this._cachedMeta;_r(r),r._parsed=[]}n&&Object.isExtensible(n)&&ib(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Cl(n.vScale,n),n.stack!==i.stack&&(r=!0,_r(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(df(this,n._parsed),n._stacked=Cl(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,h;if(this._parsing===!1)i._parsed=r,i._sorted=!0,h=r;else{le(r[e])?h=this.parseArrayData(i,r,e,n):Y(r[e])?h=this.parseObjectData(i,r,e,n):h=this.parsePrimitiveData(i,r,e,n);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),c=d);i._sorted=l}o&&df(this,h)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(r);let h,f,g;for(h=0,f=r;h<f;++h)g=h+i,d[h]={[a]:u||s.parse(c[g],g),[l]:o.parse(n[g],g)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+i,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,h,f;for(u=0,d=r;u<d;++u)h=u+i,f=n[h],c[u]={x:s.parse(rr(f,a),h),y:o.parse(rr(f,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:l0(r,!0),values:n._stacks[e.axis]._visualValues};return cf(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=cf(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=tk(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=Qb(a);let h,f;function g(){f=r[h];const y=f[a.axis];return!ke(f[e.axis])||u>y||d<y}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),s));++h);if(s){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],ke(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=qb(q(this.options.clip,Yb(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=r[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=ek(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Zb(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&ys(i);if(a)return hf(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(pe.elements[e]),g=()=>this.getContext(i,r,n),y=c.resolveNamedOptions(h,f,g,d);return y.$shared&&(y.$shared=l,s[o]=Object.freeze(hf(y,l))),y}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,i,n))}const c=new a0(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(!!e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||El(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){El(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!El(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&_r(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}B(Jr,"defaults",{}),B(Jr,"datasetElementType",null),B(Jr,"dataElementType",null);function nk(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=Ym(i.sort((r,s)=>r-s))}return t._cache.$bar}function ik(t){const e=t.iScale,n=nk(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(ys(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function rk(t,e,n,i){const r=n.barThickness;let s,o;return J(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function sk(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function ok(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function c0(t,e,n,i){return le(t)?ok(t,e,n,i):e[n.axis]=n.parse(t,i),e}function ff(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=e[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(c0(h,d,s,c));return l}function Ol(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function ak(t,e,n){return t!==0?On(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function lk(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function ck(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=lk(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[pf(u,o,a,l)]=!0,r=c)),s[pf(r,o,a,l)]=!0,t.borderSkipped=s}function pf(t,e,n,i){return i?(t=uk(t,e,n),t=gf(t,n,e)):t=gf(t,e,n),t}function uk(t,e,n){return t===e?n:t===n?e:t}function gf(t,e,n){return t==="start"?e:t==="end"?n:t}function dk(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class To extends Jr{parsePrimitiveData(e,n,i,r){return ff(e,n,i,r)}parseArrayData(e,n,i,r){return ff(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let h,f,g,y;for(h=i,f=i+r;h<f;++h)y=n[h],g={},g[s.axis]=s.parse(rr(y,c),h),d.push(c0(rr(y,u),g,o,h));return d}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=Ol(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r);for(let f=n;f<n+i;f++){const g=this.getParsed(f),y=s||J(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),w=this._calculateBarIndexPixels(f,u),p=(g._stacks||{})[a.axis],m={horizontal:c,base:y.base,enableBorderRadius:!p||Ol(g._custom)||o===p._top||o===p._bottom,x:c?y.head:w.center,y:c?w.center:y.head,height:c?w.size:Math.abs(y.size),width:c?Math.abs(y.size):w.size};h&&(m.options=d||this.resolveDataElementOptions(f,e[f].active?"active":r));const v=m.options||e[f].options;ck(m,v,p,o),dk(m,v,u.ratio),this.updateElement(e[f],f,m,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=u=>{const d=u._parsed.find(f=>f[i.axis]===l),h=d&&d[u.vScale.axis];if(J(h)||isNaN(h))return!0};for(const u of r)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||ik(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=Ol(c);let d=l[n.axis],h=0,f=i?this.applyStack(n,l,i):d,g,y;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&On(d)!==On(c.barEnd)&&(h=0),h+=d);const w=!J(s)&&!u?s:h;let p=n.getPixelForValue(w);if(this.chart.getDataVisibility(e)?g=n.getPixelForValue(h+f):g=p,y=g-p,Math.abs(y)<o){y=ak(y,n,a)*o,d===a&&(p-=y/2);const m=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),_=Math.min(m,v),b=Math.max(m,v);p=Math.max(Math.min(p,b),_),g=p+y,i&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(g)-n.getValueForPixel(p))}if(p===n.getPixelForValue(a)){const m=On(y)*n.getLineWidthForValue(a)/2;p+=m,y-=m}return{size:y,base:p,head:g,center:g+y/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=q(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=r.barThickness==="flex"?sk(e,n,r,c):rk(e,n,r,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}B(To,"id","bar"),B(To,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),B(To,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Bn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class od{constructor(e){B(this,"options");this.options=e||{}}static override(e){Object.assign(od.prototype,e)}init(){}formats(){return Bn()}parse(){return Bn()}format(){return Bn()}add(){return Bn()}diff(){return Bn()}startOf(){return Bn()}endOf(){return Bn()}}var hk={_date:od};function fk(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?tb:$c;if(i){if(r._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(s,e,n-d),f=c(s,e,n+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:h}=t,f=h.slice(0,u.lo+1).reverse().findIndex(y=>!J(y[d.axis]));u.lo-=Math.max(0,f);const g=h.slice(u.hi).findIndex(y=>!J(y[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:s.length-1}}function Ts(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:h}=fk(s[a],e,o,r);for(let f=d;f<=h;++f){const g=u[f];g.skip||i(g,c,f)}}}function pk(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Tl(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Ts(t,n,e,function(a,l,c){!r&&!zi(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function gk(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=Qx(o,{x:e.x,y:e.y});Zx(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Ts(t,n,e,s),r}function mk(t,e,n,i,r,s){let o=[];const a=pk(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const g=u.getCenterPoint(r);if(!(!!s||t.isPointInArea(g))&&!f)return;const w=a(e,g);w<l?(o=[{element:u,datasetIndex:d,index:h}],l=w):w===l&&o.push({element:u,datasetIndex:d,index:h})}return Ts(t,n,e,c),o}function Al(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?gk(t,e,n,r):mk(t,e,n,i,r,s)}function mf(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Ts(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var yk={evaluateInteractionItems:Ts,modes:{index(t,e,n,i){const r=Yn(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Tl(t,r,s,i,o):Al(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const r=Yn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Tl(t,r,s,i,o):Al(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const r=Yn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Tl(t,r,s,i,o)},nearest(t,e,n,i){const r=Yn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Al(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Yn(e,t);return mf(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Yn(e,t);return mf(t,r,"y",n.intersect,i)}}};const u0=["left","top","right","bottom"];function xr(t,e){return t.filter(n=>n.pos===e)}function yf(t,e){return t.filter(n=>u0.indexOf(n.pos)===-1&&n.box.axis===e)}function br(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function vk(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function wk(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!u0.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function _k(t,e){const n=wk(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function xk(t){const e=vk(t),n=br(e.filter(c=>c.box.fullSize),!0),i=br(xr(e,"left"),!0),r=br(xr(e,"right")),s=br(xr(e,"top"),!0),o=br(xr(e,"bottom")),a=yf(e,"x"),l=yf(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:xr(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function vf(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function d0(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function bk(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!Y(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&d0(o,s.getPadding());const a=Math.max(0,e.outerWidth-vf(o,t,"left","right")),l=Math.max(0,e.outerHeight-vf(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function kk(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Sk(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Ir(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Sk(a.horizontal,e));const{same:d,other:h}=bk(e,n,a,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&Ir(r,e,n,i)||u}function ao(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function wf(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;ys(c.start)&&(o=c.start),l.fullSize?ao(l,r.left,o,n.outerWidth-r.right-r.left,h):ao(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;ys(c.start)&&(s=c.start),l.fullSize?ao(l,s,r.top,h,n.outerHeight-r.bottom-r.top):ao(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var pt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=ze(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=xk(t.boxes),l=a.vertical,c=a.horizontal;Q(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,w)=>w.box.options&&w.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);d0(h,ze(i));const f=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),g=_k(l.concat(c),d);Ir(a.fullSize,f,d,g),Ir(l,f,d,g),Ir(c,f,d,g)&&Ir(l,f,d,g),kk(f),wf(a.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,wf(a.rightAndBottom,f,d,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Q(a.chartArea,y=>{const w=y.box;Object.assign(w,t.chartArea),w.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class h0{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Ck extends h0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ao="$chartjs",Pk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_f=t=>t===null||t==="";function Ek(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Ao]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_f(r)){const s=of(t,"width");s!==void 0&&(t.width=s)}if(_f(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=of(t,"height");s!==void 0&&(t.height=s)}return t}const f0=Fb?{passive:!0}:!1;function Ok(t,e,n){t&&t.addEventListener(e,n,f0)}function Tk(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,f0)}function Ak(t,e){const n=Pk[t.type]||t.type,{x:i,y:r}=Yn(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function ha(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Dk(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ha(a.addedNodes,i),o=o&&!ha(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ik(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ha(a.removedNodes,i),o=o&&!ha(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const ws=new Map;let xf=0;function p0(){const t=window.devicePixelRatio;t!==xf&&(xf=t,ws.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Mk(t,e){ws.size||window.addEventListener("resize",p0),ws.set(t,e)}function Lk(t){ws.delete(t),ws.size||window.removeEventListener("resize",p0)}function Rk(t,e,n){const i=t.canvas,r=i&&sd(i);if(!r)return;const s=Jm((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),Mk(t,s),o}function Dl(t,e,n){n&&n.disconnect(),e==="resize"&&Lk(t)}function zk(t,e,n){const i=t.canvas,r=Jm(s=>{t.ctx!==null&&n(Ak(s,t))},t);return Ok(i,e,r),r}class jk extends h0{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Ek(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Ao])return!1;const i=n[Ao].initial;["height","width"].forEach(s=>{const o=i[s];J(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Ao],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:Dk,detach:Ik,resize:Rk}[n]||zk;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Dl,detach:Dl,resize:Dl}[n]||Tk)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return $b(e,n,i,r)}isAttached(e){const n=e&&sd(e);return!!(n&&n.isConnected)}}function $k(t){return!rd()||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas?Ck:jk}class Ln{constructor(){B(this,"x");B(this,"y");B(this,"active",!1);B(this,"options");B(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return ca(this.x)&&ca(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}B(Ln,"defaults",{}),B(Ln,"defaultRoutes");function Fk(t,e){const n=t.options.ticks,i=Nk(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?Bk(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return Wk(e,c,s,o/r),c;const u=Uk(s,e,r);if(o>0){let d,h;const f=o>1?Math.round((l-a)/(o-1)):null;for(lo(e,c,u,J(f)?0:a-f,a),d=0,h=o-1;d<h;d++)lo(e,c,u,s[d],s[d+1]);return lo(e,c,u,l,J(f)?e.length:l+f),c}return lo(e,c,u),c}function Nk(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function Uk(t,e,n){const i=Hk(t),r=e.length/n;if(!i)return Math.max(r,1);const s=qx(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function Bk(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function Wk(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function lo(t,e,n,i,r){const s=q(i,0),o=Math.min(q(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function Hk(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const Vk=t=>t==="left"?"right":t==="right"?"left":t,bf=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,kf=(t,e)=>Math.min(e||t,t);function Sf(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function Kk(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function Yk(t,e){Q(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function kr(t){return t.drawTicks?t.tickLength:0}function Cf(t,e){if(!t.display)return 0;const n=we(t.font,e),i=ze(t.padding);return(le(t.text)?t.text.length:1)*n.lineHeight+i.height}function qk(t,e){return pi(t,{scale:e,type:"scale"})}function Jk(t,e,n){return pi(t,{tick:n,index:e,type:"tick"})}function Gk(t,e,n){let i=Qu(t);return(n&&e!=="right"||!n&&e==="right")&&(i=Vk(i)),i}function Qk(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,f,g;const y=o-r,w=a-s;if(t.isHorizontal()){if(f=Me(i,s,a),Y(n)){const p=Object.keys(n)[0],m=n[p];g=u[p].getPixelForValue(m)+y-e}else n==="center"?g=(c.bottom+c.top)/2+y-e:g=bf(t,n,e);h=a-s}else{if(Y(n)){const p=Object.keys(n)[0],m=n[p];f=u[p].getPixelForValue(m)-w+e}else n==="center"?f=(c.left+c.right)/2-w+e:f=bf(t,n,e);g=Me(i,o,r),d=n==="left"?-nt:nt}return{titleX:f,titleY:g,maxWidth:h,rotation:d}}class gi extends Ln{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Ze(e,Number.POSITIVE_INFINITY),n=Ze(n,Number.NEGATIVE_INFINITY),i=Ze(i,Number.POSITIVE_INFINITY),r=Ze(r,Number.NEGATIVE_INFINITY),{min:Ze(e,i),max:Ze(n,r),minDefined:ke(e),maxDefined:ke(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Ze(n,Ze(i,n)),max:Ze(i,Ze(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ie(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=kb(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Sf(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Fk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ie(this.options.afterUpdate,[this])}beforeSetDimensions(){ie(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ie(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ie(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ie(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=ie(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){ie(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ie(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=kf(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=St(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-kr(e.grid)-n.padding-Cf(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=Ju(Math.min(Math.asin(St((u.highest.height+6)/a,-1,1)),Math.asin(St(l/c,-1,1))-Math.asin(St(h/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ie(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ie(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Cf(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=kr(s)+l):(e.height=this.maxHeight,e.width=kr(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,g=mn(this.labelRotation),y=Math.cos(g),w=Math.sin(g);if(a){const p=i.mirror?0:w*d.width+y*h.height;e.height=Math.min(this.maxHeight,e.height+p+f)}else{const p=i.mirror?0:y*d.width+w*h.height;e.width=Math.min(this.maxWidth,e.width+p+f)}this._calculatePadding(c,u,w,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=r*e.width,f=i*n.height):(h=i*e.height,f=r*n.width):s==="start"?f=n.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ie(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)J(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Sf(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/kf(n,i));let c=0,u=0,d,h,f,g,y,w,p,m,v,_,b;for(d=0;d<n;d+=l){if(g=e[d].label,y=this._resolveTickFontOptions(d),r.font=w=y.string,p=s[w]=s[w]||{data:{},gc:[]},m=y.lineHeight,v=_=0,!J(g)&&!le(g))v=ua(r,p.data,p.gc,v,g),_=m;else if(le(g))for(h=0,f=g.length;h<f;++h)b=g[h],!J(b)&&!le(b)&&(v=ua(r,p.data,p.gc,v,b),_+=m);o.push(v),a.push(_),c=Math.max(v,c),u=Math.max(_,u)}Yk(s,n);const k=o.indexOf(c),C=a.indexOf(u),P=D=>({width:o[D]||0,height:a[D]||0});return{first:P(0),last:P(n-1),widest:P(k),highest:P(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return eb(this._alignToPixels?Un(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=Jk(this.getContext(),e,i))}return this.$context||(this.$context=qk(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=mn(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=kr(s),f=[],g=a.setContext(this.getContext()),y=g.display?g.width:0,w=y/2,p=function(ee){return Un(i,ee,y)};let m,v,_,b,k,C,P,D,A,I,O,R;if(o==="top")m=p(this.bottom),C=this.bottom-h,D=m-w,I=p(e.top)+w,R=e.bottom;else if(o==="bottom")m=p(this.top),I=e.top,R=p(e.bottom)-w,C=m+w,D=this.top+h;else if(o==="left")m=p(this.right),k=this.right-h,P=m-w,A=p(e.left)+w,O=e.right;else if(o==="right")m=p(this.left),A=e.left,O=p(e.right)-w,k=m+w,P=this.left+h;else if(n==="x"){if(o==="center")m=p((e.top+e.bottom)/2+.5);else if(Y(o)){const ee=Object.keys(o)[0],ce=o[ee];m=p(this.chart.scales[ee].getPixelForValue(ce))}I=e.top,R=e.bottom,C=m+w,D=C+h}else if(n==="y"){if(o==="center")m=p((e.left+e.right)/2);else if(Y(o)){const ee=Object.keys(o)[0],ce=o[ee];m=p(this.chart.scales[ee].getPixelForValue(ce))}k=m-w,P=k-h,A=e.left,O=e.right}const F=q(r.ticks.maxTicksLimit,d),Z=Math.max(1,Math.ceil(d/F));for(v=0;v<d;v+=Z){const ee=this.getContext(v),ce=s.setContext(ee),T=a.setContext(ee),j=ce.lineWidth,$=ce.color,G=T.dash||[],te=T.dashOffset,at=ce.tickWidth,_e=ce.tickColor,lt=ce.tickBorderDash||[],Te=ce.tickBorderDashOffset;_=Kk(this,v,l),_!==void 0&&(b=Un(i,_,j),c?k=P=A=O=b:C=D=I=R=b,f.push({tx1:k,ty1:C,tx2:P,ty2:D,x1:A,y1:I,x2:O,y2:R,width:j,color:$,borderDash:G,borderDashOffset:te,tickWidth:at,tickColor:_e,tickBorderDash:lt,tickBorderDashOffset:Te}))}return this._ticksLength=d,this._borderValue=m,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=kr(i.grid),f=h+u,g=d?-u:f,y=-mn(this.labelRotation),w=[];let p,m,v,_,b,k,C,P,D,A,I,O,R="middle";if(r==="top")k=this.bottom-g,C=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+g,C=this._getXAxisLabelAlignment();else if(r==="left"){const Z=this._getYAxisLabelAlignment(h);C=Z.textAlign,b=Z.x}else if(r==="right"){const Z=this._getYAxisLabelAlignment(h);C=Z.textAlign,b=Z.x}else if(n==="x"){if(r==="center")k=(e.top+e.bottom)/2+f;else if(Y(r)){const Z=Object.keys(r)[0],ee=r[Z];k=this.chart.scales[Z].getPixelForValue(ee)+f}C=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")b=(e.left+e.right)/2-f;else if(Y(r)){const Z=Object.keys(r)[0],ee=r[Z];b=this.chart.scales[Z].getPixelForValue(ee)}C=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const F=this._getLabelSizes();for(p=0,m=a.length;p<m;++p){v=a[p],_=v.label;const Z=s.setContext(this.getContext(p));P=this.getPixelForTick(p)+s.labelOffset,D=this._resolveTickFontOptions(p),A=D.lineHeight,I=le(_)?_.length:1;const ee=I/2,ce=Z.color,T=Z.textStrokeColor,j=Z.textStrokeWidth;let $=C;o?(b=P,C==="inner"&&(p===m-1?$=this.options.reverse?"left":"right":p===0?$=this.options.reverse?"right":"left":$="center"),r==="top"?c==="near"||y!==0?O=-I*A+A/2:c==="center"?O=-F.highest.height/2-ee*A+A:O=-F.highest.height+A/2:c==="near"||y!==0?O=A/2:c==="center"?O=F.highest.height/2-ee*A:O=F.highest.height-I*A,d&&(O*=-1),y!==0&&!Z.showLabelBackdrop&&(b+=A/2*Math.sin(y))):(k=P,O=(1-I)*A/2);let G;if(Z.showLabelBackdrop){const te=ze(Z.backdropPadding),at=F.heights[p],_e=F.widths[p];let lt=O-te.top,Te=0-te.left;switch(R){case"middle":lt-=at/2;break;case"bottom":lt-=at;break}switch(C){case"center":Te-=_e/2;break;case"right":Te-=_e;break;case"inner":p===m-1?Te-=_e:p>0&&(Te-=_e/2);break}G={left:Te,top:lt,width:_e+te.width,height:at+te.height,color:Z.backdropColor}}w.push({label:_,font:D,textOffset:O,options:{rotation:y,color:ce,strokeColor:T,strokeWidth:j,textAlign:$,textBaseline:R,translation:[b,k],backdrop:G}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-mn(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=Un(e,this.left,o)-o/2,u=Un(e,this.right,a)+a/2,d=h=l):(d=Un(e,this.top,o)-o/2,h=Un(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Zu(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;li(i,c,0,u,l,a)}r&&ed(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=we(i.font),o=ze(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Y(n)?(l+=o.bottom,le(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=Qk(this,l,n,a);li(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:Gk(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=q(e.grid&&e.grid.z,-1),r=q(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==gi.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return we(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class co{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;eS(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,Xk(e,o,i),this.override&&pe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in pe[r]&&(delete pe[r][i],this.override&&delete ai[i])}}function Xk(t,e,n){const i=ms(Object.create(null),[n?pe.get(n):{},pe.get(e),t.defaults]);pe.set(e,i),t.defaultRoutes&&Zk(e,t.defaultRoutes),t.descriptors&&pe.describe(e,t.descriptors)}function Zk(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");pe.route(s,r,l,a)})}function eS(t){return"id"in t&&"defaults"in t}class tS{constructor(){this.controllers=new co(Jr,"datasets",!0),this.elements=new co(Ln,"elements"),this.plugins=new co(Object,"plugins"),this.scales=new co(gi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Q(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=qu(e);ie(i["before"+r],[],i),n[e](i),ie(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Mt=new tS;class nS{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(ie(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){J(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=q(i.options&&i.options.plugins,{}),s=iS(i);return r===!1&&!n?[]:sS(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function iS(t){const e={},n=[],i=Object.keys(Mt.plugins.items);for(let s=0;s<i.length;s++)n.push(Mt.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function rS(t,e){return!e&&t===!1?null:t===!0?{}:t}function sS(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=rS(i[l],r);c!==null&&s.push({plugin:a,options:oS(t.config,{plugin:a,local:n[l]},c,o)})}return s}function oS(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Nc(t,e){const n=pe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function aS(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function lS(t,e){return t===e?"_index_":"_value_"}function Pf(t){if(t==="x"||t==="y"||t==="r")return t}function cS(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Uc(t,...e){if(Pf(t))return t;for(const n of e){const i=n.axis||cS(n.position)||t.length>1&&Pf(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Ef(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function uS(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Ef(t,"x",n[0])||Ef(t,"y",n[0])}return{}}function dS(t,e){const n=ai[t.type]||{scales:{}},i=e.scales||{},r=Nc(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Y(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Uc(o,a,uS(o,t),pe.scales[a.type]),c=lS(l,r),u=n.scales||{};s[o]=Kr(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Nc(a,e),u=(ai[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=aS(d,l),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),Kr(s[f],[{axis:h},i[f],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Kr(a,[pe.scales[a.type],pe.scale])}),s}function g0(t){const e=t.options||(t.options={});e.plugins=q(e.plugins,{}),e.scales=dS(t,e)}function m0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function hS(t){return t=t||{},t.data=m0(t.data),g0(t),t}const Of=new Map,y0=new Set;function uo(t,e){let n=Of.get(t);return n||(n=e(),Of.set(t,n),y0.add(n)),n}const Sr=(t,e,n)=>{const i=rr(e,n);i!==void 0&&t.add(i)};class fS{constructor(e){this._config=hS(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=m0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),g0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return uo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return uo(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return uo(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return uo(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>Sr(l,e,d))),u.forEach(d=>Sr(l,r,d)),u.forEach(d=>Sr(l,ai[s]||{},d)),u.forEach(d=>Sr(l,pe,d)),u.forEach(d=>Sr(l,Fc,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),y0.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ai[n]||{},pe.datasets[n]||{},{type:n},pe,Fc]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Tf(this._resolverCache,e,r);let l=o;if(gS(o,n)){s.$shared=!1,i=Mn(i)?i():i;const c=this.createResolver(e,i,a);l=sr(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Tf(this._resolverCache,e,i);return Y(n)?sr(s,n,void 0,r):s}}function Tf(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:td(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const pS=t=>Y(t)&&Object.getOwnPropertyNames(t).some(e=>Mn(t[e]));function gS(t,e){const{isScriptable:n,isIndexable:i}=t0(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Mn(a)||pS(a))||o&&le(a))return!0}return!1}var mS="4.4.8";const yS=["top","bottom","left","right","chartArea"];function Af(t,e){return t==="top"||t==="bottom"||yS.indexOf(t)===-1&&e==="x"}function Df(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function If(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ie(n&&n.onComplete,[t],e)}function vS(t){const e=t.chart,n=e.options.animation;ie(n&&n.onProgress,[t],e)}function v0(t){return rd()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Do={},Mf=t=>{const e=v0(t);return Object.values(Do).filter(n=>n.canvas===e).pop()};function wS(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function _S(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function ho(t,e,n){return t.options.clip?t[n]:e[n]}function xS(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:ho(n,e,"left"),right:ho(n,e,"right"),top:ho(i,e,"top"),bottom:ho(i,e,"bottom")}:e}class Ke{static register(...e){Mt.add(...e),Lf()}static unregister(...e){Mt.remove(...e),Lf()}constructor(e,n){const i=this.config=new fS(n),r=v0(e),s=Mf(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||$k(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Nx(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nS,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rb(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Do[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ut.listen(this,"complete",If),Ut.listen(this,"progress",vS),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return J(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Mt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ef(this.canvas,this.ctx),this}stop(){return Ut.stop(this),this}resize(e,n){Ut.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,sf(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ie(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Q(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Uc(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Q(s,o=>{const a=o.options,l=a.id,c=Uc(l,a),u=q(a.type,o.dtype);(a.position===void 0||Af(a.position,c)!==Af(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const h=Mt.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Q(r,(o,a)=>{o||delete i[a]}),Q(i,o=>{pt.configure(this,o,o.options),pt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Df("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Nc(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Mt.getController(a),{datasetElementType:c,dataElementType:u}=pe.datasets[a];Object.assign(l,{dataElementType:Mt.getElement(u),datasetElementType:c&&Mt.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Q(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Q(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Df("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Q(this.scales,e=>{pt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Vh(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;wS(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Vh(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;pt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Q(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Mn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ut.has(this)?this.attached&&!Ut.running(this)&&Ut.start(this):(this.draw(),If({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=xS(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Zu(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&ed(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return zi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=yk.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=pi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);ys(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ut.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ef(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Do[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Q(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Q(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Q(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!oa(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=Kx(e),c=_S(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ie(s.onHover,[e,a,this],this),l&&ie(s.onClick,[e,a,this],this));const u=!oa(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}B(Ke,"defaults",pe),B(Ke,"instances",Do),B(Ke,"overrides",ai),B(Ke,"registry",Mt),B(Ke,"version",mS),B(Ke,"getChart",Mf);function Lf(){return Q(Ke.instances,t=>t._plugins.invalidate())}function w0(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,u=i+d):(d=s/2,a=n-d,l=n+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function yn(t,e,n,i){return t?0:St(e,n,i)}function bS(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=e0(i);return{t:yn(r.top,s.top,0,n),r:yn(r.right,s.right,0,e),b:yn(r.bottom,s.bottom,0,n),l:yn(r.left,s.left,0,e)}}function kS(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=ei(r),o=Math.min(e,n),a=t.borderSkipped,l=i||Y(r);return{topLeft:yn(!l||a.top||a.left,s.topLeft,0,o),topRight:yn(!l||a.top||a.right,s.topRight,0,o),bottomLeft:yn(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:yn(!l||a.bottom||a.right,s.bottomRight,0,o)}}function SS(t){const e=w0(t),n=e.right-e.left,i=e.bottom-e.top,r=bS(t,n/2,i/2),s=kS(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Il(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&w0(t,i);return a&&(r||Ri(e,a.left,a.right))&&(s||Ri(n,a.top,a.bottom))}function CS(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function PS(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ml(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class Tn extends Ln{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=SS(this),a=CS(o.radius)?vs:PS;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Ml(o,n,s)),e.clip(),a(e,Ml(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Ml(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Il(this,e,n,i)}inXRange(e,n){return Il(this,e,null,n)}inYRange(e,n){return Il(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}B(Tn,"id","bar"),B(Tn,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),B(Tn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Rf=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},ES=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class zf extends Ln{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ie(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=we(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Rf(i,s);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((g,y)=>{const w=i+n/2+s.measureText(g.text).width;(y===0||c[c.length-1]+w+2*a>o)&&(d+=u,c[c.length-(y>0?0:1)]=0,f+=u,h++),l[y]={left:0,top:f,row:h,width:w,height:r},c[c.length-1]+=w+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,f=0,g=0,y=0;return this.legendItems.forEach((w,p)=>{const{itemWidth:m,itemHeight:v}=OS(i,n,s,w,r);p>0&&f+v+2*a>u&&(d+=h+a,c.push({width:h,height:f}),g+=h+a,y++,h=f=0),l[p]={left:g,top:f,col:y,width:m,height:v},h=Math.max(h,m),f+=v+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Yi(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Me(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Me(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Me(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Me(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zu(e,this),this._draw(),ed(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=pe.color,l=Yi(e.rtl,this.left,this.width),c=we(o.font),{padding:u}=o,d=c.size,h=d/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:g,boxHeight:y,itemHeight:w}=Rf(o,d),p=function(k,C,P){if(isNaN(g)||g<=0||isNaN(y)||y<0)return;r.save();const D=q(P.lineWidth,1);if(r.fillStyle=q(P.fillStyle,a),r.lineCap=q(P.lineCap,"butt"),r.lineDashOffset=q(P.lineDashOffset,0),r.lineJoin=q(P.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=q(P.strokeStyle,a),r.setLineDash(q(P.lineDash,[])),o.usePointStyle){const A={radius:y*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:D},I=l.xPlus(k,g/2),O=C+h;Xm(r,A,I,O,o.pointStyleWidth&&g)}else{const A=C+Math.max((d-y)/2,0),I=l.leftForLtr(k,g),O=ei(P.borderRadius);r.beginPath(),Object.values(O).some(R=>R!==0)?vs(r,{x:I,y:A,w:g,h:y,radius:O}):r.rect(I,A,g,y),r.fill(),D!==0&&r.stroke()}r.restore()},m=function(k,C,P){li(r,P.text,k,C+w/2,c,{strikethrough:P.hidden,textAlign:l.textAlign(P.textAlign)})},v=this.isHorizontal(),_=this._computeTitleHeight();v?f={x:Me(s,this.left+u,this.right-i[0]),y:this.top+u+_,line:0}:f={x:this.left+u,y:Me(s,this.top+_+u,this.bottom-n[0].height),line:0},s0(this.ctx,e.textDirection);const b=w+u;this.legendItems.forEach((k,C)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;const P=r.measureText(k.text).width,D=l.textAlign(k.textAlign||(k.textAlign=o.textAlign)),A=g+h+P;let I=f.x,O=f.y;l.setWidth(this.width),v?C>0&&I+A+u>this.right&&(O=f.y+=b,f.line++,I=f.x=Me(s,this.left+u,this.right-i[f.line])):C>0&&O+b>this.bottom&&(I=f.x=I+n[f.line].width+u,f.line++,O=f.y=Me(s,this.top+_+u,this.bottom-n[f.line].height));const R=l.x(I);if(p(R,O,k),I=sb(D,I+g+h,v?I+A:this.right,e.rtl),m(l.x(I),O,k),v)f.x+=A+u;else if(typeof k.text!="string"){const F=c.lineHeight;f.y+=_0(k,F)+u}else f.y+=b}),o0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=we(n.font),r=ze(n.padding);if(!n.display)return;const s=Yi(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Me(e.align,d,this.right-h);else{const g=this.columnSizes.reduce((y,w)=>Math.max(y,w.height),0);u=c+Me(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=Me(a,d,d+h);o.textAlign=s.textAlign(Qu(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,li(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=we(e.font),i=ze(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Ri(e,this.left,this.right)&&Ri(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ri(e,r.left,r.left+r.width)&&Ri(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!DS(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=ES(r,i);r&&!s&&ie(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&ie(n.onHover,[e,i,this],this)}else i&&ie(n.onClick,[e,i,this],this)}}function OS(t,e,n,i,r){const s=TS(i,t,e,n),o=AS(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function TS(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function AS(t,e,n){let i=t;return typeof e.text!="string"&&(i=_0(e,n)),i}function _0(t,e){const n=t.text?t.text.length:0;return e*n}function DS(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var As={id:"legend",_element:zf,start(t,e,n){const i=t.legend=new zf({ctx:t.ctx,options:n,chart:t});pt.configure(t,i,n),pt.addBox(t,i)},stop(t){pt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;pt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=ze(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class x0 extends Ln{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=le(i.text)?i.text.length:1;this._padding=ze(i.padding);const s=r*we(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Me(a,i,s),d=n+e,c=s-i):(o.position==="left"?(u=i+e,d=Me(a,r,n),l=Ce*-.5):(u=s-e,d=Me(a,n,r),l=Ce*.5),c=r-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=we(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);li(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:Qu(n.align),textBaseline:"middle",translation:[o,a]})}}function IS(t,e){const n=new x0({ctx:t.ctx,options:e,chart:t});pt.configure(t,n,e),pt.addBox(t,n),t.titleBlock=n}var Ds={id:"title",_element:x0,start(t,e,n){IS(t,n)},stop(t){const e=t.titleBlock;pt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;pt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mr={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Xx(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Dt(t,e){return e&&(le(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Bt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function MS(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function jf(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=we(e.bodyFont),c=we(e.titleFont),u=we(e.footerFont),d=s.length,h=r.length,f=i.length,g=ze(e.padding);let y=g.height,w=0,p=i.reduce((_,b)=>_+b.before.length+b.lines.length+b.after.length,0);if(p+=t.beforeBody.length+t.afterBody.length,d&&(y+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),p){const _=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=f*_+(p-f)*l.lineHeight+(p-1)*e.bodySpacing}h&&(y+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let m=0;const v=function(_){w=Math.max(w,n.measureText(_).width+m)};return n.save(),n.font=c.string,Q(t.title,v),n.font=l.string,Q(t.beforeBody.concat(t.afterBody),v),m=e.displayColors?o+2+e.boxPadding:0,Q(i,_=>{Q(_.before,v),Q(_.lines,v),Q(_.after,v)}),m=0,n.font=u.string,Q(t.footer,v),n.restore(),w+=g.width,{width:w,height:y}}function LS(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function RS(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function zS(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),RS(c,t,e,n)&&(c="center"),c}function $f(t,e,n){const i=n.yAlign||e.yAlign||LS(t,n);return{xAlign:n.xAlign||e.xAlign||zS(t,e,n,i),yAlign:i}}function jS(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function $S(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function Ff(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=ei(o);let g=jS(e,a);const y=$S(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+r:a==="right"&&(g+=Math.max(d,f)+r),{x:St(g,0,i.width-e.width),y:St(y,0,i.height-e.height)}}function fo(t,e,n){const i=ze(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Nf(t){return Dt([],Bt(t))}function FS(t,e,n){return pi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Uf(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const b0={beforeTitle:Nt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Nt,beforeBody:Nt,beforeLabel:Nt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return J(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Nt,afterBody:Nt,beforeFooter:Nt,footer:Nt,afterFooter:Nt};function We(t,e,n,i){const r=t[e].call(n,i);return typeof r=="undefined"?b0[e].call(n,i):r}class Bc extends Ln{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new a0(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=FS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=We(i,"beforeTitle",this,e),s=We(i,"title",this,e),o=We(i,"afterTitle",this,e);let a=[];return a=Dt(a,Bt(r)),a=Dt(a,Bt(s)),a=Dt(a,Bt(o)),a}getBeforeBody(e,n){return Nf(We(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Q(e,s=>{const o={before:[],lines:[],after:[]},a=Uf(i,s);Dt(o.before,Bt(We(a,"beforeLabel",this,s))),Dt(o.lines,We(a,"label",this,s)),Dt(o.after,Bt(We(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return Nf(We(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=We(i,"beforeFooter",this,e),s=We(i,"footer",this,e),o=We(i,"afterFooter",this,e);let a=[];return a=Dt(a,Bt(r)),a=Dt(a,Bt(s)),a=Dt(a,Bt(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(MS(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,i))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,i))),Q(a,u=>{const d=Uf(e.callbacks,u);r.push(We(d,"labelColor",this,u)),s.push(We(d,"labelPointStyle",this,u)),o.push(We(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Mr[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=jf(this,i),c=Object.assign({},a,l),u=$f(this.chart,i,c),d=Ff(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=ei(a),{x:h,y:f}=e,{width:g,height:y}=n;let w,p,m,v,_,b;return s==="center"?(_=f+y/2,r==="left"?(w=h,p=w-o,v=_+o,b=_-o):(w=h+g,p=w+o,v=_-o,b=_+o),m=w):(r==="left"?p=h+Math.max(l,u)+o:r==="right"?p=h+g-Math.max(c,d)-o:p=this.caretX,s==="top"?(v=f,_=v-o,w=p-o,m=p+o):(v=f+y,_=v+o,w=p+o,m=p-o),b=v),{x1:w,x2:p,x3:m,y1:v,y2:_,y3:b}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=Yi(i.rtl,this.x,this.width);for(e.x=fo(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=we(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=we(s.bodyFont),d=fo(this,"left",s),h=r.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+f;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(h,c)+c/2,p=g+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,tf(e,y,w,p),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,tf(e,y,w,p)}else{e.lineWidth=Y(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=r.leftForLtr(h,c),w=r.leftForLtr(r.xPlus(h,1),c-2),p=ei(o.borderRadius);Object.values(p).some(m=>m!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,vs(e,{x:y,y:g,w:c,h:l,radius:p}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),vs(e,{x:w,y:g+1,w:c-2,h:l-2,radius:p}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(y,g,c,l),e.strokeRect(y,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=we(i.bodyFont);let h=d.lineHeight,f=0;const g=Yi(i.rtl,this.x,this.width),y=function(P){n.fillText(P,g.x(e.x+f),e.y+h/2),e.y+=h+s},w=g.textAlign(o);let p,m,v,_,b,k,C;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=fo(this,w,i),n.fillStyle=i.bodyColor,Q(this.beforeBody,y),f=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,_=0,k=r.length;_<k;++_){for(p=r[_],m=this.labelTextColors[_],n.fillStyle=m,Q(p.before,y),v=p.lines,a&&v.length&&(this._drawColorBox(n,e,_,g,i),h=Math.max(d.lineHeight,l)),b=0,C=v.length;b<C;++b)y(v[b]),h=d.lineHeight;Q(p.after,y)}f=0,h=d.lineHeight,Q(this.afterBody,y),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Yi(i.rtl,this.x,this.width);for(e.x=fo(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=we(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:g}=ei(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Mr[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=jf(this,e),l=Object.assign({},o,this._size),c=$f(n,e,l),u=Ff(e,l,c,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ze(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),s0(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),o0(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!oa(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!oa(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Mr[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}B(Bc,"positioners",Mr);var Is={id:"tooltip",_element:Bc,positioners:Mr,afterInit(t,e,n){n&&(t.tooltip=new Bc({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:b0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const NS=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function US(t,e,n,i){const r=t.indexOf(e);if(r===-1)return NS(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const BS=(t,e)=>t===null?null:St(Math.round(t),0,e);function Bf(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ci extends gi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(J(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:US(i,e,q(n,e),this._addedLabels),BS(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Bf.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}B(ci,"id","category"),B(ci,"defaults",{ticks:{callback:Bf}});function WS(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=s||1,g=u-1,{min:y,max:w}=e,p=!J(o),m=!J(a),v=!J(c),_=(w-y)/(d+1);let b=Yh((w-y)/g/f)*f,k,C,P,D;if(b<1e-14&&!p&&!m)return[{value:y},{value:w}];D=Math.ceil(w/b)-Math.floor(y/b),D>g&&(b=Yh(D*b/g/f)*f),J(l)||(k=Math.pow(10,l),b=Math.ceil(b*k)/k),r==="ticks"?(C=Math.floor(y/b)*b,P=Math.ceil(w/b)*b):(C=y,P=w),p&&m&&s&&Gx((a-o)/s,b/1e3)?(D=Math.round(Math.min((a-o)/b,u)),b=(a-o)/D,C=o,P=a):v?(C=p?o:C,P=m?a:P,D=c-1,b=(P-C)/D):(D=(P-C)/b,Oo(D,Math.round(D),b/1e3)?D=Math.round(D):D=Math.ceil(D));const A=Math.max(qh(b),qh(C));k=Math.pow(10,J(l)?A:l),C=Math.round(C*k)/k,P=Math.round(P*k)/k;let I=0;for(p&&(h&&C!==o?(n.push({value:o}),C<o&&I++,Oo(Math.round((C+I*b)*k)/k,o,Wf(o,_,t))&&I++):C<o&&I++);I<D;++I){const O=Math.round((C+I*b)*k)/k;if(m&&O>a)break;n.push({value:O})}return m&&h&&P!==a?n.length&&Oo(n[n.length-1].value,a,Wf(a,_,t))?n[n.length-1].value=a:n.push({value:a}):(!m||P===a)&&n.push({value:P}),n}function Wf(t,e,{horizontal:n,minRotation:i}){const r=mn(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class fa extends gi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return J(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=On(r),c=On(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=WS(r,s);return e.bounds==="ticks"&&Vm(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Xu(e,this.chart.options.locale,this.options.ticks.format)}}class ui extends fa{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ke(e)?e:0,this.max=ke(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=mn(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}B(ui,"id","linear"),B(ui,"defaults",{ticks:{callback:Fa.formatters.numeric}});const _s=t=>Math.floor(gn(t)),Wn=(t,e)=>Math.pow(10,_s(t)+e);function Hf(t){return t/Math.pow(10,_s(t))===1}function Vf(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function HS(t,e){const n=e-t;let i=_s(n);for(;Vf(t,e,i)>10;)i++;for(;Vf(t,e,i)<10;)i--;return Math.min(i,_s(t))}function VS(t,{min:e,max:n}){e=Ze(t.min,e);const i=[],r=_s(e);let s=HS(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),h=Ze(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<n;)i.push({value:h,major:Hf(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;const f=Ze(t.max,h);return i.push({value:f,major:Hf(f),significand:d}),i}class Kf extends gi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=fa.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return ke(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ke(e)?Math.max(0,e):null,this.max=ke(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ke(this._userMin)&&(this.min=e===Wn(this.min,0)?Wn(this.min,-1):Wn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Wn(i,-1)),o(Wn(r,1)))),i<=0&&s(Wn(r,-1)),r<=0&&o(Wn(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=VS(n,this);return e.bounds==="ticks"&&Vm(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Xu(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=gn(e),this._valueRange=gn(this.max)-gn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(gn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}B(Kf,"id","logarithmic"),B(Kf,"defaults",{ticks:{callback:Fa.formatters.logarithmic,major:{enabled:!0}}});function Wc(t){const e=t.ticks;if(e.display&&t.display){const n=ze(e.backdropPadding);return q(e.font&&e.font.size,pe.font.size)+n.height}return 0}function KS(t,e,n){return n=le(n)?n:[n],{w:gb(t,e.string,n),h:n.length*e.lineHeight}}function Yf(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function YS(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Ce/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+r[l],a),d=we(c.font),h=KS(t.ctx,d,t._pointLabels[l]);i[l]=h;const f=Lt(t.getIndexAngle(l)+a),g=Math.round(Ju(f)),y=Yf(g,u.x,h.w,0,180),w=Yf(g,u.y,h.h,90,270);qS(n,e,f,y,w)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=QS(t,i,r)}function qS(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function JS(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(Ju(Lt(l.angle+nt))),u=e2(l.y,a.h,c),d=XS(c),h=ZS(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function GS(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(zi({x:n,y:i},e)||zi({x:n,y:s},e)||zi({x:r,y:i},e)||zi({x:r,y:s},e))}function QS(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Wc(s)/2,additionalAngle:o?Ce/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const d=JS(t,u,l);i.push(d),a==="auto"&&(d.visible=GS(d,c),d.visible&&(c=d))}return i}function XS(t){return t===0||t===180?"center":t<180?"left":"right"}function ZS(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function e2(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function t2(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!J(a)){const l=ei(e.borderRadius),c=ze(e.backdropPadding);t.fillStyle=a;const u=i-c.left,d=r-c.top,h=s-i+c.width,f=o-r+c.height;Object.values(l).some(g=>g!==0)?(t.beginPath(),vs(t,{x:u,y:d,w:h,h:f,radius:l}),t.fill()):t.fillRect(u,d,h,f)}}function n2(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));t2(n,o,s);const a=we(o.font),{x:l,y:c,textAlign:u}=s;li(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function k0(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Ft);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function i2(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),k0(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function r2(t,e,n){return pi(t,{label:n,index:e,type:"pointLabel"})}class po extends fa{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ze(Wc(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ke(e)&&!isNaN(e)?e:0,this.max=ke(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Wc(this.options))}generateTickLabels(e){fa.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=ie(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?YS(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=Ft/(this._pointLabels.length||1),i=this.options.startAngle||0;return Lt(e*n+mn(i))}getDistanceFromCenterForValue(e){if(J(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(J(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return r2(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-nt+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),k0(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&n2(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),f=r.setContext(h),g=s.setContext(h);i2(this,f,l,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=we(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=ze(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}li(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}B(po,"id","radialLinear"),B(po,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Fa.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),B(po,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),B(po,"descriptors",{angleLines:{_fallback:"grid"}});const Ua={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ye=Object.keys(Ua);function qf(t,e){return t-e}function Jf(t,e){if(J(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ke(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(ca(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Gf(t,e,n,i){const r=Ye.length;for(let s=Ye.indexOf(t);s<r-1;++s){const o=Ua[Ye[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Ye[s]}return Ye[r-1]}function s2(t,e,n,i,r){for(let s=Ye.length-1;s>=Ye.indexOf(n);s--){const o=Ye[s];if(Ua[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Ye[n?Ye.indexOf(n):0]}function o2(t){for(let e=Ye.indexOf(t)+1,n=Ye.length;e<n;++e)if(Ua[Ye[e]].common)return Ye[e]}function Qf(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Gu(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function a2(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Xf(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:a2(t,i,r,n)}class pa extends gi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new hk._date(e.adapters.date);r.init(n),Kr(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Jf(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=ke(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=ke(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=nb(r,s,o);return this._unit=n.unit||(i.autoSkip?Gf(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):s2(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:o2(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Xf(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=St(n,0,o),i=St(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Gf(s.minUnit,n,i,this._getLabelCapacity(n)),a=q(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=ca(l)||l===!0,u={};let d=n,h,f;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<i;h=+e.add(h,a,o),f++)Qf(u,h,g);return(h===i||r.bounds==="ticks"||f===1)&&Qf(u,h,g),Object.keys(u).sort(qf).map(y=>+y)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return ie(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=i[n],f=c&&d&&h&&h.major;return this._adapter.format(e,r||(f?d:u))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=mn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Xf(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(Jf(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Ym(e.sort(qf))}}B(pa,"id","time"),B(pa,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function go(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=$c(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=$c(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Zf extends pa{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=go(n,this.min),this._tableRange=go(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(go(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return go(this._table,i*this._tableRange+this._minPos,!0)}}B(Zf,"id","timeseries"),B(Zf,"defaults",pa.defaults);const S0="label";function ep(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function l2(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function C0(t,e){t.labels=e}function P0(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S0;const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function c2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S0;const n={labels:[],datasets:[]};return C0(n,t.labels),P0(n,t.datasets,e),n}function u2(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,f=L.exports.useRef(null),g=L.exports.useRef(null),y=()=>{!f.current||(g.current=new Ke(f.current,{type:o,data:c2(a,s),options:l&&{...l},plugins:c}),ep(e,g.current))},w=()=>{ep(e,null),g.current&&(g.current.destroy(),g.current=null)};return L.exports.useEffect(()=>{!r&&g.current&&l&&l2(g.current,l)},[r,l]),L.exports.useEffect(()=>{!r&&g.current&&C0(g.current.config.data,a.labels)},[r,a.labels]),L.exports.useEffect(()=>{!r&&g.current&&a.datasets&&P0(g.current.config.data,a.datasets,s)},[r,a.datasets]),L.exports.useEffect(()=>{!g.current||(r?(w(),setTimeout(y)):g.current.update(d))},[r,l,a.labels,a.datasets,d]),L.exports.useEffect(()=>{!g.current||(w(),setTimeout(y))},[o]),L.exports.useEffect(()=>(y(),()=>w()),[]),x("canvas",{ref:f,role:"img",height:n,width:i,...h,children:u})}const d2=L.exports.forwardRef(u2);function h2(t,e){return Ke.register(e),L.exports.forwardRef((n,i)=>x(d2,{...n,ref:i,type:t}))}const Ba=h2("bar",To);Ke.register(ci,ui,Tn,Ds,Is,As);Ke.register(ci,ui,Tn,Ds,Is,As);const f2=({closedOpportunities:t=[]})=>{const[e,n]=L.exports.useState(0),[i,r]=L.exports.useState({labels:[],datasets:[]}),[s,o]=L.exports.useState([]),a=L.exports.useRef(null);L.exports.useEffect(()=>{if(console.log("[SalesCycleChart] closedOpportunities:",t==null?void 0:t.length),t&&t.length>0){const d=[...t].sort((g,y)=>new Date(y.actualclosedate)-new Date(g.actualclosedate)).slice(0,15),h=d.map(g=>{const y=new Date(g.createdon),w=new Date(g.actualclosedate);return Math.floor((w-y)/(1e3*60*60*24))});(async()=>{const g=d.map(async(_,b)=>{const k=await Vi(_.opportunityid);return{name:_.name||`Opportunity ${b+1}`,description:_.description||"",value:_.estimatedvalue||_.totalamount||0,status:_.statecode===0?"Open":_.statecode===1?"Won":"Lost",id:_.opportunityid,daysOpen:Math.floor((new Date(_.actualclosedate)-new Date(_.createdon))/864e5),url:k}}),y=await Promise.all(g),w=d.map((_,b)=>_.name?_.name.length>10?_.name.substring(0,10)+"...":_.name:`Opp ${b+1}`),p=[...h],m=d.map(_=>_.statecode===1?"rgba(93, 182, 117, 0.7)":_.statecode===2?"rgba(199, 117, 93, 0.7)":"rgba(229, 229, 229, 0.7)");o(y);const v=Math.round(h.reduce((_,b)=>_+b,0)/(h.length||1));console.log("Average closing time calculated:",v,"days"),n(v),r({labels:w,datasets:[{label:"Days to Close",data:p,backgroundColor:m,borderRadius:4,borderSkipped:!1,barThickness:10}]})})()}},[t]);const l=d=>{if(!a.current)return;const f=a.current.getElementsAtEventForMode(d.nativeEvent,"nearest",{intersect:!0},!1);if(f.length===0)return;const g=f[0].index,y=s[g];y&&y.url?window.open(y.url,"_blank"):y&&y.id&&Vi(y.id).then(w=>{w&&window.open(w,"_blank")}).catch(w=>{console.error("Error generating URL:",w)})},c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(d){const h=d[0].dataIndex,f=s[h];return f?f.name:`Opportunity ${h+1}`},label:function(d){const h=d.dataIndex,f=s[h];if(!f)return`${d.raw} days`;const g=[`Days Open: ${f.daysOpen}`,`Value: $${f.value.toLocaleString()}`,`Status: ${f.status}`];return f.id&&g.push(`ID: ${f.id}`),g.push("Click to open opportunity"),g}}}},scales:{y:{beginAtZero:!0,grid:{drawBorder:!1},ticks:{font:{size:12}}},x:{grid:{display:!1},ticks:{font:{size:10},maxRotation:45,minRotation:45}}},animation:{duration:500},onHover:(d,h)=>{d.native&&(d.native.target.style.cursor=h.length?"pointer":"default")}},u={id:"averageLine",afterDraw:d=>{const h=e,f=d.ctx,g=d.scales.y,y=d.scales.x;if(g&&y){const w=g.getPixelForValue(h);f.save(),f.beginPath(),f.moveTo(y.left,w),f.lineTo(y.right,w),f.lineWidth=1,f.strokeStyle="#2684ff",f.stroke(),f.restore()}}};return x("div",{children:S("div",{style:{marginBottom:"16px",borderRadius:"8px",padding:"16px"},children:[x("div",{style:{fontSize:"14px",color:"#333",marginBottom:"16px"},children:"Sales Cycle Length - Last 15 Closed Opportunities"}),x("div",{style:{height:250,position:"relative"},children:i.datasets&&i.datasets[0]&&i.datasets[0].data&&i.datasets[0].data.length>0?x(Ba,{ref:a,data:i,options:c,plugins:[u],onClick:l}):x("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#888",fontStyle:"italic"},children:"No closed opportunity data available"})}),S("div",{style:{display:"flex",alignItems:"center",marginTop:"16px",paddingTop:"8px",borderTop:"1px solid #e0e0e0"},children:[x("div",{style:{width:"16px",height:"2px",backgroundColor:"#2684ff",marginRight:"6px"}}),S("div",{style:{fontSize:"12px",color:"#666"},children:["Average: ",e," days"]})]})]})})},tp=t=>t>=80?"#4caf50":t>=50?"#2196f3":t>=30?"#ff9800":"#f44336",p2=({closedOpportunities:t=[]})=>{const{l3mWinRate:e,l12mWinRate:n,l3mCount:i,l12mCount:r,l3mWonCount:s,l12mWonCount:o,l3mTrend:a,l12mTrend:l}=L.exports.useMemo(()=>{if(console.log("[WinRate] Number of closed opportunities:",(t==null?void 0:t.length)||0),t&&t.length>0&&console.log("[WinRate] First opportunity sample:",{actualclosedate:t[0].actualclosedate,createdon:t[0].createdon,statecode:t[0].statecode}),!t||t.length===0)return console.log("[WinRate] No closed opportunities data available"),{l3mWinRate:0,l12mWinRate:0,l3mCount:0,l12mCount:0,l3mWonCount:0,l12mWonCount:0};const u=new Date,d=new Date;d.setMonth(u.getMonth()-3);const h=new Date;h.setMonth(u.getMonth()-12),console.log("[WinRate] Date ranges:",{now:u.toISOString(),threeMonthsAgo:d.toISOString(),twelveMonthsAgo:h.toISOString()});const f=t.filter(R=>{if(!R.actualclosedate)return console.log("[WinRate] Opportunity missing actualclosedate:",R.opportunityid),!1;try{const F=new Date(R.actualclosedate);return F>=d&&F<=u}catch(F){return console.error("[WinRate] Error parsing date:",F),!1}}),g=t.filter(R=>{if(!R.actualclosedate)return!1;try{const F=new Date(R.actualclosedate);return F>=h&&F<=u}catch(F){return console.error("[WinRate] Error parsing date:",F),!1}});console.log("[WinRate] Filtered opportunities:",{l3mCount:f.length,l12mCount:g.length}),f.length>0&&console.log("[WinRate] Sample L3M opportunity statecode:",f[0].statecode,"type:",typeof f[0].statecode);const y=f.filter(R=>R.statecode===1||R.statecode==="1").length,w=f.length>0?Math.round(y/f.length*100):0,p=new Date;p.setMonth(u.getMonth()-6);const m=t.filter(R=>{if(!R.actualclosedate)return!1;try{const F=new Date(R.actualclosedate);return F>=p&&F<d}catch{return!1}}),v=m.filter(R=>R.statecode===1||R.statecode==="1").length,_=m.length>0?Math.round(v/m.length*100):0,b=w-_;console.log("[WinRate] Trend calculation:",{currentPeriod:`${y}/${f.length} = ${w}%`,previousPeriod:`${v}/${m.length} = ${_}%`,trend:b});const k=g.filter(R=>R.statecode===1||R.statecode==="1").length,C=g.length>0?Math.round(k/g.length*100):0,P=new Date;P.setMonth(u.getMonth()-24);const D=t.filter(R=>{if(!R.actualclosedate)return!1;try{const F=new Date(R.actualclosedate);return F>=P&&F<h}catch{return!1}}),A=D.filter(R=>R.statecode===1||R.statecode==="1").length,I=D.length>0?Math.round(A/D.length*100):0,O=C-I;return console.log("[WinRate] L12M Trend calculation:",{currentPeriod:`${k}/${g.length} = ${C}%`,previousPeriod:`${A}/${D.length} = ${I}%`,trend:O}),console.log("[WinRate] Calculation results:",{l3mWonCount:y,l3mWinRate:w,l12mWonCount:k,l12mWinRate:C}),{l3mWinRate:w,l12mWinRate:C,l3mCount:f.length,l12mCount:g.length,l3mWonCount:y,l12mWonCount:k,l3mTrend:b,l12mTrend:O}},[t]),c=u=>!u||u===0?x("span",{style:{fontSize:"10px",marginLeft:"4px",color:"#757575"},children:"="}):u>0?S("span",{style:{fontSize:"10px",marginLeft:"4px",color:"#4caf50"},children:["\u2191 ",u,"% from previous period"]}):S("span",{style:{fontSize:"10px",marginLeft:"4px",color:"#f44336"},children:["\u2193 ",Math.abs(u),"% from previous period"]});return S("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",justifyContent:"space-between"},children:[S("div",{style:{flex:1,backgroundColor:"#f5f5f5",borderRadius:"10px",padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[S("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[x("div",{style:{fontSize:"13px",color:"#666"},children:"L3M Win Rate"}),S("div",{style:{fontSize:"16px",fontWeight:"bold"},children:[e,"%"]})]}),x("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden",marginBottom:"4px"},children:x("div",{style:{height:"100%",width:`${Math.min(e,100)}%`,backgroundColor:tp(e),borderRadius:"2px"}})}),S("div",{style:{fontSize:"10px",color:"#666",textAlign:"right",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[x("div",{children:i>0?`Won ${s} of ${i} opportunities`:"No data in period"}),i>0&&x("div",{style:{marginTop:"2px"},children:c(a)})]})]}),S("div",{style:{flex:1,backgroundColor:"#f5f5f5",borderRadius:"10px",padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[S("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[x("div",{style:{fontSize:"13px",color:"#666"},children:"L12M Win Rate"}),S("div",{style:{fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center"},children:[n,"%"]})]}),x("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden",marginBottom:"4px"},children:x("div",{style:{height:"100%",width:`${Math.min(n,100)}%`,backgroundColor:tp(n),borderRadius:"2px"}})}),S("div",{style:{fontSize:"10px",color:"#666",textAlign:"right",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[x("div",{children:r>0?`Won ${o} of ${r} opportunities`:"No data in period"}),r>0&&x("div",{style:{marginTop:"2px"},children:c(l)})]})]})]})};let Cr=null;const E0=async()=>{if(Cr)return Cr;const t=await Hi();if(!t)throw console.error("[API] Cannot create base URL: Organization ID not found"),new Error("[API] Cannot determine organization ID. Please navigate to Dynamics CRM first.");return Cr=`https://${t}.crm.dynamics.com/api/data/v9.2`,console.log(`[API] Using Dynamics API base URL: ${Cr}`),Cr},g2=t=>{if(!t)throw console.error("[API] No token provided for API request"),new Error("[API] Authentication token missing");const e=t.startsWith("Bearer ")?t:`Bearer ${t}`;return console.log(`[API] Token format: ${e.substring(0,16)}...`),{Authorization:e,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0","Content-Type":"application/json"}},m2=async(t,e)=>{if(console.log(`[API] ${e} response status: ${t.status}`),t.status===401)throw console.error(`[API] Authentication failed (401) during ${e}`),new Error("[API] Authentication failed. Please log in again.");if(!t.ok){let n="";try{const i=await t.json();n=JSON.stringify(i)}catch{n=await t.text()}throw console.error(`[API] API error during ${e}: ${t.status} - ${n}`),new Error(`[API] Failed to ${e}: ${t.status} - ${n}`)}return await t.json()},y2=async t=>{try{const e=await E0();console.log(`[API] Fetching current user with WhoAmI endpoint: ${e}/WhoAmI`);const n=await fetch(`${e}/WhoAmI`,{method:"GET",headers:g2(t)}),i=await m2(n,"fetch current user");if(console.log("[API] WhoAmI response:",JSON.stringify(i,null,2)),!i.UserId)throw console.error("[API] UserId not found in WhoAmI response:",i),new Error("[API] User ID not found in response");return console.log(`[API] Current user ID: ${i.UserId}`),i.UserId}catch(e){throw console.error("[API] Error in getCurrentUserId:",e),e}},v2=async t=>{var e;try{const n=await E0();if(!n)throw new Error("Cannot fetch activities: Organization ID not found");const i=await y2(t);if(!i)throw new Error("Could not determine current user ID");console.log(`[API] Fetching activities for user ${i} for the last 12 months...`);const r=new Date;r.setMonth(r.getMonth()-12);const s=r.toISOString(),o=`${n}/activitypointers?$filter=_createdby_value eq ${i} and createdon ge ${s}&$select=activityid,subject,activitytypecode,createdon,scheduledstart,scheduledend&$orderby=createdon desc&$top=5000`;console.log(`[API] User activities URL: ${o}`);const a=await fetch(o,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(a.status===401)throw console.warn("[API] Authentication token expired or invalid"),new Error("Authentication failed. Please log in again.");if(!a.ok){let c="";try{const u=await a.json();c=JSON.stringify(u)}catch{c=await a.text()}throw console.error(`[API] API Error: ${a.status}`,c),new Error(`Failed to fetch user activities: ${a.status} - ${c}`)}const l=await a.json();return console.log(`[API] Received ${((e=l.value)==null?void 0:e.length)||0} user activities`),l.value&&l.value.length>0&&console.log("[API] Sample user activity:",{id:l.value[0].activityid,type:l.value[0].activitytypecode,createdon:l.value[0].createdon}),l.value||[]}catch(n){throw console.error("[API] Error fetching user activities:",n),n}};Ke.register(ci,ui,Tn,Ds,Is,As);const w2=({accessToken:t})=>{const[e,n]=L.exports.useState({labels:[],datasets:[]}),[i,r]=L.exports.useState(!0),[s,o]=L.exports.useState(null);L.exports.useEffect(()=>{(async()=>{if(!t){o("No access token available"),r(!1);return}try{r(!0);const h=await v2(t),f=a(),g=c(h,f);n(g)}catch(h){console.error("Error fetching user activities:",h),o("Failed to load activity data. Please try again later.")}finally{r(!1)}})()},[t]);const a=()=>{const d=[],h=new Date,f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let g=11;g>=0;g--){const y=new Date;y.setMonth(h.getMonth()-g),d.push(`${f[y.getMonth()]} ${y.getFullYear()}`)}return d},l=d=>{var w,p,m;if(!d)return null;const h=v=>{if(!v)return null;try{const _=new Date(v);return isNaN(_.getTime())?null:_}catch(_){return console.warn("Error parsing date:",v,_),null}},f=h(d.createdon),g=h(d.scheduledstart),y=h(d.actualstart);return((w=d.activitytypecode)==null?void 0:w.toLowerCase())==="appointment"||((p=d.activitytypecode)==null?void 0:p.toLowerCase())==="meeting"?y||g||f:((m=d.activitytypecode)==null?void 0:m.toLowerCase())==="task"&&(g||y)||f},c=(d,h)=>{const f={appointment:{label:"Meetings",color:"rgba(66, 133, 244, 0.7)"},email:{label:"Emails",color:"rgba(15, 157, 88, 0.7)"},phonecall:{label:"Calls",color:"rgba(244, 180, 0, 0.7)"},task:{label:"Tasks",color:"rgba(219, 68, 55, 0.7)"}},g={};Object.keys(f).forEach(p=>{g[p]=Array(h.length).fill(0)});const y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];d.forEach(p=>{var b;const m=l(p);if(!m)return;const v=`${y[m.getMonth()]} ${m.getFullYear()}`,_=h.indexOf(v);if(_>=0){const k=(b=p.activitytypecode)==null?void 0:b.toLowerCase();g[k]&&g[k][_]++}});const w=Object.keys(f).map(p=>({label:f[p].label,data:g[p],backgroundColor:f[p].color,borderWidth:1,borderRadius:4}));return{labels:h,datasets:w}},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12,font:{size:10}}},title:{display:!0,text:"Activity Trends (Last 12 Months)",font:{size:14}}},scales:{x:{stacked:!0,grid:{display:!1},ticks:{font:{size:10}}},y:{stacked:!0,beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{precision:0,font:{size:10}}}}};return i?x("div",{style:{padding:"20px",textAlign:"center",backgroundColor:"#fff",borderRadius:"8px",height:"300px",display:"flex",alignItems:"center",justifyContent:"center"},children:x("div",{children:"Loading activity data..."})}):s?x("div",{style:{padding:"20px",textAlign:"center",backgroundColor:"#fff",color:"#d32f2f",borderRadius:"8px",border:"1px solid #ffcdd2",height:"300px",display:"flex",alignItems:"center",justifyContent:"center"},children:x("div",{children:s})}):x("div",{style:{padding:"16px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:x("div",{style:{height:"300px"},children:x(Ba,{options:u,data:e})})})};Ke.register(ci,ui,Tn,Ds,Is,As);const _2=({closedOpportunities:t=[]})=>{const e=()=>{const r=[],s=new Date,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let a=11;a>=0;a--){const l=new Date;l.setMonth(s.getMonth()-a),r.push(`${o[l.getMonth()]} ${l.getFullYear()}`)}return r},n=L.exports.useMemo(()=>{if(console.log("[WonLostChart] Processing closed opportunities:",(t==null?void 0:t.length)||0),!t||t.length===0)return{labels:e(),datasets:[{label:"Won",data:Array(12).fill(0),backgroundColor:"rgba(93, 182, 117, 0.7)",borderRadius:4,stack:"stack0"},{label:"Lost",data:Array(12).fill(0),backgroundColor:"rgba(199, 117, 93, 0.7)",borderRadius:4,stack:"stack0"}]};const r=e(),s=Array(12).fill(0),o=Array(12).fill(0),a=new Date,l=new Date;l.setMonth(a.getMonth()-12);const c=t.filter(d=>{if(!d.actualclosedate)return!1;try{const h=new Date(d.actualclosedate);return h>=l&&h<=a}catch(h){return console.error("[WonLostChart] Error parsing date:",h),!1}});console.log("[WonLostChart] Opportunities in last 12 months:",c.length);const u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return c.forEach(d=>{try{const h=new Date(d.actualclosedate),f=`${u[h.getMonth()]} ${h.getFullYear()}`,g=r.indexOf(f);g>=0&&(d.statecode===1||d.statecode==="1"?s[g]++:(d.statecode===2||d.statecode==="2")&&o[g]++)}catch(h){console.error("[WonLostChart] Error processing opportunity:",h)}}),console.log("[WonLostChart] Data by month:",{won:s,lost:o}),{labels:r,datasets:[{label:"Won",data:s,backgroundColor:"rgba(93, 182, 117, 0.7)",borderRadius:4},{label:"Lost",data:o,backgroundColor:"rgba(199, 117, 93, 0.7)",borderRadius:4}]}},[t]);return x("div",{style:{padding:"16px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:x("div",{style:{height:"300px"},children:x(Ba,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12,font:{size:10}}},title:{display:!0,text:"Won/Lost Opportunities (Last 12 Months)",font:{size:14}},tooltip:{callbacks:{afterTitle:function(r){const s=r[0].dataIndex,o=n.datasets[0].data[s],a=n.datasets[1].data[s],l=o+a;return l===0?"Win rate: N/A":`Win rate: ${Math.round(o/l*100)}%`},label:function(r){let s=r.dataset.label||"";if(s&&(s+=": "),r.parsed.y!==null){s+=r.parsed.y;const o=r.dataIndex,a=n.datasets[0].data[o],l=n.datasets[1].data[o],c=a+l;c>0&&(s+=` (${Math.round(r.parsed.y/c*100)}%)`)}return s}}}},scales:{x:{grid:{display:!1},ticks:{font:{size:10}},stacked:!0},y:{beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{precision:0,font:{size:10}}}}},data:n})})})},x2=({opportunities:t=[],loading:e,onLogout:n,isLoggingOut:i,onOpportunitySelect:r,closedOpportunities:s=[],toggleAutoOpen:o,autoOpen:a,onFetchMyOpenOpportunities:l,accessToken:c,subscription:u})=>{const[d,h]=L.exports.useState({analytics:!0,salesCycle:!1,opportunities:!0,activities:!1,wonLost:!1}),f=y=>{h({...d,[y]:!d[y]})},g={total:t.length,closing:t.filter(y=>{const w=y.estimatedclosedate?new Date(y.estimatedclosedate):null;if(!w)return!1;const p=new Date,m=Math.ceil((w-p)/(1e3*60*60*24));return m>=0&&m<=30}).length};return s&&s.length>0&&Math.round(s.reduce((y,w)=>{const p=new Date(w.createdon),m=new Date(w.actualclosedate);return y+Math.floor((m-p)/(1e3*60*60*24))},0)/s.length),S("div",{style:{flex:1,display:"flex",flexDirection:"column",width:"100%",overflow:"hidden",height:"100%",background:"#ededed"},children:[x(Fm,{title:"Lens",showBackButton:!1,onLogout:n,isLoggingOut:i,onFetchMyOpenOpportunities:l,subscription:u}),S("div",{style:{flex:1,overflowY:"auto",paddingTop:"8px"},children:[x("div",{style:{padding:"12px 16px 0px 16px"},children:S(zt,{title:"Portfolio Analytics",isOpen:d.analytics,onToggle:()=>f("analytics"),children:[S("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",justifyContent:"space-between"},children:[S("div",{style:{flex:1,padding:"8px 12px",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f5f5f5",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[x("div",{style:{fontSize:"13px",color:"#666"},children:"Open Opportunities"}),x("div",{style:{fontSize:"20px",fontWeight:"bold",marginLeft:"10px"},children:g.total})]}),S("div",{style:{flex:1,padding:"8px 12px",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f5f5f5",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[x("div",{style:{fontSize:"13px",color:"#666"},children:"Closing in 30 Days"}),x("div",{style:{fontSize:"20px",fontWeight:"bold",marginLeft:"10px"},children:g.closing})]})]}),x(p2,{closedOpportunities:s})]})}),x("div",{style:{padding:"0 16px"},children:x(zt,{title:"Win/Loss Distribution",isOpen:d.wonLost,onToggle:()=>f("wonLost"),children:x(_2,{closedOpportunities:s})})}),x("div",{style:{padding:"0 16px"},children:x(zt,{title:"Sales Cycle Length",isOpen:d.salesCycle,onToggle:()=>f("salesCycle"),children:x(f2,{closedOpportunities:s})})}),x("div",{style:{padding:"0 16px"},children:x(zt,{title:"Activity Trends",isOpen:d.activities,onToggle:()=>f("activities"),children:x(w2,{accessToken:c})})}),x("div",{style:{padding:"0 16px"},children:x(zt,{title:`My Open Opportunities (${t.length})`,isOpen:d.opportunities,onToggle:()=>f("opportunities"),children:e?x("div",{style:{textAlign:"center",padding:"20px"},children:x("p",{children:"Loading..."})}):t.length===0?x("p",{children:"No opportunities found."}):x("div",{children:t.map(y=>x(yx,{opportunity:y,onClick:()=>r(y.opportunityid)},y.opportunityid))})})})]}),x("div",{style:{padding:"12px 16px",fontSize:"13px",borderTop:"1px solid #e0e0e0",backgroundColor:"white",marginTop:"auto"},children:S("label",{style:{display:"flex",alignItems:"center"},children:[x("input",{type:"checkbox",checked:a,onChange:o,style:{marginRight:"8px"}}),"Auto-open when visiting Dynamics CRM"]})})]})},b2=({title:t,content:e,placement:n="top"})=>{const[i,r]=L.exports.useState(!1);return S("div",{style:{display:"inline-block",position:"relative",marginLeft:"6px",marginTop:"4px",cursor:"pointer"},onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:()=>r(!i),children:[x(tx,{size:16,color:"#666"}),i&&S("div",{style:{position:"absolute",zIndex:100,width:"220px",backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"4px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",[n==="top"?"bottom":"top"]:"100%",left:n==="right"?"100%":n==="left"?"auto":"50%",right:n==="left"?"100%":"auto",transform:n==="top"||n==="bottom"?"translateX(-50%)":"none",marginTop:n==="bottom"?"8px":0,marginBottom:n==="top"?"8px":0,marginLeft:n==="right"?"8px":0,marginRight:n==="left"?"8px":0},children:[x("h4",{style:{margin:"0 0 6px 0",fontSize:"12x",fontWeight:"400"},children:t}),x("p",{style:{margin:0,fontSize:"10px",lineHeight:"1.4",fontWeight:"300",color:"#666"},children:e})]})]})},k2=({activities:t=[],opportunity:e={},closedOpportunities:n=[],isOpen:i,onToggle:r})=>{var f;const s=fx(t),o=e.createdon?Ki(e.createdon,new Date):0,a=e.estimatedclosedate?Ki(new Date,e.estimatedclosedate):null,l=((f=px(t))==null?void 0:f.days)||0,c=e.closeprobability||0,d=(()=>{if(!e.customerid_account||!n.length)return{ratio:0,wins:0,total:0,percentChange:0};const g=n.filter(v=>v.customerid_account&&v.customerid_account.accountid===e.customerid_account.accountid),y=g.filter(v=>v.statecode===1).length,w=g.length;return{ratio:w>0?Math.round(y/w*100):0,wins:y,total:w,percentChange:50}})(),h=({label:g,value:y,unit:w="",progressColor:p="#4caf50",progressPercent:m=50})=>S("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[S("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[x("div",{style:{fontSize:"13px",color:"#666"},children:g}),S("div",{style:{fontSize:"20px",fontWeight:"bold"},children:[y,w]})]}),x("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden"},children:x("div",{style:{height:"100%",width:`${Math.min(m,100)}%`,backgroundColor:p,borderRadius:"2px"}})})]});return S(zt,{title:S("div",{style:{display:"flex",alignItems:"center"},children:[x("span",{children:"Statistics"}),x("div",{style:{marginLeft:"auto"},children:x(b2,{title:"Opportunity Statistics",content:"This section provides key metrics about the opportunity, including timelines, activity tracking, and account performance indicators.",placement:"bottom"})})]}),isOpen:i,onToggle:r,theme:"primary",children:[S("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"16px"},children:[x(h,{label:"Open days",value:o,progressColor:"#2196f3",progressPercent:Math.min(o/90*100,100)}),x(h,{label:"Days to close",value:a!==null?a:"\u2014",progressColor:"#4caf50",progressPercent:a?Math.max(100-a/30*100,0):0}),x(h,{label:"Days since activity",value:l,progressColor:l>14?"#f44336":l>7?"#ff9800":"#4caf50",progressPercent:Math.min(l/30*100,100)}),x(h,{label:"Probability",value:c,unit:"%",progressColor:"#9c27b0",progressPercent:c})]}),S("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"12px 16px",marginBottom:"24px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[S("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[x("div",{style:{fontSize:"13px",color:"#666"},children:"Account Win Rate"}),S("div",{style:{fontSize:"20px",fontWeight:"bold"},children:[d.ratio,"%"]})]}),S("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:["Won ",d.wins," of ",d.total," opportunities"]}),d.percentChange!==0&&S("div",{style:{fontSize:"12px",color:d.percentChange>0?"#4caf50":"#f44336",display:"flex",alignItems:"center",marginTop:"2px"},children:[d.percentChange>0?"\u2191":"\u2193"," ",Math.abs(d.percentChange),"% from previous period"]}),x("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden",marginTop:"8px"},children:x("div",{style:{height:"100%",width:`${d.ratio}%`,backgroundColor:"#ff9800",borderRadius:"2px"}})})]}),S("div",{children:[x("h4",{style:{fontSize:"14px",fontWeight:"600",marginTop:"0",marginBottom:"16px",color:"#333"},children:"Activity Summary"}),t&&t.length>0?x("div",{children:s.map((g,y)=>S("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[x("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px",fontSize:"16px"},children:g.icon}),S("div",{style:{flex:1},children:[g.count," ",hx(g.label,g.count)]})]},y))}):x("p",{children:"No activities recorded yet."})]})]})},S2=({activities:t=[],isOpen:e,onToggle:n})=>{const[i,r]=L.exports.useState(null),[s,o]=L.exports.useState(new Date().getMonth()),[a,l]=L.exports.useState(new Date().getFullYear()),c=d=>{let h=s,f=a;d==="next"?(h++,h>11&&(h=0,f++)):(h--,h<0&&(h=11,f--)),o(h),l(f)},u=(d,h,f)=>!i||!f?!1:i.getDate()===f&&i.getMonth()===h&&i.getFullYear()===d;return S(zt,{title:"Activities",isOpen:e,onToggle:n,children:[S("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px",alignItems:"center"},children:[x("button",{onClick:()=>c("prev"),style:{border:"none",background:"none",cursor:"pointer",fontSize:"16px"},children:"\u25C0"}),S("h4",{style:{margin:"0"},children:[dx[s]," ",a]}),x("button",{onClick:()=>c("next"),style:{border:"none",background:"none",cursor:"pointer",fontSize:"16px"},children:"\u25B6"})]}),S("div",{children:[x("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",textAlign:"center",fontSize:"12px",color:"#666",marginBottom:"8px"},children:ux.map(d=>x("div",{children:d},d))}),mx(a,s,t).map((d,h)=>x("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"4px"},children:d.map((f,g)=>{const y=u(a,s,f==null?void 0:f.day);return S("div",{style:{height:"30px",textAlign:"center",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"14px",border:f!=null&&f.isToday?"2px solid #ff8f6b":"none",backgroundColor:y?"#ff8f6b":"transparent",color:y?"white":f!=null&&f.isToday?"#1f2223":f!=null&&f.day?"black":"#ccc",cursor:(f==null?void 0:f.activities.length)>0?"pointer":"default",boxSizing:"border-box",fontWeight:y?"bold":"normal"},onClick:()=>(f==null?void 0:f.activities.length)>0&&r(new Date(a,s,f.day)),children:[f==null?void 0:f.day,(f==null?void 0:f.activities.length)>0&&x("span",{style:{position:"absolute",bottom:"-2px",width:"6px",height:"6px",borderRadius:"50%",border:"1px solid #1f2223",backgroundColor:y?"white":"#ff8f6b"}})]},g)})},h))]}),i&&S("div",{style:{marginTop:"16px"},children:[S("h4",{style:{margin:"0 0 12px 0"},children:["Activities on ",i.toLocaleDateString(),":"]}),t.filter(d=>{const h=new Date(d.createdon);return h?h.getDate()===i.getDate()&&h.getMonth()===i.getMonth()&&h.getFullYear()===i.getFullYear():!1}).map(d=>S("div",{style:{padding:"8px",borderLeft:`4px solid ${Nm(d.activitytypecode)}`,backgroundColor:"#f5f5f5",marginBottom:"8px",borderRadius:"4px"},children:[x("div",{style:{fontWeight:"bold"},children:d.subject}),S("div",{style:{fontSize:"12px",verticalAlign:"middle"},children:[Hu(sa(d.activitytypecode))," ",sa(d.activitytypecode)]}),x("div",{style:{fontSize:"12px",color:"#666"},children:new Date(d.createdon).toLocaleTimeString()})]},d.activityid)),x("button",{onClick:()=>r(null),style:{border:"none",background:"none",color:"#0078d4",cursor:"pointer",padding:"4px 0",textDecoration:"underline",fontSize:"13px"},children:"Clear selection"})]})]})};Ke.register(ci,ui,Tn,Ds,Is,As);const C2=({activities:t=[],closedOpportunities:e=[],opportunity:n,isOpen:i,onToggle:r})=>{const[s,o]=L.exports.useState(0),[a,l]=L.exports.useState({labels:[],datasets:[]}),[c,u]=L.exports.useState(0),[d,h]=L.exports.useState([]),f=L.exports.useRef(null);L.exports.useEffect(()=>{if(n&&n.createdon){const p=Ki(n.createdon,new Date);u(p)}},[n]),L.exports.useEffect(()=>{if(e&&e.length>0){const p=[...e].sort((_,b)=>new Date(b.actualclosedate)-new Date(_.actualclosedate)).slice(0,7),m=p.map(_=>{const b=new Date(_.createdon),k=new Date(_.actualclosedate);return Math.floor((k-b)/(1e3*60*60*24))});(async()=>{const _=p.map(async I=>{const O=await Vi(I.opportunityid);return{name:I.name||"Unnamed Opportunity",description:I.description||"",value:I.estimatedvalue||I.totalamount||0,status:I.statecode===0?"Open":I.statecode===1?"Won":"Lost",daysOpen:Math.floor((new Date(I.actualclosedate)-new Date(I.createdon))/864e5),url:O}}),b=await Promise.all(_),k=p.map((I,O)=>`Opp ${O+1}`),C=[...m],P=Array(m.length).fill("rgba(163, 163, 163, 0.7)");let D=[...b];if(n&&n.createdon){k.unshift("Current"),C.unshift(c),P.unshift("rgba(52, 52, 52, 0.7)");const I=await Vi(n.opportunityid);D.unshift({name:n.name||"Current Opportunity",description:n.description||"",value:n.estimatedvalue||0,status:"Open",daysOpen:c,url:I})}h(D);const A=Math.round(m.reduce((I,O)=>I+O,0)/(m.length||1));console.log("Average closing time calculated:",A,"days"),o(A),l({labels:k,datasets:[{label:"Days",data:C,backgroundColor:P,borderRadius:4,borderSkipped:!1,barThickness:30}]})})()}},[e,n,c]);const g=p=>{if(!f.current){console.log("Chart ref is not available");return}const v=f.current.getElementsAtEventForMode(p.nativeEvent,"nearest",{intersect:!0},!1);if(v.length===0){console.log("No active points found");return}const _=v[0].index,b=d[_];console.log("Clicked opportunity:",b),b&&b.url?(console.log("Opening URL:",b.url),window.open(b.url,"_blank")):b&&b.id&&Vi(b.id).then(k=>{k&&(console.log("Opening dynamically generated URL:",k),window.open(k,"_blank"))}).catch(k=>{console.error("Error generating URL:",k)})},y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(p){const m=p[0].dataIndex,v=d[m];return v?v.name:`Opportunity ${m+1}`},label:function(p){const m=p.dataIndex,v=d[m];if(!v)return`${p.raw} days`;const _=[`Days Open: ${v.daysOpen}`,`Value: $${v.value.toLocaleString()}`,`Status: ${v.status}`];return v.id&&_.push(`ID: ${v.id}`),_.push("Click to open opportunity"),_}}}},scales:{y:{beginAtZero:!0,grid:{drawBorder:!1},ticks:{font:{size:12}}},x:{grid:{display:!1},ticks:{font:{size:12}}}},animation:{duration:500},onHover:(p,m)=>{p.native&&(p.native.target.style.cursor=m.length?"pointer":"default")}},w={id:"averageLine",afterDraw:p=>{const m=s,v=p.ctx,_=p.scales.y,b=p.scales.x;if(_&&b){const k=_.getPixelForValue(m);v.save(),v.beginPath(),v.moveTo(b.left,k),v.lineTo(b.right,k),v.lineWidth=1,v.strokeStyle="#2684ff",v.stroke(),v.restore(),console.log(`Successfully drew line at ${m} days, Y=${k}`)}else console.log("Could not draw line, scales not available")}};return x(zt,{title:"Sales Cycle",isOpen:i,onToggle:r,children:S("div",{style:{padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[x("div",{style:{fontSize:"12px",color:"#666",marginBottom:"16px"},children:"Current vs Last 7 Closed Opportunities"}),x("div",{style:{height:200,position:"relative"},children:a.datasets&&a.datasets[0]&&a.datasets[0].data&&a.datasets[0].data.length>0?x(Ba,{ref:f,data:a,options:y,plugins:[w],onClick:g}):x("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#888",fontStyle:"italic"},children:"No closed opportunity data available"})}),S("div",{style:{display:"flex",alignItems:"center",marginTop:"16px",paddingTop:"8px",borderTop:"1px solid #e0e0e0"},children:[x("div",{style:{width:"16px",height:"2px",backgroundColor:"#2684ff",marginRight:"6px"}}),S("div",{style:{fontSize:"12px",color:"#666"},children:["Average: ",s," days"]})]})]})})},P2=({activities:t=[],isOpen:e,onToggle:n})=>{console.log("TimelineLog received activities:",t);const i=()=>{const r={};return t.forEach(o=>{const a=ps(o);if(!a)return;const l=a.toLocaleDateString();r[l]||(r[l]=[]),r[l].push(o)}),{sortedDates:Object.keys(r).sort((o,a)=>new Date(a)-new Date(o)),groupedActivities:r}};return x(zt,{title:"Timeline Log",isOpen:e,onToggle:n,children:t&&t.length>0?x("div",{className:"enhanced-timeline",children:(()=>{const{sortedDates:r,groupedActivities:s}=i();return r.map((o,a)=>{const l=s[o];return S("div",{className:"timeline-date-group",children:[S("div",{style:{padding:"8px 12px",marginBottom:"12px",backgroundColor:"#f5f5f5",borderRadius:"4px",fontWeight:"bold",display:"inline-block"},children:[o," (",l.length," ",l.length===1?"activity":"activities",")"]}),S("div",{style:{position:"relative"},children:[x("div",{style:{position:"absolute",left:"7px",top:"8px",bottom:a===r.length-1?"8px":"0",width:"2px",backgroundColor:"#e0e0e0",zIndex:1}}),l.map(c=>{const u=sa(c.activitytypecode),d=Nm(c.activitytypecode);return S("div",{style:{position:"relative",marginBottom:"16px",paddingLeft:"32px",zIndex:2},children:[x("div",{style:{position:"absolute",left:"0",top:"8px",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:d,border:"1px solid white",boxShadow:"0 1px 3px rgba(0,0,0,0.12)",zIndex:3}}),S("div",{style:{backgroundColor:"#f9f9f9",borderLeft:`4px solid ${d}`,borderRadius:"4px",padding:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)",h.currentTarget.style.borderLeft="4px solid #d4ff58"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.08)",h.currentTarget.style.borderLeft=`4px solid ${d}`},children:[S("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[S("div",{children:[S("div",{style:{fontWeight:"400",marginBottom:"4px",fontSize:"12px"},children:[c.subject||u,S("p",{style:{fontSize:"0.75rem",color:"#999"},children:["Scheduled: ",c.scheduledstart,x("br",{}),"Actual: ",c.actualstart,x("br",{}),"Created: ",c.createdon]})]}),S("div",{style:{display:"flex",alignItems:"center",color:"#666",fontSize:"12px",marginBottom:"8px"},children:[Hu(u),x("span",{style:{marginLeft:"6px"},children:u})]})]}),x("div",{style:{color:"#888",fontSize:"10px",whiteSpace:"nowrap"},children:new Date(ps(c)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),c.description&&x("div",{style:{marginTop:"8px",fontSize:"14px",color:"#444",borderTop:"1px solid #eee",paddingTop:"8px"},children:c.description})]})]},c.activityid)})]})]},o)})})()}):x("p",{children:"No activities in the timeline."})})},E2=({opportunity:t,isOpen:e,onToggle:n})=>{const[i,r]=L.exports.useState("");return L.exports.useEffect(()=>{async function s(){if(t&&t.opportunityid)try{const o=await Vi(t.opportunityid);r(o)}catch(o){console.error("Error generating Dynamics URL:",o),r("")}}s()},[t]),x(zt,{title:"Basic Info",isOpen:e,onToggle:n,children:S("div",{style:{marginBottom:"16px",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",padding:"16px"},children:[x("h3",{style:{margin:"0 0 12px 0",fontSize:"16px"},children:"Opportunity Details"}),S("div",{style:{marginBottom:"8px"},children:[x("strong",{children:"ID:"})," ",t.opportunityid]}),t.customerid_account&&S("div",{style:{marginBottom:"8px"},children:[x("strong",{children:"Customer:"})," ",t.customerid_account.name]}),t.estimatedvalue&&S("div",{style:{marginBottom:"8px"},children:[x("strong",{children:"Estimated Value:"})," $",t.estimatedvalue.toLocaleString()]}),t.statecode!==void 0&&S("div",{style:{marginBottom:"8px"},children:[x("strong",{children:"Status:"})," ",t.statecode===0?"Open":"Closed"]}),t.createdon&&S("div",{style:{marginBottom:"8px"},children:[x("strong",{children:"Created on:"})," ",new Date(t.createdon).toLocaleDateString()]}),t.estimatedclosedate&&S("div",{style:{marginBottom:"8px"},children:[x("strong",{children:"Est. Close Date:"})," ",new Date(t.estimatedclosedate).toLocaleDateString()]}),t.actualclosedate&&S("div",{style:{marginBottom:"8px"},children:[x("strong",{children:"Actual Close Date:"})," ",new Date(t.actualclosedate).toLocaleDateString()]}),x("div",{style:{marginTop:"16px"},children:i?x("a",{href:i,target:"_blank",rel:"noopener noreferrer",style:{color:"#0078d4",textDecoration:"none"},children:"Open in Dynamics \u2192"}):x("span",{style:{color:"#999",fontSize:"14px"},children:"Dynamics URL not available"})})]})})},O2=({opportunity:t,activities:e,closedOpportunities:n=[],onBackClick:i,onLogout:r,isLoggingOut:s,toggleAutoOpen:o,autoOpen:a,subscription:l})=>{const[c,u]=L.exports.useState({statistics:!0,entries:!0,analytics:!0,basicInfo:!1,timeline:!1}),d=h=>{u({...c,[h]:!c[h]})};return S("div",{style:{flex:1,display:"flex",flexDirection:"column",width:"100%",overflow:"auto",backgroundColor:"#ededed"},children:[x(Fm,{title:"Lens",showBackButton:!0,onBackClick:i,onLogout:r,isLoggingOut:s,subscription:l}),S("div",{children:[x("h4",{style:{padding:"0px 16px 0px 16px",display:"flex",color:"#1f2223",fontSize:"14px",marginBottom:"2px"},children:t.name}),t.createdon&&S("div",{style:{marginBottom:"8px",padding:"2px 16px",display:"flex",alignItems:"center",fontWeight:"500",color:"#5f646a"},children:[x("p",{children:"Created on:\xA0"})," ",new Date(t.createdon).toLocaleDateString()]})]}),S("div",{style:{flex:1,overflow:"auto",padding:"0 16px 16px 16px"},children:[x(k2,{activities:e,opportunity:t,closedOpportunities:n,isOpen:c.statistics,onToggle:()=>d("statistics")}),x(C2,{activities:e,closedOpportunities:n,opportunity:t,isOpen:c.analytics,onToggle:()=>d("analytics")}),x(S2,{activities:e,isOpen:c.entries,onToggle:()=>d("entries")}),x(P2,{activities:e,isOpen:c.timeline,onToggle:()=>d("timeline")}),x(E2,{opportunity:t,isOpen:c.basicInfo,onToggle:()=>d("basicInfo")})]}),x("div",{style:{padding:"12px 16px",fontSize:"13px",borderTop:"1px solid #e0e0e0",backgroundColor:"white"},children:S("label",{style:{display:"flex",alignItems:"center"},children:[x("input",{type:"checkbox",checked:a,onChange:o,style:{marginRight:"8px"}}),"Auto-open when visiting Dynamics CRM"]})})]})};async function T2(t){try{if(console.log("getSubscriptionStatus called with email:",t),!t)return console.error("Email is required to check subscription status"),{status:"free",isActive:!0};console.log("Checking subscription status for:",t);const{data:e,error:n}=await In.from("users").select("subscription_status, subscription_end_date, organization_id").eq("email",t).single();if(console.log("Supabase response:",e),n)return console.error("Error fetching user subscription data:",n),{status:"free",isActive:!0};let i=e.subscription_status;return i==="active"&&(i="pro"),{status:i,endDate:e.subscription_end_date||null,isActive:!0,isOrgSubscription:!1}}catch(e){return console.error("Error fetching subscription status:",e),{status:"free",isActive:!0}}}function A2(t,e="free"){const n={"basic-analytics":["free","basic","pro","enterprise"],"advanced-analytics":["basic","pro","enterprise"],"opportunity-tracking":["free","basic","pro","enterprise"],"activity-monitoring":["free","basic","pro","enterprise"],"timeline-view":["basic","pro","enterprise"],"export-data":["pro","enterprise"],"api-access":["pro","enterprise"],"custom-dashboards":["enterprise"],"team-management":["enterprise"]};return n[t]?n[t].includes(e):!1}const D2=()=>{const[t,e]=L.exports.useState(null),[n,i]=L.exports.useState(null),[r,s]=L.exports.useState({status:"free",isActive:!0}),[o,a]=L.exports.useState([]),[l,c]=L.exports.useState(null),[u,d]=L.exports.useState(null),[h,f]=L.exports.useState([]),[g,y]=L.exports.useState([]),[w,p]=L.exports.useState(!1),[m,v]=L.exports.useState(null),[_,b]=L.exports.useState(!0),[k,C]=L.exports.useState(null),[P,D]=L.exports.useState(null),[A,I]=L.exports.useState(!1),O=L.exports.useRef(!1),R=L.exports.useRef(null),F=L.exports.useRef(null),Z=async z=>{try{if(!z||!z.email){console.warn("[Popup] Cannot initialize subscriptions: Missing user email"),s({status:"free",isActive:!0});return}console.log("[Popup] Initializing subscription for email:",z.email);const U=await T2(z.email);s(U),console.log("[Popup] Subscription initialized:",U.status),chrome.storage.local.set({subscriptionStatus:U.status,subscriptionEndDate:U.endDate})}catch(U){console.error("Error initializing subscriptions:",U),s({status:"free",isActive:!0})}};L.exports.useEffect(()=>{async function z(){try{if(O.current){console.log("[Popup] Initialization already in progress, skipping");return}O.current=!0;const H=await y_();H.connected||console.warn("Supabase connection issue:",H.error),chrome.runtime.sendMessage({type:"POPUP_OPENED"}),v(null),C(null);try{const Ae=await Hi();if(D(Ae),Ae&&chrome.storage.local.set({organizationId:Ae}),!Ae){await new Promise(Ot=>setTimeout(Ot,500));const tn=await Hi();if(D(tn),!tn){v("Please navigate to your Dynamics CRM environment first to use this extension."),O.current=!1;return}}}catch(Ae){console.warn("Error getting organization ID:",Ae),v("Could not determine your Dynamics CRM organization. Please navigate to Dynamics CRM first."),O.current=!1;return}if(await Dh()){const{accessToken:Ae}=await chrome.storage.local.get(["accessToken"]);e(Ae);const tn=await P_();i(tn),tn!=null&&tn.email&&await Z(tn),console.log("[Popup.jsx] Got access token:",Ae?"yes":"no");try{const Ot=await A_();console.log("[Popup.jsx] Current opportunity ID:",Ot),Ot!==R.current&&(R.current=Ot,c(Ot)),Ot?await ce(Ae,Ot):await T(Ae),await ee(Ae)}catch(Ot){console.warn("Error getting opportunity ID:",Ot),await T(Ae),await ee(Ae)}}else console.log("[Popup.jsx] No valid login found, user needs to log in.");chrome.storage.local.get(["autoOpen"],Ae=>{b(Ae.autoOpen!==!1)})}catch(H){console.error("Initialization error:",H),v("Failed to initialize extension: "+H.message),C({errorType:"Initialization Error",message:H.message,timestamp:new Date().toISOString()})}finally{O.current=!1}}z();const U=setInterval(()=>{O.current||chrome.storage.local.get(["currentOpportunityId","lastUpdated","currentOrgId"],H=>{H.currentOrgId&&H.currentOrgId!==P&&D(H.currentOrgId),H.currentOpportunityId&&H.lastUpdated?H.currentOpportunityId!==R.current&&(console.log("[Popup.jsx] Storage poll detected new opportunity ID:",H.currentOpportunityId),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{H.currentOpportunityId!==R.current&&(R.current=H.currentOpportunityId,c(H.currentOpportunityId),t&&ce(t,H.currentOpportunityId)),F.current=null},300)):R.current&&!H.currentOpportunityId&&(console.log("[Popup.jsx] Opportunity ID cleared in storage"),R.current=null,c(null),t&&T(t))})},1e3),ct=H=>{if(console.log("[Popup.jsx] Popup received message:",H.type),O.current){console.log("[Popup.jsx] State transition lock active, deferring message handling");return}if(H.type==="OPPORTUNITY_DETECTED"){if(console.log("[Popup.jsx] Received opportunity ID from content script:",H.opportunityId),H.opportunityId===R.current){console.log("[Popup.jsx] Skipping duplicate opportunity ID update");return}R.current=H.opportunityId,c(H.opportunityId),H.organizationId&&D(H.organizationId),t&&(F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{ce(t,H.opportunityId),F.current=null},300))}else H.type==="OPPORTUNITY_CLEARED"&&(console.log("[Popup.jsx] Opportunity cleared notification received"),R.current=null,c(null),d(null),t&&T(t))};return chrome.runtime.onMessage.addListener(ct),()=>{chrome.runtime.onMessage.removeListener(ct),clearInterval(U),F.current&&clearTimeout(F.current)}},[t,P]),L.exports.useEffect(()=>{document.title="Lens";const z=document.documentElement.style;z.setProperty("width","100%"),z.setProperty("height","100%"),z.setProperty("overflow","hidden"),document.body.style.margin="0",document.body.style.padding="0",document.body.style.height="100%",document.body.style.overflow="auto";const U=document.getElementById("root");U&&(U.style.height="100%",U.style.overflow="auto")},[]);const ee=async z=>{try{console.log("BEFORE: Fetching closed opportunities..."),await M_(z,p,v,y),setTimeout(()=>{console.log("AFTER: Closed opportunities fetched:",g.length)},100)}catch(U){console.error("Error fetching closed opportunities:",U)}},ce=async(z,U)=>{try{if(O.current){console.log("[Popup.jsx] State transition in progress, deferring opportunity details fetch");return}O.current=!0,p(!0),v(null),await Dh().then(async ct=>{if(!ct){console.log("[Popup.jsx] Token invalid or expired, clearing token state"),e(null),i(null),v("Your session has expired. Please log in again."),p(!1),O.current=!1;return}try{await I_(z,U,p,v,d,f),await ee(z)}catch(H){H.message.includes("Authentication failed")||H.message.includes("401")?(console.error("Authentication failed during API call:",H),await Ih(e,a,d,f,null,p,i),v("Your session has expired. Please log in again.")):(console.error("Error fetching opportunity details:",H),v(`Failed to fetch opportunity details: ${H.message}`))}})}catch(ct){console.error("Error checking login status:",ct),v("Failed to verify authentication status. Please try again.")}finally{p(!1),O.current=!1}},T=async(z,U=null)=>{try{if(O.current){console.log("[Popup.jsx] State transition in progress, deferring opportunities fetch");return}O.current=!0,await Mh(z,p,v,a,C)}catch(ct){console.error("Error fetching opportunities:",ct),v(`Failed to fetch opportunities list: ${ct.message}`)}finally{O.current=!1}},j=async()=>{try{if(O.current){console.log("[Popup.jsx] State transition in progress, deferring refresh");return}O.current=!0,p(!0),l&&u?await ce(t,l):await Mh(t,p,v,a,C),await ee(t),console.log("[Popup.jsx] Refresh completed successfully")}catch(z){console.error("Error during refresh:",z),v(`Failed to refresh data: ${z.message}`)}finally{O.current=!1,p(!1)}},$=async()=>{var z;try{if(O.current){console.log("[Popup.jsx] State transition in progress, deferring login");return}if(O.current=!0,!P){const U=await Hi();if(!U){v("Please navigate to your Dynamics CRM environment first to use this extension."),O.current=!1;return}D(U)}v(null),p(!0);try{const U=await C_();if(!U.success)throw new Error(((z=U.error)==null?void 0:z.message)||"Login failed");console.log("[Popup.jsx] Login successful, got token"),e(U.token),U.user?(i(U.user),await Z(U.user)):console.warn("[Popup.jsx] No user data in login result"),R.current?ce(U.token,R.current):(T(U.token),ee(U.token))}catch(U){U.message&&U.message.includes("did not approve")?(console.log("[Popup.jsx] User cancelled the login dialog"),v("Authentication cancelled. Please try again.")):(console.error("Login failed:",U),v(`Login failed: ${U.message}`))}finally{p(!1)}}catch(U){console.error("Login preparation error:",U),v(`Login preparation failed: ${U.message}`),p(!1)}finally{O.current=!1}},G=async()=>{try{if(O.current||A){console.log("[Popup.jsx] State transition or logout in progress, deferring logout");return}O.current=!0,I(!0);const z=await Ih(e,a,d,f,v,null,i);z.success?(console.log("[Popup.jsx] Logout successful"),R.current=null,c(null),s({status:"free",isActive:!0})):(console.error("Logout failed:",z.error),v(`Logout failed: ${z.error}`))}catch(z){console.error("Unexpected error during logout:",z),v(`An unexpected error occurred during logout: ${z.message}`)}finally{I(!1),O.current=!1}},te=()=>{if(O.current){console.log("[Popup.jsx] State transition in progress, deferring back navigation");return}O.current=!0;try{console.log("[Popup.jsx] Handling back button click"),R.current=null,chrome.storage.local.remove(["currentOpportunityId","lastUpdated"],()=>{console.log("[Popup.jsx] Cleared opportunity ID from storage")}),d(null),c(null),setTimeout(()=>{t&&T(t),O.current=!1},100)}catch(z){console.error("Error in back navigation:",z),O.current=!1}},at=z=>{if(z===R.current&&u){console.log("[Popup.jsx] Already showing this opportunity, skipping selection");return}if(O.current){console.log("[Popup.jsx] State transition in progress, deferring opportunity selection");return}console.log("[Popup.jsx] Selecting opportunity:",z),R.current=z,chrome.storage.local.set({currentOpportunityId:z,lastUpdated:Date.now()}),c(z),ce(t,z)},_e=()=>{const z=!_;b(z),chrome.storage.local.set({autoOpen:z}),chrome.runtime.sendMessage({type:"SET_AUTO_OPEN",enabled:z})},lt=z=>A2(z,(r==null?void 0:r.status)||"free");return S("div",{style:{padding:"0",fontFamily:"Arial, sans-serif",height:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#ededed"},children:[x(N_,{message:m,onDismiss:()=>v(null)}),(()=>{try{return console.log("[Popup] RENDER CONTENT DEBUG:"),console.log("[Popup] Organization ID:",P),console.log("[Popup] Access Token:",!!t),console.log("[Popup] User:",(n==null?void 0:n.email)||"not logged in"),console.log("[Popup] Subscription:",(r==null?void 0:r.status)||"none"),console.log("[Popup] Current Opportunity:",u?u.opportunityid:"none"),console.log("[Popup] Current Opportunity ID:",l),console.log("[Popup] State Transition Lock:",O.current),console.log("[Popup] Last Opportunity ID Ref:",R.current),console.log("[Popup] Opportunities Count:",o.length),console.log("[Popup] Closed Opportunities Count:",g.length),P?t?l&&u?(console.log("[Popup] Rendering opportunity detail view"),x(O2,{opportunity:u,activities:h||[],closedOpportunities:g||[],onBackClick:te,toggleAutoOpen:_e,autoOpen:_,onLogout:G,onFetchMyOpenOpportunities:j,isLoggingOut:A,subscription:r,canUseFeature:lt,user:n})):(console.log("[Popup] Rendering opportunity list view"),x(x2,{opportunities:(()=>{try{return Array.isArray(o)?o.map(z=>{var ct;return z?{...z,opportunityIndex:(ct=z.opportunities_list_index)!=null?ct:0,activities:Array.isArray(z.activities)?z.activities:[],lastActivity:z.lastActivity||null}:(console.warn("Received undefined opportunity object"),{opportunityid:`unknown-${Math.random().toString(36).substring(7)}`,name:"Unknown opportunity",activities:[],opportunityIndex:0,lastActivity:null})}):(console.warn("Opportunities is not an array:",o),[])}catch(z){return console.error("Error mapping opportunities:",z),[]}})(),loading:w,onLogout:G,onOpportunitySelect:at,isLoggingOut:A,closedOpportunities:g,toggleAutoOpen:_e,autoOpen:_,accessToken:t,onFetchMyOpenOpportunities:j,subscription:r,canUseFeature:lt,user:n})):x(ax,{onLogin:$}):S("div",{style:{padding:"20px",textAlign:"center"},children:[x("h3",{children:"Organization Not Detected"}),x("p",{children:"Please navigate to your Dynamics CRM environment first to use this extension."}),x("p",{children:"The extension will automatically detect your organization ID from the URL."}),x("p",{style:{marginTop:"20px",fontWeight:"bold"},children:"Your URL should look like: https://yourorgname.crm.dynamics.com/..."}),x("button",{onClick:()=>window.open("https://make.powerapps.com/environments","_blank"),style:{marginTop:"20px",padding:"10px 16px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go to Power Apps"})]})}catch(z){return console.error("FATAL RENDER ERROR:",z),S("div",{children:["Error rendering content: ",z.message]})}})(),x("div",{style:{position:"fixed",bottom:"0",right:"0",fontSize:"10px",color:"#999",padding:"2px",backgroundColor:"rgba(255,255,255,0.8)"},children:S("details",{children:[x("summary",{children:"Debug"}),S("div",{children:["Org ID: ",P||"Not detected"]}),S("div",{children:["Token: ",t?"Yes":"No"]}),S("div",{children:["User: ",(n==null?void 0:n.email)||"None"]}),S("div",{children:["Subscription: ",(r==null?void 0:r.status)||"None"]}),S("div",{children:["Opp ID: ",l||"None"]}),S("div",{children:["Last Opp Ref: ",R.current||"None"]}),S("div",{children:["Lock: ",O.current?"Active":"Inactive"]}),S("div",{children:["Opportunities: ",o.length]}),S("div",{children:["Closed Opportunities: ",g.length]})]})})]})};Ll.createRoot(document.getElementById("root")).render(x(vn.StrictMode,{children:x(D2,{})}));
