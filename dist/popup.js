var $0=Object.defineProperty;var F0=(t,e,n)=>e in t?$0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var B=(t,e,n)=>(F0(t,typeof e!="symbol"?e+"":e,n),n);var yt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function N0(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),e}var I={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _s=Symbol.for("react.element"),U0=Symbol.for("react.portal"),B0=Symbol.for("react.fragment"),W0=Symbol.for("react.strict_mode"),H0=Symbol.for("react.profiler"),V0=Symbol.for("react.provider"),K0=Symbol.for("react.context"),Y0=Symbol.for("react.forward_ref"),q0=Symbol.for("react.suspense"),G0=Symbol.for("react.memo"),J0=Symbol.for("react.lazy"),fd=Symbol.iterator;function Q0(t){return t===null||typeof t!="object"?null:(t=fd&&t[fd]||t["@@iterator"],typeof t=="function"?t:null)}var hp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fp=Object.assign,pp={};function rr(t,e,n){this.props=t,this.context=e,this.refs=pp,this.updater=n||hp}rr.prototype.isReactComponent={};rr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gp(){}gp.prototype=rr.prototype;function Gc(t,e,n){this.props=t,this.context=e,this.refs=pp,this.updater=n||hp}var Jc=Gc.prototype=new gp;Jc.constructor=Gc;fp(Jc,rr.prototype);Jc.isPureReactComponent=!0;var pd=Array.isArray,mp=Object.prototype.hasOwnProperty,Qc={current:null},yp={key:!0,ref:!0,__self:!0,__source:!0};function vp(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)mp.call(e,i)&&!yp.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:_s,type:t,key:s,ref:o,props:r,_owner:Qc.current}}function Z0(t,e){return{$$typeof:_s,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zc(t){return typeof t=="object"&&t!==null&&t.$$typeof===_s}function X0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gd=/\/+/g;function Ha(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X0(""+t.key):e.toString(36)}function mo(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _s:case U0:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Ha(o,0):i,pd(r)?(n="",t!=null&&(n=t.replace(gd,"$&/")+"/"),mo(r,e,n,"",function(c){return c})):r!=null&&(Zc(r)&&(r=Z0(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(gd,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",pd(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Ha(s,a);o+=mo(s,e,n,l,r)}else if(l=Q0(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Ha(s,a++),o+=mo(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Is(t,e,n){if(t==null)return t;var i=[],r=0;return mo(t,i,"","",function(s){return e.call(n,s,r++)}),i}function ey(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Be={current:null},yo={transition:null},ty={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:yo,ReactCurrentOwner:Qc};function wp(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Is,forEach:function(t,e,n){Is(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Is(t,function(){e++}),e},toArray:function(t){return Is(t,function(e){return e})||[]},only:function(t){if(!Zc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=rr;H.Fragment=B0;H.Profiler=H0;H.PureComponent=Gc;H.StrictMode=W0;H.Suspense=q0;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ty;H.act=wp;H.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=fp({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Qc.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)mp.call(e,l)&&!yp.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:_s,type:t.type,key:r,ref:s,props:i,_owner:o}};H.createContext=function(t){return t={$$typeof:K0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:V0,_context:t},t.Consumer=t};H.createElement=vp;H.createFactory=function(t){var e=vp.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:Y0,render:t}};H.isValidElement=Zc;H.lazy=function(t){return{$$typeof:J0,_payload:{_status:-1,_result:t},_init:ey}};H.memo=function(t,e){return{$$typeof:G0,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=yo.transition;yo.transition={};try{t()}finally{yo.transition=e}};H.unstable_act=wp;H.useCallback=function(t,e){return Be.current.useCallback(t,e)};H.useContext=function(t){return Be.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Be.current.useDeferredValue(t)};H.useEffect=function(t,e){return Be.current.useEffect(t,e)};H.useId=function(){return Be.current.useId()};H.useImperativeHandle=function(t,e,n){return Be.current.useImperativeHandle(t,e,n)};H.useInsertionEffect=function(t,e){return Be.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Be.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Be.current.useMemo(t,e)};H.useReducer=function(t,e,n){return Be.current.useReducer(t,e,n)};H.useRef=function(t){return Be.current.useRef(t)};H.useState=function(t){return Be.current.useState(t)};H.useSyncExternalStore=function(t,e,n){return Be.current.useSyncExternalStore(t,e,n)};H.useTransition=function(){return Be.current.useTransition()};H.version="18.3.1";I.exports=H;var yn=I.exports,Fl={},xp={exports:{}},lt={},_p={exports:{}},bp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,j){var F=D.length;D.push(j);e:for(;0<F;){var Z=F-1>>>1,ee=D[Z];if(0<r(ee,j))D[Z]=j,D[F]=ee,F=Z;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var j=D[0],F=D.pop();if(F!==j){D[0]=F;e:for(var Z=0,ee=D.length,et=ee>>>1;Z<et;){var Ee=2*(Z+1)-1,ut=D[Ee],_e=Ee+1,cr=D[_e];if(0>r(ut,F))_e<ee&&0>r(cr,ut)?(D[Z]=cr,D[_e]=F,Z=_e):(D[Z]=ut,D[Ee]=F,Z=Ee);else if(_e<ee&&0>r(cr,F))D[Z]=cr,D[_e]=F,Z=_e;else break e}}return j}function r(D,j){var F=D.sortIndex-j.sortIndex;return F!==0?F:D.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var j=n(c);j!==null;){if(j.callback===null)i(c);else if(j.startTime<=D)i(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function x(D){if(y=!1,v(D),!m)if(n(l)!==null)m=!0,ae(b);else{var j=n(c);j!==null&&ye(x,j.startTime-D)}}function b(D,j){m=!1,y&&(y=!1,p(S),S=-1),f=!0;var F=h;try{for(v(j),d=n(l);d!==null&&(!(d.expirationTime>j)||D&&!A());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,h=d.priorityLevel;var ee=Z(d.expirationTime<=j);j=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&i(l),v(j)}else i(l);d=n(l)}if(d!==null)var et=!0;else{var Ee=n(c);Ee!==null&&ye(x,Ee.startTime-j),et=!1}return et}finally{d=null,h=F,f=!1}}var k=!1,P=null,S=-1,M=5,O=-1;function A(){return!(t.unstable_now()-O<M)}function z(){if(P!==null){var D=t.unstable_now();O=D;var j=!0;try{j=P(!0,D)}finally{j?T():(k=!1,P=null)}}else k=!1}var T;if(typeof g=="function")T=function(){g(z)};else if(typeof MessageChannel!="undefined"){var N=new MessageChannel,X=N.port2;N.port1.onmessage=z,T=function(){X.postMessage(null)}}else T=function(){w(z,0)};function ae(D){P=D,k||(k=!0,T())}function ye(D,j){S=w(function(){D(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,ae(b))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var F=h;h=j;try{return D()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,j){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=h;h=D;try{return j()}finally{h=F}},t.unstable_scheduleCallback=function(D,j,F){var Z=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Z+F:Z):F=Z,D){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=F+ee,D={id:u++,callback:j,priorityLevel:D,startTime:F,expirationTime:ee,sortIndex:-1},F>Z?(D.sortIndex=F,e(c,D),n(l)===null&&D===n(c)&&(y?(p(S),S=-1):y=!0,ye(x,F-Z))):(D.sortIndex=ee,e(l,D),m||f||(m=!0,ae(b))),D},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(D){var j=h;return function(){var F=h;h=j;try{return D.apply(this,arguments)}finally{h=F}}}})(bp);_p.exports=bp;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny=I.exports,at=_p.exports;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kp=new Set,Gr={};function ui(t,e){Ki(t,e),Ki(t+"Capture",e)}function Ki(t,e){for(Gr[t]=e,t=0;t<e.length;t++)kp.add(e[t])}var Jt=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Nl=Object.prototype.hasOwnProperty,iy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,md={},yd={};function ry(t){return Nl.call(yd,t)?!0:Nl.call(md,t)?!1:iy.test(t)?yd[t]=!0:(md[t]=!0,!1)}function sy(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oy(t,e,n,i){if(e===null||typeof e=="undefined"||sy(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function We(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){De[t]=new We(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];De[e]=new We(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){De[t]=new We(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){De[t]=new We(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){De[t]=new We(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){De[t]=new We(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){De[t]=new We(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){De[t]=new We(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){De[t]=new We(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xc=/[\-:]([a-z])/g;function eu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xc,eu);De[e]=new We(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xc,eu);De[e]=new We(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xc,eu);De[e]=new We(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){De[t]=new We(t,1,!1,t.toLowerCase(),null,!1,!1)});De.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){De[t]=new We(t,1,!1,t.toLowerCase(),null,!0,!0)});function tu(t,e,n,i){var r=De.hasOwnProperty(e)?De[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oy(e,n,r,i)&&(n=null),i||r===null?ry(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var en=ny.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ls=Symbol.for("react.element"),bi=Symbol.for("react.portal"),ki=Symbol.for("react.fragment"),nu=Symbol.for("react.strict_mode"),Ul=Symbol.for("react.profiler"),Sp=Symbol.for("react.provider"),Cp=Symbol.for("react.context"),iu=Symbol.for("react.forward_ref"),Bl=Symbol.for("react.suspense"),Wl=Symbol.for("react.suspense_list"),ru=Symbol.for("react.memo"),sn=Symbol.for("react.lazy"),Pp=Symbol.for("react.offscreen"),vd=Symbol.iterator;function ur(t){return t===null||typeof t!="object"?null:(t=vd&&t[vd]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,Va;function Cr(t){if(Va===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Va=e&&e[1]||""}return`
`+Va+t}var Ka=!1;function Ya(t,e){if(!t||Ka)return"";Ka=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ka=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Cr(t):""}function ay(t){switch(t.tag){case 5:return Cr(t.type);case 16:return Cr("Lazy");case 13:return Cr("Suspense");case 19:return Cr("SuspenseList");case 0:case 2:case 15:return t=Ya(t.type,!1),t;case 11:return t=Ya(t.type.render,!1),t;case 1:return t=Ya(t.type,!0),t;default:return""}}function Hl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ki:return"Fragment";case bi:return"Portal";case Ul:return"Profiler";case nu:return"StrictMode";case Bl:return"Suspense";case Wl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cp:return(t.displayName||"Context")+".Consumer";case Sp:return(t._context.displayName||"Context")+".Provider";case iu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ru:return e=t.displayName||null,e!==null?e:Hl(t.type)||"Memo";case sn:e=t._payload,t=t._init;try{return Hl(t(e))}catch{}}return null}function ly(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hl(e);case 8:return e===nu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function On(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ep(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cy(t){var e=Ep(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rs(t){t._valueTracker||(t._valueTracker=cy(t))}function Tp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Ep(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Mo(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vl(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function wd(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=On(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Op(t,e){e=e.checked,e!=null&&tu(t,"checked",e,!1)}function Kl(t,e){Op(t,e);var n=On(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yl(t,e.type,On(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yl(t,e,n){(e!=="number"||Mo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pr=Array.isArray;function zi(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+On(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ql(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _d(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(Pr(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:On(n)}}function Ap(t,e){var n=On(e.value),i=On(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function bd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zs,Mp=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uy=["Webkit","ms","Moz","O"];Object.keys(Ir).forEach(function(t){uy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ir[e]=Ir[t]})});function Ip(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ir.hasOwnProperty(t)&&Ir[t]?(""+e).trim():e+"px"}function Lp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Ip(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var dy=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jl(t,e){if(e){if(dy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Ql(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zl=null;function su(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xl=null,ji=null,$i=null;function kd(t){if(t=Ss(t)){if(typeof Xl!="function")throw Error(E(280));var e=t.stateNode;e&&(e=wa(e),Xl(t.stateNode,t.type,e))}}function Rp(t){ji?$i?$i.push(t):$i=[t]:ji=t}function zp(){if(ji){var t=ji,e=$i;if($i=ji=null,kd(t),e)for(t=0;t<e.length;t++)kd(e[t])}}function jp(t,e){return t(e)}function $p(){}var qa=!1;function Fp(t,e,n){if(qa)return t(e,n);qa=!0;try{return jp(t,e,n)}finally{qa=!1,(ji!==null||$i!==null)&&($p(),zp())}}function Qr(t,e){var n=t.stateNode;if(n===null)return null;var i=wa(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var ec=!1;if(Jt)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){ec=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{ec=!1}function hy(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Lr=!1,Io=null,Lo=!1,tc=null,fy={onError:function(t){Lr=!0,Io=t}};function py(t,e,n,i,r,s,o,a,l){Lr=!1,Io=null,hy.apply(fy,arguments)}function gy(t,e,n,i,r,s,o,a,l){if(py.apply(this,arguments),Lr){if(Lr){var c=Io;Lr=!1,Io=null}else throw Error(E(198));Lo||(Lo=!0,tc=c)}}function di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Np(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sd(t){if(di(t)!==t)throw Error(E(188))}function my(t){var e=t.alternate;if(!e){if(e=di(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Sd(r),t;if(s===i)return Sd(r),e;s=s.sibling}throw Error(E(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==i)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function Up(t){return t=my(t),t!==null?Bp(t):null}function Bp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Bp(t);if(e!==null)return e;t=t.sibling}return null}var Wp=at.unstable_scheduleCallback,Cd=at.unstable_cancelCallback,yy=at.unstable_shouldYield,vy=at.unstable_requestPaint,ge=at.unstable_now,wy=at.unstable_getCurrentPriorityLevel,ou=at.unstable_ImmediatePriority,Hp=at.unstable_UserBlockingPriority,Ro=at.unstable_NormalPriority,xy=at.unstable_LowPriority,Vp=at.unstable_IdlePriority,ga=null,jt=null;function _y(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(ga,t,void 0,(t.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Sy,by=Math.log,ky=Math.LN2;function Sy(t){return t>>>=0,t===0?32:31-(by(t)/ky|0)|0}var js=64,$s=4194304;function Er(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zo(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Er(a):(s&=o,s!==0&&(i=Er(s)))}else o=n&~r,o!==0?i=Er(o):s!==0&&(i=Er(s));if(i===0)return 0;if(e!==0&&e!==i&&(e&r)===0&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if((i&4)!==0&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Pt(e),r=1<<n,i|=t[n],e&=~r;return i}function Cy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Py(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Pt(s),a=1<<o,l=r[o];l===-1?((a&n)===0||(a&i)!==0)&&(r[o]=Cy(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function nc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kp(){var t=js;return js<<=1,(js&4194240)===0&&(js=64),t}function Ga(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pt(e),t[e]=n}function Ey(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Pt(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function au(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Pt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Q=0;function Yp(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var qp,lu,Gp,Jp,Qp,ic=!1,Fs=[],vn=null,wn=null,xn=null,Zr=new Map,Xr=new Map,ln=[],Ty="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pd(t,e){switch(t){case"focusin":case"focusout":vn=null;break;case"dragenter":case"dragleave":wn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":Zr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(e.pointerId)}}function hr(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ss(e),e!==null&&lu(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Oy(t,e,n,i,r){switch(e){case"focusin":return vn=hr(vn,t,e,n,i,r),!0;case"dragenter":return wn=hr(wn,t,e,n,i,r),!0;case"mouseover":return xn=hr(xn,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Zr.set(s,hr(Zr.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Xr.set(s,hr(Xr.get(s)||null,t,e,n,i,r)),!0}return!1}function Zp(t){var e=Yn(t.target);if(e!==null){var n=di(e);if(n!==null){if(e=n.tag,e===13){if(e=Np(n),e!==null){t.blockedOn=e,Qp(t.priority,function(){Gp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Zl=i,n.target.dispatchEvent(i),Zl=null}else return e=Ss(n),e!==null&&lu(e),t.blockedOn=n,!1;e.shift()}return!0}function Ed(t,e,n){vo(t)&&n.delete(e)}function Ay(){ic=!1,vn!==null&&vo(vn)&&(vn=null),wn!==null&&vo(wn)&&(wn=null),xn!==null&&vo(xn)&&(xn=null),Zr.forEach(Ed),Xr.forEach(Ed)}function fr(t,e){t.blockedOn===e&&(t.blockedOn=null,ic||(ic=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,Ay)))}function es(t){function e(r){return fr(r,t)}if(0<Fs.length){fr(Fs[0],t);for(var n=1;n<Fs.length;n++){var i=Fs[n];i.blockedOn===t&&(i.blockedOn=null)}}for(vn!==null&&fr(vn,t),wn!==null&&fr(wn,t),xn!==null&&fr(xn,t),Zr.forEach(e),Xr.forEach(e),n=0;n<ln.length;n++)i=ln[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ln.length&&(n=ln[0],n.blockedOn===null);)Zp(n),n.blockedOn===null&&ln.shift()}var Fi=en.ReactCurrentBatchConfig,jo=!0;function Dy(t,e,n,i){var r=Q,s=Fi.transition;Fi.transition=null;try{Q=1,cu(t,e,n,i)}finally{Q=r,Fi.transition=s}}function My(t,e,n,i){var r=Q,s=Fi.transition;Fi.transition=null;try{Q=4,cu(t,e,n,i)}finally{Q=r,Fi.transition=s}}function cu(t,e,n,i){if(jo){var r=rc(t,e,n,i);if(r===null)sl(t,e,i,$o,n),Pd(t,i);else if(Oy(r,t,e,n,i))i.stopPropagation();else if(Pd(t,i),e&4&&-1<Ty.indexOf(t)){for(;r!==null;){var s=Ss(r);if(s!==null&&qp(s),s=rc(t,e,n,i),s===null&&sl(t,e,i,$o,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else sl(t,e,i,null,n)}}var $o=null;function rc(t,e,n,i){if($o=null,t=su(i),t=Yn(t),t!==null)if(e=di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Np(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $o=t,null}function Xp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wy()){case ou:return 1;case Hp:return 4;case Ro:case xy:return 16;case Vp:return 536870912;default:return 16}default:return 16}}var dn=null,uu=null,wo=null;function eg(){if(wo)return wo;var t,e=uu,n=e.length,i,r="value"in dn?dn.value:dn.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return wo=r.slice(t,1<i?1-i:void 0)}function xo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ns(){return!0}function Td(){return!1}function ct(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ns:Td,this.isPropagationStopped=Td,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),e}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},du=ct(sr),ks=he({},sr,{view:0,detail:0}),Iy=ct(ks),Ja,Qa,pr,ma=he({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pr&&(pr&&t.type==="mousemove"?(Ja=t.screenX-pr.screenX,Qa=t.screenY-pr.screenY):Qa=Ja=0,pr=t),Ja)},movementY:function(t){return"movementY"in t?t.movementY:Qa}}),Od=ct(ma),Ly=he({},ma,{dataTransfer:0}),Ry=ct(Ly),zy=he({},ks,{relatedTarget:0}),Za=ct(zy),jy=he({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),$y=ct(jy),Fy=he({},sr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ny=ct(Fy),Uy=he({},sr,{data:0}),Ad=ct(Uy),By={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hy[t])?!!e[t]:!1}function hu(){return Vy}var Ky=he({},ks,{key:function(t){if(t.key){var e=By[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hu,charCode:function(t){return t.type==="keypress"?xo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yy=ct(Ky),qy=he({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dd=ct(qy),Gy=he({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hu}),Jy=ct(Gy),Qy=he({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zy=ct(Qy),Xy=he({},ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ev=ct(Xy),tv=[9,13,27,32],fu=Jt&&"CompositionEvent"in window,Rr=null;Jt&&"documentMode"in document&&(Rr=document.documentMode);var nv=Jt&&"TextEvent"in window&&!Rr,tg=Jt&&(!fu||Rr&&8<Rr&&11>=Rr),Md=String.fromCharCode(32),Id=!1;function ng(t,e){switch(t){case"keyup":return tv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ig(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Si=!1;function iv(t,e){switch(t){case"compositionend":return ig(e);case"keypress":return e.which!==32?null:(Id=!0,Md);case"textInput":return t=e.data,t===Md&&Id?null:t;default:return null}}function rv(t,e){if(Si)return t==="compositionend"||!fu&&ng(t,e)?(t=eg(),wo=uu=dn=null,Si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tg&&e.locale!=="ko"?null:e.data;default:return null}}var sv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sv[t.type]:e==="textarea"}function rg(t,e,n,i){Rp(i),e=Fo(e,"onChange"),0<e.length&&(n=new du("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var zr=null,ts=null;function ov(t){gg(t,0)}function ya(t){var e=Ei(t);if(Tp(e))return t}function av(t,e){if(t==="change")return e}var sg=!1;if(Jt){var Xa;if(Jt){var el="oninput"in document;if(!el){var Rd=document.createElement("div");Rd.setAttribute("oninput","return;"),el=typeof Rd.oninput=="function"}Xa=el}else Xa=!1;sg=Xa&&(!document.documentMode||9<document.documentMode)}function zd(){zr&&(zr.detachEvent("onpropertychange",og),ts=zr=null)}function og(t){if(t.propertyName==="value"&&ya(ts)){var e=[];rg(e,ts,t,su(t)),Fp(ov,e)}}function lv(t,e,n){t==="focusin"?(zd(),zr=e,ts=n,zr.attachEvent("onpropertychange",og)):t==="focusout"&&zd()}function cv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ya(ts)}function uv(t,e){if(t==="click")return ya(e)}function dv(t,e){if(t==="input"||t==="change")return ya(e)}function hv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tt=typeof Object.is=="function"?Object.is:hv;function ns(t,e){if(Tt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Nl.call(e,r)||!Tt(t[r],e[r]))return!1}return!0}function jd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $d(t,e){var n=jd(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jd(n)}}function ag(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ag(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lg(){for(var t=window,e=Mo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mo(t.document)}return e}function pu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fv(t){var e=lg(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ag(n.ownerDocument.documentElement,n)){if(i!==null&&pu(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=$d(n,s);var o=$d(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pv=Jt&&"documentMode"in document&&11>=document.documentMode,Ci=null,sc=null,jr=null,oc=!1;function Fd(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oc||Ci==null||Ci!==Mo(i)||(i=Ci,"selectionStart"in i&&pu(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),jr&&ns(jr,i)||(jr=i,i=Fo(sc,"onSelect"),0<i.length&&(e=new du("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ci)))}function Us(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pi={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionend:Us("Transition","TransitionEnd")},tl={},cg={};Jt&&(cg=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function va(t){if(tl[t])return tl[t];if(!Pi[t])return t;var e=Pi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cg)return tl[t]=e[n];return t}var ug=va("animationend"),dg=va("animationiteration"),hg=va("animationstart"),fg=va("transitionend"),pg=new Map,Nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(t,e){pg.set(t,e),ui(e,[t])}for(var nl=0;nl<Nd.length;nl++){var il=Nd[nl],gv=il.toLowerCase(),mv=il[0].toUpperCase()+il.slice(1);In(gv,"on"+mv)}In(ug,"onAnimationEnd");In(dg,"onAnimationIteration");In(hg,"onAnimationStart");In("dblclick","onDoubleClick");In("focusin","onFocus");In("focusout","onBlur");In(fg,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Ud(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,gy(i,e,void 0,t),t.currentTarget=null}function gg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Ud(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Ud(r,a,c),s=l}}}if(Lo)throw t=tc,Lo=!1,tc=null,t}function se(t,e){var n=e[dc];n===void 0&&(n=e[dc]=new Set);var i=t+"__bubble";n.has(i)||(mg(e,t,2,!1),n.add(i))}function rl(t,e,n){var i=0;e&&(i|=4),mg(n,t,i,e)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function is(t){if(!t[Bs]){t[Bs]=!0,kp.forEach(function(n){n!=="selectionchange"&&(yv.has(n)||rl(n,!1,t),rl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bs]||(e[Bs]=!0,rl("selectionchange",!1,e))}}function mg(t,e,n,i){switch(Xp(e)){case 1:var r=Dy;break;case 4:r=My;break;default:r=cu}n=r.bind(null,e,n,t),r=void 0,!ec||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function sl(t,e,n,i,r){var s=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Yn(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Fp(function(){var c=s,u=su(n),d=[];e:{var h=pg.get(t);if(h!==void 0){var f=du,m=t;switch(t){case"keypress":if(xo(n)===0)break e;case"keydown":case"keyup":f=Yy;break;case"focusin":m="focus",f=Za;break;case"focusout":m="blur",f=Za;break;case"beforeblur":case"afterblur":f=Za;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Ry;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Jy;break;case ug:case dg:case hg:f=$y;break;case fg:f=Zy;break;case"scroll":f=Iy;break;case"wheel":f=ev;break;case"copy":case"cut":case"paste":f=Ny;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Dd}var y=(e&4)!==0,w=!y&&t==="scroll",p=y?h!==null?h+"Capture":null:h;y=[];for(var g=c,v;g!==null;){v=g;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,p!==null&&(x=Qr(g,p),x!=null&&y.push(rs(g,x,v)))),w)break;g=g.return}0<y.length&&(h=new f(h,m,null,n,u),d.push({event:h,listeners:y}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Zl&&(m=n.relatedTarget||n.fromElement)&&(Yn(m)||m[Qt]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=c,m=m?Yn(m):null,m!==null&&(w=di(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(y=Od,x="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=Dd,x="onPointerLeave",p="onPointerEnter",g="pointer"),w=f==null?h:Ei(f),v=m==null?h:Ei(m),h=new y(x,g+"leave",f,n,u),h.target=w,h.relatedTarget=v,x=null,Yn(u)===c&&(y=new y(p,g+"enter",m,n,u),y.target=v,y.relatedTarget=w,x=y),w=x,f&&m)t:{for(y=f,p=m,g=0,v=y;v;v=mi(v))g++;for(v=0,x=p;x;x=mi(x))v++;for(;0<g-v;)y=mi(y),g--;for(;0<v-g;)p=mi(p),v--;for(;g--;){if(y===p||p!==null&&y===p.alternate)break t;y=mi(y),p=mi(p)}y=null}else y=null;f!==null&&Bd(d,h,f,y,!1),m!==null&&w!==null&&Bd(d,w,m,y,!0)}}e:{if(h=c?Ei(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var b=av;else if(Ld(h))if(sg)b=dv;else{b=cv;var k=lv}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=uv);if(b&&(b=b(t,c))){rg(d,b,n,u);break e}k&&k(t,h,c),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Yl(h,"number",h.value)}switch(k=c?Ei(c):window,t){case"focusin":(Ld(k)||k.contentEditable==="true")&&(Ci=k,sc=c,jr=null);break;case"focusout":jr=sc=Ci=null;break;case"mousedown":oc=!0;break;case"contextmenu":case"mouseup":case"dragend":oc=!1,Fd(d,n,u);break;case"selectionchange":if(pv)break;case"keydown":case"keyup":Fd(d,n,u)}var P;if(fu)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Si?ng(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(tg&&n.locale!=="ko"&&(Si||S!=="onCompositionStart"?S==="onCompositionEnd"&&Si&&(P=eg()):(dn=u,uu="value"in dn?dn.value:dn.textContent,Si=!0)),k=Fo(c,S),0<k.length&&(S=new Ad(S,t,null,n,u),d.push({event:S,listeners:k}),P?S.data=P:(P=ig(n),P!==null&&(S.data=P)))),(P=nv?iv(t,n):rv(t,n))&&(c=Fo(c,"onBeforeInput"),0<c.length&&(u=new Ad("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=P))}gg(d,e)})}function rs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fo(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Qr(t,n),s!=null&&i.unshift(rs(t,s,r)),s=Qr(t,e),s!=null&&i.push(rs(t,s,r))),t=t.return}return i}function mi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bd(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Qr(n,s),l!=null&&o.unshift(rs(n,l,a))):r||(l=Qr(n,s),l!=null&&o.push(rs(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vv=/\r\n?/g,wv=/\u0000|\uFFFD/g;function Wd(t){return(typeof t=="string"?t:""+t).replace(vv,`
`).replace(wv,"")}function Ws(t,e,n){if(e=Wd(e),Wd(t)!==e&&n)throw Error(E(425))}function No(){}var ac=null,lc=null;function cc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uc=typeof setTimeout=="function"?setTimeout:void 0,xv=typeof clearTimeout=="function"?clearTimeout:void 0,Hd=typeof Promise=="function"?Promise:void 0,_v=typeof queueMicrotask=="function"?queueMicrotask:typeof Hd!="undefined"?function(t){return Hd.resolve(null).then(t).catch(bv)}:uc;function bv(t){setTimeout(function(){throw t})}function ol(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),es(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);es(e)}function _n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var or=Math.random().toString(36).slice(2),Rt="__reactFiber$"+or,ss="__reactProps$"+or,Qt="__reactContainer$"+or,dc="__reactEvents$"+or,kv="__reactListeners$"+or,Sv="__reactHandles$"+or;function Yn(t){var e=t[Rt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qt]||n[Rt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vd(t);t!==null;){if(n=t[Rt])return n;t=Vd(t)}return e}t=n,n=t.parentNode}return null}function Ss(t){return t=t[Rt]||t[Qt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function wa(t){return t[ss]||null}var hc=[],Ti=-1;function Ln(t){return{current:t}}function oe(t){0>Ti||(t.current=hc[Ti],hc[Ti]=null,Ti--)}function re(t,e){Ti++,hc[Ti]=t.current,t.current=e}var An={},je=Ln(An),Qe=Ln(!1),ei=An;function Yi(t,e){var n=t.type.contextTypes;if(!n)return An;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ze(t){return t=t.childContextTypes,t!=null}function Uo(){oe(Qe),oe(je)}function Kd(t,e,n){if(je.current!==An)throw Error(E(168));re(je,e),re(Qe,n)}function yg(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(E(108,ly(t)||"Unknown",r));return he({},n,i)}function Bo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||An,ei=je.current,re(je,t),re(Qe,Qe.current),!0}function Yd(t,e,n){var i=t.stateNode;if(!i)throw Error(E(169));n?(t=yg(t,e,ei),i.__reactInternalMemoizedMergedChildContext=t,oe(Qe),oe(je),re(je,t)):oe(Qe),re(Qe,n)}var Vt=null,xa=!1,al=!1;function vg(t){Vt===null?Vt=[t]:Vt.push(t)}function Cv(t){xa=!0,vg(t)}function Rn(){if(!al&&Vt!==null){al=!0;var t=0,e=Q;try{var n=Vt;for(Q=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Vt=null,xa=!1}catch(r){throw Vt!==null&&(Vt=Vt.slice(t+1)),Wp(ou,Rn),r}finally{Q=e,al=!1}}return null}var Oi=[],Ai=0,Wo=null,Ho=0,ht=[],ft=0,ti=null,Yt=1,qt="";function Bn(t,e){Oi[Ai++]=Ho,Oi[Ai++]=Wo,Wo=t,Ho=e}function wg(t,e,n){ht[ft++]=Yt,ht[ft++]=qt,ht[ft++]=ti,ti=t;var i=Yt;t=qt;var r=32-Pt(i)-1;i&=~(1<<r),n+=1;var s=32-Pt(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Yt=1<<32-Pt(e)+r|n<<r|i,qt=s+t}else Yt=1<<s|n<<r|i,qt=t}function gu(t){t.return!==null&&(Bn(t,1),wg(t,1,0))}function mu(t){for(;t===Wo;)Wo=Oi[--Ai],Oi[Ai]=null,Ho=Oi[--Ai],Oi[Ai]=null;for(;t===ti;)ti=ht[--ft],ht[ft]=null,qt=ht[--ft],ht[ft]=null,Yt=ht[--ft],ht[ft]=null}var ot=null,rt=null,le=!1,St=null;function xg(t,e){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ot=t,rt=_n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ot=t,rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ti!==null?{id:Yt,overflow:qt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ot=t,rt=null,!0):!1;default:return!1}}function fc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pc(t){if(le){var e=rt;if(e){var n=e;if(!qd(t,e)){if(fc(t))throw Error(E(418));e=_n(n.nextSibling);var i=ot;e&&qd(t,e)?xg(i,n):(t.flags=t.flags&-4097|2,le=!1,ot=t)}}else{if(fc(t))throw Error(E(418));t.flags=t.flags&-4097|2,le=!1,ot=t}}}function Gd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function Hs(t){if(t!==ot)return!1;if(!le)return Gd(t),le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cc(t.type,t.memoizedProps)),e&&(e=rt)){if(fc(t))throw _g(),Error(E(418));for(;e;)xg(t,e),e=_n(e.nextSibling)}if(Gd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rt=_n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rt=null}}else rt=ot?_n(t.stateNode.nextSibling):null;return!0}function _g(){for(var t=rt;t;)t=_n(t.nextSibling)}function qi(){rt=ot=null,le=!1}function yu(t){St===null?St=[t]:St.push(t)}var Pv=en.ReactCurrentBatchConfig;function gr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var i=n.stateNode}if(!i)throw Error(E(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Vs(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jd(t){var e=t._init;return e(t._payload)}function bg(t){function e(p,g){if(t){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function i(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function r(p,g){return p=Cn(p,g),p.index=0,p.sibling=null,p}function s(p,g,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,g,v,x){return g===null||g.tag!==6?(g=pl(v,p.mode,x),g.return=p,g):(g=r(g,v),g.return=p,g)}function l(p,g,v,x){var b=v.type;return b===ki?u(p,g,v.props.children,x,v.key):g!==null&&(g.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===sn&&Jd(b)===g.type)?(x=r(g,v.props),x.ref=gr(p,g,v),x.return=p,x):(x=Eo(v.type,v.key,v.props,null,p.mode,x),x.ref=gr(p,g,v),x.return=p,x)}function c(p,g,v,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=gl(v,p.mode,x),g.return=p,g):(g=r(g,v.children||[]),g.return=p,g)}function u(p,g,v,x,b){return g===null||g.tag!==7?(g=Qn(v,p.mode,x,b),g.return=p,g):(g=r(g,v),g.return=p,g)}function d(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=pl(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ls:return v=Eo(g.type,g.key,g.props,null,p.mode,v),v.ref=gr(p,null,g),v.return=p,v;case bi:return g=gl(g,p.mode,v),g.return=p,g;case sn:var x=g._init;return d(p,x(g._payload),v)}if(Pr(g)||ur(g))return g=Qn(g,p.mode,v,null),g.return=p,g;Vs(p,g)}return null}function h(p,g,v,x){var b=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(p,g,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ls:return v.key===b?l(p,g,v,x):null;case bi:return v.key===b?c(p,g,v,x):null;case sn:return b=v._init,h(p,g,b(v._payload),x)}if(Pr(v)||ur(v))return b!==null?null:u(p,g,v,x,null);Vs(p,v)}return null}function f(p,g,v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(v)||null,a(g,p,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ls:return p=p.get(x.key===null?v:x.key)||null,l(g,p,x,b);case bi:return p=p.get(x.key===null?v:x.key)||null,c(g,p,x,b);case sn:var k=x._init;return f(p,g,v,k(x._payload),b)}if(Pr(x)||ur(x))return p=p.get(v)||null,u(g,p,x,b,null);Vs(g,x)}return null}function m(p,g,v,x){for(var b=null,k=null,P=g,S=g=0,M=null;P!==null&&S<v.length;S++){P.index>S?(M=P,P=null):M=P.sibling;var O=h(p,P,v[S],x);if(O===null){P===null&&(P=M);break}t&&P&&O.alternate===null&&e(p,P),g=s(O,g,S),k===null?b=O:k.sibling=O,k=O,P=M}if(S===v.length)return n(p,P),le&&Bn(p,S),b;if(P===null){for(;S<v.length;S++)P=d(p,v[S],x),P!==null&&(g=s(P,g,S),k===null?b=P:k.sibling=P,k=P);return le&&Bn(p,S),b}for(P=i(p,P);S<v.length;S++)M=f(P,p,S,v[S],x),M!==null&&(t&&M.alternate!==null&&P.delete(M.key===null?S:M.key),g=s(M,g,S),k===null?b=M:k.sibling=M,k=M);return t&&P.forEach(function(A){return e(p,A)}),le&&Bn(p,S),b}function y(p,g,v,x){var b=ur(v);if(typeof b!="function")throw Error(E(150));if(v=b.call(v),v==null)throw Error(E(151));for(var k=b=null,P=g,S=g=0,M=null,O=v.next();P!==null&&!O.done;S++,O=v.next()){P.index>S?(M=P,P=null):M=P.sibling;var A=h(p,P,O.value,x);if(A===null){P===null&&(P=M);break}t&&P&&A.alternate===null&&e(p,P),g=s(A,g,S),k===null?b=A:k.sibling=A,k=A,P=M}if(O.done)return n(p,P),le&&Bn(p,S),b;if(P===null){for(;!O.done;S++,O=v.next())O=d(p,O.value,x),O!==null&&(g=s(O,g,S),k===null?b=O:k.sibling=O,k=O);return le&&Bn(p,S),b}for(P=i(p,P);!O.done;S++,O=v.next())O=f(P,p,S,O.value,x),O!==null&&(t&&O.alternate!==null&&P.delete(O.key===null?S:O.key),g=s(O,g,S),k===null?b=O:k.sibling=O,k=O);return t&&P.forEach(function(z){return e(p,z)}),le&&Bn(p,S),b}function w(p,g,v,x){if(typeof v=="object"&&v!==null&&v.type===ki&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ls:e:{for(var b=v.key,k=g;k!==null;){if(k.key===b){if(b=v.type,b===ki){if(k.tag===7){n(p,k.sibling),g=r(k,v.props.children),g.return=p,p=g;break e}}else if(k.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===sn&&Jd(b)===k.type){n(p,k.sibling),g=r(k,v.props),g.ref=gr(p,k,v),g.return=p,p=g;break e}n(p,k);break}else e(p,k);k=k.sibling}v.type===ki?(g=Qn(v.props.children,p.mode,x,v.key),g.return=p,p=g):(x=Eo(v.type,v.key,v.props,null,p.mode,x),x.ref=gr(p,g,v),x.return=p,p=x)}return o(p);case bi:e:{for(k=v.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(p,g.sibling),g=r(g,v.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=gl(v,p.mode,x),g.return=p,p=g}return o(p);case sn:return k=v._init,w(p,g,k(v._payload),x)}if(Pr(v))return m(p,g,v,x);if(ur(v))return y(p,g,v,x);Vs(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(p,g.sibling),g=r(g,v),g.return=p,p=g):(n(p,g),g=pl(v,p.mode,x),g.return=p,p=g),o(p)):n(p,g)}return w}var Gi=bg(!0),kg=bg(!1),Vo=Ln(null),Ko=null,Di=null,vu=null;function wu(){vu=Di=Ko=null}function xu(t){var e=Vo.current;oe(Vo),t._currentValue=e}function gc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ni(t,e){Ko=t,vu=Di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Je=!0),t.firstContext=null)}function vt(t){var e=t._currentValue;if(vu!==t)if(t={context:t,memoizedValue:e,next:null},Di===null){if(Ko===null)throw Error(E(308));Di=t,Ko.dependencies={lanes:0,firstContext:t}}else Di=Di.next=t;return e}var qn=null;function _u(t){qn===null?qn=[t]:qn.push(t)}function Sg(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,_u(e)):(n.next=r.next,r.next=n),e.interleaved=n,Zt(t,i)}function Zt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var on=!1;function bu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(K&2)!==0){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Zt(t,n)}return r=i.interleaved,r===null?(e.next=e,_u(i)):(e.next=r.next,r.next=e),i.interleaved=e,Zt(t,n)}function _o(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,au(t,n)}}function Qd(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yo(t,e,n,i){var r=t.updateQueue;on=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(h=e,f=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=he({},d,h);break e;case 2:on=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ii|=o,t.lanes=o,t.memoizedState=d}}function Zd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(E(191,r));r.call(i)}}}var Cs={},$t=Ln(Cs),os=Ln(Cs),as=Ln(Cs);function Gn(t){if(t===Cs)throw Error(E(174));return t}function ku(t,e){switch(re(as,e),re(os,t),re($t,Cs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gl(e,t)}oe($t),re($t,e)}function Ji(){oe($t),oe(os),oe(as)}function Pg(t){Gn(as.current);var e=Gn($t.current),n=Gl(e,t.type);e!==n&&(re(os,t),re($t,n))}function Su(t){os.current===t&&(oe($t),oe(os))}var ue=Ln(0);function qo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ll=[];function Cu(){for(var t=0;t<ll.length;t++)ll[t]._workInProgressVersionPrimary=null;ll.length=0}var bo=en.ReactCurrentDispatcher,cl=en.ReactCurrentBatchConfig,ni=0,de=null,ve=null,ke=null,Go=!1,$r=!1,ls=0,Ev=0;function Ie(){throw Error(E(321))}function Pu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tt(t[n],e[n]))return!1;return!0}function Eu(t,e,n,i,r,s){if(ni=s,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bo.current=t===null||t.memoizedState===null?Dv:Mv,t=n(i,r),$r){s=0;do{if($r=!1,ls=0,25<=s)throw Error(E(301));s+=1,ke=ve=null,e.updateQueue=null,bo.current=Iv,t=n(i,r)}while($r)}if(bo.current=Jo,e=ve!==null&&ve.next!==null,ni=0,ke=ve=de=null,Go=!1,e)throw Error(E(300));return t}function Tu(){var t=ls!==0;return ls=0,t}function Mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?de.memoizedState=ke=t:ke=ke.next=t,ke}function wt(){if(ve===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=ve.next;var e=ke===null?de.memoizedState:ke.next;if(e!==null)ke=e,ve=t;else{if(t===null)throw Error(E(310));ve=t,t={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},ke===null?de.memoizedState=ke=t:ke=ke.next=t}return ke}function cs(t,e){return typeof e=="function"?e(t):e}function ul(t){var e=wt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var i=ve,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ni&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,de.lanes|=u,ii|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Tt(i,e.memoizedState)||(Je=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,de.lanes|=s,ii|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dl(t){var e=wt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Tt(s,e.memoizedState)||(Je=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Eg(){}function Tg(t,e){var n=de,i=wt(),r=e(),s=!Tt(i.memoizedState,r);if(s&&(i.memoizedState=r,Je=!0),i=i.queue,Ou(Dg.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(n.flags|=2048,us(9,Ag.bind(null,n,i,r,e),void 0,null),Ce===null)throw Error(E(349));(ni&30)!==0||Og(n,e,r)}return r}function Og(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ag(t,e,n,i){e.value=n,e.getSnapshot=i,Mg(e)&&Ig(t)}function Dg(t,e,n){return n(function(){Mg(e)&&Ig(t)})}function Mg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tt(t,n)}catch{return!0}}function Ig(t){var e=Zt(t,1);e!==null&&Et(e,t,1,-1)}function Xd(t){var e=Mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:t},e.queue=t,t=t.dispatch=Av.bind(null,de,t),[e.memoizedState,t]}function us(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Lg(){return wt().memoizedState}function ko(t,e,n,i){var r=Mt();de.flags|=t,r.memoizedState=us(1|e,n,void 0,i===void 0?null:i)}function _a(t,e,n,i){var r=wt();i=i===void 0?null:i;var s=void 0;if(ve!==null){var o=ve.memoizedState;if(s=o.destroy,i!==null&&Pu(i,o.deps)){r.memoizedState=us(e,n,s,i);return}}de.flags|=t,r.memoizedState=us(1|e,n,s,i)}function eh(t,e){return ko(8390656,8,t,e)}function Ou(t,e){return _a(2048,8,t,e)}function Rg(t,e){return _a(4,2,t,e)}function zg(t,e){return _a(4,4,t,e)}function jg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $g(t,e,n){return n=n!=null?n.concat([t]):null,_a(4,4,jg.bind(null,e,t),n)}function Au(){}function Fg(t,e){var n=wt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pu(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ng(t,e){var n=wt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pu(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Ug(t,e,n){return(ni&21)===0?(t.baseState&&(t.baseState=!1,Je=!0),t.memoizedState=n):(Tt(n,e)||(n=Kp(),de.lanes|=n,ii|=n,t.baseState=!0),e)}function Tv(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var i=cl.transition;cl.transition={};try{t(!1),e()}finally{Q=n,cl.transition=i}}function Bg(){return wt().memoizedState}function Ov(t,e,n){var i=Sn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Wg(t))Hg(e,n);else if(n=Sg(t,e,n,i),n!==null){var r=Ue();Et(n,t,i,r),Vg(n,e,i)}}function Av(t,e,n){var i=Sn(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wg(t))Hg(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Tt(a,o)){var l=e.interleaved;l===null?(r.next=r,_u(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=Sg(t,e,r,i),n!==null&&(r=Ue(),Et(n,t,i,r),Vg(n,e,i))}}function Wg(t){var e=t.alternate;return t===de||e!==null&&e===de}function Hg(t,e){$r=Go=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Vg(t,e,n){if((n&4194240)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,au(t,n)}}var Jo={readContext:vt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},Dv={readContext:vt,useCallback:function(t,e){return Mt().memoizedState=[t,e===void 0?null:e],t},useContext:vt,useEffect:eh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ko(4194308,4,jg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ko(4194308,4,t,e)},useInsertionEffect:function(t,e){return ko(4,2,t,e)},useMemo:function(t,e){var n=Mt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Mt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ov.bind(null,de,t),[i.memoizedState,t]},useRef:function(t){var e=Mt();return t={current:t},e.memoizedState=t},useState:Xd,useDebugValue:Au,useDeferredValue:function(t){return Mt().memoizedState=t},useTransition:function(){var t=Xd(!1),e=t[0];return t=Tv.bind(null,t[1]),Mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=de,r=Mt();if(le){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),Ce===null)throw Error(E(349));(ni&30)!==0||Og(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,eh(Dg.bind(null,i,s,t),[t]),i.flags|=2048,us(9,Ag.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Mt(),e=Ce.identifierPrefix;if(le){var n=qt,i=Yt;n=(i&~(1<<32-Pt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ls++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ev++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mv={readContext:vt,useCallback:Fg,useContext:vt,useEffect:Ou,useImperativeHandle:$g,useInsertionEffect:Rg,useLayoutEffect:zg,useMemo:Ng,useReducer:ul,useRef:Lg,useState:function(){return ul(cs)},useDebugValue:Au,useDeferredValue:function(t){var e=wt();return Ug(e,ve.memoizedState,t)},useTransition:function(){var t=ul(cs)[0],e=wt().memoizedState;return[t,e]},useMutableSource:Eg,useSyncExternalStore:Tg,useId:Bg,unstable_isNewReconciler:!1},Iv={readContext:vt,useCallback:Fg,useContext:vt,useEffect:Ou,useImperativeHandle:$g,useInsertionEffect:Rg,useLayoutEffect:zg,useMemo:Ng,useReducer:dl,useRef:Lg,useState:function(){return dl(cs)},useDebugValue:Au,useDeferredValue:function(t){var e=wt();return ve===null?e.memoizedState=t:Ug(e,ve.memoizedState,t)},useTransition:function(){var t=dl(cs)[0],e=wt().memoizedState;return[t,e]},useMutableSource:Eg,useSyncExternalStore:Tg,useId:Bg,unstable_isNewReconciler:!1};function _t(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ba={isMounted:function(t){return(t=t._reactInternals)?di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ue(),r=Sn(t),s=Gt(i,r);s.payload=e,n!=null&&(s.callback=n),e=bn(t,s,r),e!==null&&(Et(e,t,r,i),_o(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ue(),r=Sn(t),s=Gt(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=bn(t,s,r),e!==null&&(Et(e,t,r,i),_o(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ue(),i=Sn(t),r=Gt(n,i);r.tag=2,e!=null&&(r.callback=e),e=bn(t,r,i),e!==null&&(Et(e,t,i,n),_o(e,t,i))}};function th(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ns(n,i)||!ns(r,s):!0}function Kg(t,e,n){var i=!1,r=An,s=e.contextType;return typeof s=="object"&&s!==null?s=vt(s):(r=Ze(e)?ei:je.current,i=e.contextTypes,s=(i=i!=null)?Yi(t,r):An),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ba,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function nh(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ba.enqueueReplaceState(e,e.state,null)}function yc(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},bu(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=vt(s):(s=Ze(e)?ei:je.current,r.context=Yi(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(mc(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ba.enqueueReplaceState(r,r.state,null),Yo(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Qi(t,e){try{var n="",i=e;do n+=ay(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function hl(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function vc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lv=typeof WeakMap=="function"?WeakMap:Map;function Yg(t,e,n){n=Gt(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Zo||(Zo=!0,Tc=i),vc(t,e)},n}function qg(t,e,n){n=Gt(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){vc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vc(t,e),typeof i!="function"&&(kn===null?kn=new Set([this]):kn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ih(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Lv;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=qv.bind(null,t,e,n),e.then(t,t))}function rh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sh(t,e,n,i,r){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gt(-1,1),e.tag=2,bn(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var Rv=en.ReactCurrentOwner,Je=!1;function Ne(t,e,n,i){e.child=t===null?kg(e,null,n,i):Gi(e,t.child,n,i)}function oh(t,e,n,i,r){n=n.render;var s=e.ref;return Ni(e,r),i=Eu(t,e,n,i,s,r),n=Tu(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xt(t,e,r)):(le&&n&&gu(e),e.flags|=1,Ne(t,e,i,r),e.child)}function ah(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!$u(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Gg(t,e,s,i,r)):(t=Eo(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&r)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ns,n(o,i)&&t.ref===e.ref)return Xt(t,e,r)}return e.flags|=1,t=Cn(s,i),t.ref=e.ref,t.return=e,e.child=t}function Gg(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ns(s,i)&&t.ref===e.ref)if(Je=!1,e.pendingProps=i=s,(t.lanes&r)!==0)(t.flags&131072)!==0&&(Je=!0);else return e.lanes=t.lanes,Xt(t,e,r)}return wc(t,e,n,i,r)}function Jg(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(Ii,it),it|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(Ii,it),it|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,re(Ii,it),it|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,re(Ii,it),it|=i;return Ne(t,e,r,n),e.child}function Qg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wc(t,e,n,i,r){var s=Ze(n)?ei:je.current;return s=Yi(e,s),Ni(e,r),n=Eu(t,e,n,i,s,r),i=Tu(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xt(t,e,r)):(le&&i&&gu(e),e.flags|=1,Ne(t,e,n,r),e.child)}function lh(t,e,n,i,r){if(Ze(n)){var s=!0;Bo(e)}else s=!1;if(Ni(e,r),e.stateNode===null)So(t,e),Kg(e,n,i),yc(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=vt(c):(c=Ze(n)?ei:je.current,c=Yi(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&nh(e,o,i,c),on=!1;var h=e.memoizedState;o.state=h,Yo(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Qe.current||on?(typeof u=="function"&&(mc(e,n,u,i),l=e.memoizedState),(a=on||th(e,n,a,i,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Cg(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:_t(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=vt(l):(l=Ze(n)?ei:je.current,l=Yi(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&nh(e,o,i,l),on=!1,h=e.memoizedState,o.state=h,Yo(e,i,o,r);var m=e.memoizedState;a!==d||h!==m||Qe.current||on?(typeof f=="function"&&(mc(e,n,f,i),m=e.memoizedState),(c=on||th(e,n,c,i,h,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return xc(t,e,n,i,s,r)}function xc(t,e,n,i,r,s){Qg(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Yd(e,n,!1),Xt(t,e,s);i=e.stateNode,Rv.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Gi(e,t.child,null,s),e.child=Gi(e,null,a,s)):Ne(t,e,a,s),e.memoizedState=i.state,r&&Yd(e,n,!0),e.child}function Zg(t){var e=t.stateNode;e.pendingContext?Kd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kd(t,e.context,!1),ku(t,e.containerInfo)}function ch(t,e,n,i,r){return qi(),yu(r),e.flags|=256,Ne(t,e,n,i),e.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function bc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xg(t,e,n){var i=e.pendingProps,r=ue.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),re(ue,r&1),t===null)return pc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ca(o,i,0,null),t=Qn(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=bc(n),e.memoizedState=_c,t):Du(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return zv(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return(o&1)===0&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Cn(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Cn(a,s):(s=Qn(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?bc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=_c,i}return s=t.child,t=s.sibling,i=Cn(s,{mode:"visible",children:i.children}),(e.mode&1)===0&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Du(t,e){return e=Ca({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ks(t,e,n,i){return i!==null&&yu(i),Gi(e,t.child,null,n),t=Du(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zv(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=hl(Error(E(422))),Ks(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ca({mode:"visible",children:i.children},r,0,null),s=Qn(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,(e.mode&1)!==0&&Gi(e,t.child,null,o),e.child.memoizedState=bc(o),e.memoizedState=_c,s);if((e.mode&1)===0)return Ks(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(E(419)),i=hl(s,i,void 0),Ks(t,e,o,i)}if(a=(o&t.childLanes)!==0,Je||a){if(i=Ce,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=(r&(i.suspendedLanes|o))!==0?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Zt(t,r),Et(i,t,r,-1))}return ju(),i=hl(Error(E(421))),Ks(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Gv.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,rt=_n(r.nextSibling),ot=e,le=!0,St=null,t!==null&&(ht[ft++]=Yt,ht[ft++]=qt,ht[ft++]=ti,Yt=t.id,qt=t.overflow,ti=e),e=Du(e,i.children),e.flags|=4096,e)}function uh(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),gc(t.return,e,n)}function fl(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function em(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ne(t,e,i.children,n),i=ue.current,(i&2)!==0)i=i&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uh(t,n,e);else if(t.tag===19)uh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(re(ue,i),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&qo(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),fl(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&qo(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}fl(e,!0,n,null,s);break;case"together":fl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function So(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ii|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=Cn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jv(t,e,n){switch(e.tag){case 3:Zg(e),qi();break;case 5:Pg(e);break;case 1:Ze(e.type)&&Bo(e);break;case 4:ku(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;re(Vo,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(re(ue,ue.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?Xg(t,e,n):(re(ue,ue.current&1),t=Xt(t,e,n),t!==null?t.sibling:null);re(ue,ue.current&1);break;case 19:if(i=(n&e.childLanes)!==0,(t.flags&128)!==0){if(i)return em(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),re(ue,ue.current),i)break;return null;case 22:case 23:return e.lanes=0,Jg(t,e,n)}return Xt(t,e,n)}var tm,kc,nm,im;tm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kc=function(){};nm=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Gn($t.current);var s=null;switch(n){case"input":r=Vl(t,r),i=Vl(t,i),s=[];break;case"select":r=he({},r,{value:void 0}),i=he({},i,{value:void 0}),s=[];break;case"textarea":r=ql(t,r),i=ql(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=No)}Jl(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Gr.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Gr.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};im=function(t,e,n,i){n!==i&&(e.flags|=4)};function mr(t,e){if(!le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function $v(t,e,n){var i=e.pendingProps;switch(mu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return Ze(e.type)&&Uo(),Le(e),null;case 3:return i=e.stateNode,Ji(),oe(Qe),oe(je),Cu(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Hs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,St!==null&&(Dc(St),St=null))),kc(t,e),Le(e),null;case 5:Su(e);var r=Gn(as.current);if(n=e.type,t!==null&&e.stateNode!=null)nm(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(E(166));return Le(e),null}if(t=Gn($t.current),Hs(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Rt]=e,i[ss]=s,t=(e.mode&1)!==0,n){case"dialog":se("cancel",i),se("close",i);break;case"iframe":case"object":case"embed":se("load",i);break;case"video":case"audio":for(r=0;r<Tr.length;r++)se(Tr[r],i);break;case"source":se("error",i);break;case"img":case"image":case"link":se("error",i),se("load",i);break;case"details":se("toggle",i);break;case"input":wd(i,s),se("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},se("invalid",i);break;case"textarea":_d(i,s),se("invalid",i)}Jl(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ws(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ws(i.textContent,a,t),r=["children",""+a]):Gr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&se("scroll",i)}switch(n){case"input":Rs(i),xd(i,s,!0);break;case"textarea":Rs(i),bd(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=No)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Rt]=e,t[ss]=i,tm(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ql(n,i),n){case"dialog":se("cancel",t),se("close",t),r=i;break;case"iframe":case"object":case"embed":se("load",t),r=i;break;case"video":case"audio":for(r=0;r<Tr.length;r++)se(Tr[r],t);r=i;break;case"source":se("error",t),r=i;break;case"img":case"image":case"link":se("error",t),se("load",t),r=i;break;case"details":se("toggle",t),r=i;break;case"input":wd(t,i),r=Vl(t,i),se("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=he({},i,{value:void 0}),se("invalid",t);break;case"textarea":_d(t,i),r=ql(t,i),se("invalid",t);break;default:r=i}Jl(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Lp(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Mp(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Jr(t,l):typeof l=="number"&&Jr(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Gr.hasOwnProperty(s)?l!=null&&s==="onScroll"&&se("scroll",t):l!=null&&tu(t,s,l,o))}switch(n){case"input":Rs(t),xd(t,i,!1);break;case"textarea":Rs(t),bd(t);break;case"option":i.value!=null&&t.setAttribute("value",""+On(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?zi(t,!!i.multiple,s,!1):i.defaultValue!=null&&zi(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=No)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Le(e),null;case 6:if(t&&e.stateNode!=null)im(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(E(166));if(n=Gn(as.current),Gn($t.current),Hs(e)){if(i=e.stateNode,n=e.memoizedProps,i[Rt]=e,(s=i.nodeValue!==n)&&(t=ot,t!==null))switch(t.tag){case 3:Ws(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ws(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Rt]=e,e.stateNode=i}return Le(e),null;case 13:if(oe(ue),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(le&&rt!==null&&(e.mode&1)!==0&&(e.flags&128)===0)_g(),qi(),e.flags|=98560,s=!1;else if(s=Hs(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[Rt]=e}else qi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Le(e),s=!1}else St!==null&&(Dc(St),St=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(ue.current&1)!==0?we===0&&(we=3):ju())),e.updateQueue!==null&&(e.flags|=4),Le(e),null);case 4:return Ji(),kc(t,e),t===null&&is(e.stateNode.containerInfo),Le(e),null;case 10:return xu(e.type._context),Le(e),null;case 17:return Ze(e.type)&&Uo(),Le(e),null;case 19:if(oe(ue),s=e.memoizedState,s===null)return Le(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)mr(s,!1);else{if(we!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=qo(t),o!==null){for(e.flags|=128,mr(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(ue,ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&ge()>Zi&&(e.flags|=128,i=!0,mr(s,!1),e.lanes=4194304)}else{if(!i)if(t=qo(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!le)return Le(e),null}else 2*ge()-s.renderingStartTime>Zi&&n!==1073741824&&(e.flags|=128,i=!0,mr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ge(),e.sibling=null,n=ue.current,re(ue,i?n&1|2:n&1),e):(Le(e),null);case 22:case 23:return zu(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&(e.mode&1)!==0?(it&1073741824)!==0&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function Fv(t,e){switch(mu(e),e.tag){case 1:return Ze(e.type)&&Uo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ji(),oe(Qe),oe(je),Cu(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Su(e),null;case 13:if(oe(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(ue),null;case 4:return Ji(),null;case 10:return xu(e.type._context),null;case 22:case 23:return zu(),null;case 24:return null;default:return null}}var Ys=!1,ze=!1,Nv=typeof WeakSet=="function"?WeakSet:Set,L=null;function Mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){fe(t,e,i)}else n.current=null}function Sc(t,e,n){try{n()}catch(i){fe(t,e,i)}}var dh=!1;function Uv(t,e){if(ac=jo,t=lg(),pu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===r&&(a=o),h===s&&++u===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lc={focusedElem:t,selectionRange:n},jo=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var m=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:_t(e.type,y),w);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(x){fe(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return m=dh,dh=!1,m}function Fr(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Sc(e,n,s)}r=r.next}while(r!==i)}}function ka(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Cc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rm(t){var e=t.alternate;e!==null&&(t.alternate=null,rm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rt],delete e[ss],delete e[dc],delete e[kv],delete e[Sv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sm(t){return t.tag===5||t.tag===3||t.tag===4}function hh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=No));else if(i!==4&&(t=t.child,t!==null))for(Pc(t,e,n),t=t.sibling;t!==null;)Pc(t,e,n),t=t.sibling}function Ec(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ec(t,e,n),t=t.sibling;t!==null;)Ec(t,e,n),t=t.sibling}var Oe=null,bt=!1;function tn(t,e,n){for(n=n.child;n!==null;)om(t,e,n),n=n.sibling}function om(t,e,n){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(ga,n)}catch{}switch(n.tag){case 5:ze||Mi(n,e);case 6:var i=Oe,r=bt;Oe=null,tn(t,e,n),Oe=i,bt=r,Oe!==null&&(bt?(t=Oe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(bt?(t=Oe,n=n.stateNode,t.nodeType===8?ol(t.parentNode,n):t.nodeType===1&&ol(t,n),es(t)):ol(Oe,n.stateNode));break;case 4:i=Oe,r=bt,Oe=n.stateNode.containerInfo,bt=!0,tn(t,e,n),Oe=i,bt=r;break;case 0:case 11:case 14:case 15:if(!ze&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Sc(n,e,o),r=r.next}while(r!==i)}tn(t,e,n);break;case 1:if(!ze&&(Mi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){fe(n,e,a)}tn(t,e,n);break;case 21:tn(t,e,n);break;case 22:n.mode&1?(ze=(i=ze)||n.memoizedState!==null,tn(t,e,n),ze=i):tn(t,e,n);break;default:tn(t,e,n)}}function fh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Nv),e.forEach(function(i){var r=Jv.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function xt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Oe=a.stateNode,bt=!1;break e;case 3:Oe=a.stateNode.containerInfo,bt=!0;break e;case 4:Oe=a.stateNode.containerInfo,bt=!0;break e}a=a.return}if(Oe===null)throw Error(E(160));om(s,o,r),Oe=null,bt=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){fe(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)am(e,t),e=e.sibling}function am(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xt(e,t),Ot(t),i&4){try{Fr(3,t,t.return),ka(3,t)}catch(y){fe(t,t.return,y)}try{Fr(5,t,t.return)}catch(y){fe(t,t.return,y)}}break;case 1:xt(e,t),Ot(t),i&512&&n!==null&&Mi(n,n.return);break;case 5:if(xt(e,t),Ot(t),i&512&&n!==null&&Mi(n,n.return),t.flags&32){var r=t.stateNode;try{Jr(r,"")}catch(y){fe(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Op(r,s),Ql(a,o);var c=Ql(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Lp(r,d):u==="dangerouslySetInnerHTML"?Mp(r,d):u==="children"?Jr(r,d):tu(r,u,d,c)}switch(a){case"input":Kl(r,s);break;case"textarea":Ap(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?zi(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?zi(r,!!s.multiple,s.defaultValue,!0):zi(r,!!s.multiple,s.multiple?[]:"",!1))}r[ss]=s}catch(y){fe(t,t.return,y)}}break;case 6:if(xt(e,t),Ot(t),i&4){if(t.stateNode===null)throw Error(E(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){fe(t,t.return,y)}}break;case 3:if(xt(e,t),Ot(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{es(e.containerInfo)}catch(y){fe(t,t.return,y)}break;case 4:xt(e,t),Ot(t);break;case 13:xt(e,t),Ot(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Lu=ge())),i&4&&fh(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ze=(c=ze)||u,xt(e,t),ze=c):xt(e,t),Ot(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&(t.mode&1)!==0)for(L=t,u=t.child;u!==null;){for(d=L=u;L!==null;){switch(h=L,f=h.child,h.tag){case 0:case 11:case 14:case 15:Fr(4,h,h.return);break;case 1:Mi(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){fe(i,n,y)}}break;case 5:Mi(h,h.return);break;case 22:if(h.memoizedState!==null){gh(d);continue}}f!==null?(f.return=h,L=f):gh(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ip("display",o))}catch(y){fe(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){fe(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xt(e,t),Ot(t),i&4&&fh(t);break;case 21:break;default:xt(e,t),Ot(t)}}function Ot(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sm(n)){var i=n;break e}n=n.return}throw Error(E(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Jr(r,""),i.flags&=-33);var s=hh(t);Ec(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=hh(t);Pc(t,a,o);break;default:throw Error(E(161))}}catch(l){fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bv(t,e,n){L=t,lm(t)}function lm(t,e,n){for(var i=(t.mode&1)!==0;L!==null;){var r=L,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Ys;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ze;a=Ys;var c=ze;if(Ys=o,(ze=l)&&!c)for(L=r;L!==null;)o=L,l=o.child,o.tag===22&&o.memoizedState!==null?mh(r):l!==null?(l.return=o,L=l):mh(r);for(;s!==null;)L=s,lm(s),s=s.sibling;L=r,Ys=a,ze=c}ph(t)}else(r.subtreeFlags&8772)!==0&&s!==null?(s.return=r,L=s):ph(t)}}function ph(t){for(;L!==null;){var e=L;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:ze||ka(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ze)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:_t(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zd(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zd(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&es(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}ze||e.flags&512&&Cc(e)}catch(h){fe(e,e.return,h)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function gh(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function mh(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ka(4,e)}catch(l){fe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){fe(e,r,l)}}var s=e.return;try{Cc(e)}catch(l){fe(e,s,l)}break;case 5:var o=e.return;try{Cc(e)}catch(l){fe(e,o,l)}}}catch(l){fe(e,e.return,l)}if(e===t){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var Wv=Math.ceil,Qo=en.ReactCurrentDispatcher,Mu=en.ReactCurrentOwner,mt=en.ReactCurrentBatchConfig,K=0,Ce=null,me=null,Ae=0,it=0,Ii=Ln(0),we=0,ds=null,ii=0,Sa=0,Iu=0,Nr=null,Ke=null,Lu=0,Zi=1/0,Wt=null,Zo=!1,Tc=null,kn=null,qs=!1,hn=null,Xo=0,Ur=0,Oc=null,Co=-1,Po=0;function Ue(){return(K&6)!==0?ge():Co!==-1?Co:Co=ge()}function Sn(t){return(t.mode&1)===0?1:(K&2)!==0&&Ae!==0?Ae&-Ae:Pv.transition!==null?(Po===0&&(Po=Kp()),Po):(t=Q,t!==0||(t=window.event,t=t===void 0?16:Xp(t.type)),t)}function Et(t,e,n,i){if(50<Ur)throw Ur=0,Oc=null,Error(E(185));bs(t,n,i),((K&2)===0||t!==Ce)&&(t===Ce&&((K&2)===0&&(Sa|=n),we===4&&cn(t,Ae)),Xe(t,i),n===1&&K===0&&(e.mode&1)===0&&(Zi=ge()+500,xa&&Rn()))}function Xe(t,e){var n=t.callbackNode;Py(t,e);var i=zo(t,t===Ce?Ae:0);if(i===0)n!==null&&Cd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Cd(n),e===1)t.tag===0?Cv(yh.bind(null,t)):vg(yh.bind(null,t)),_v(function(){(K&6)===0&&Rn()}),n=null;else{switch(Yp(i)){case 1:n=ou;break;case 4:n=Hp;break;case 16:n=Ro;break;case 536870912:n=Vp;break;default:n=Ro}n=mm(n,cm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cm(t,e){if(Co=-1,Po=0,(K&6)!==0)throw Error(E(327));var n=t.callbackNode;if(Ui()&&t.callbackNode!==n)return null;var i=zo(t,t===Ce?Ae:0);if(i===0)return null;if((i&30)!==0||(i&t.expiredLanes)!==0||e)e=ea(t,i);else{e=i;var r=K;K|=2;var s=dm();(Ce!==t||Ae!==e)&&(Wt=null,Zi=ge()+500,Jn(t,e));do try{Kv();break}catch(a){um(t,a)}while(1);wu(),Qo.current=s,K=r,me!==null?e=0:(Ce=null,Ae=0,e=we)}if(e!==0){if(e===2&&(r=nc(t),r!==0&&(i=r,e=Ac(t,r))),e===1)throw n=ds,Jn(t,0),cn(t,i),Xe(t,ge()),n;if(e===6)cn(t,i);else{if(r=t.current.alternate,(i&30)===0&&!Hv(r)&&(e=ea(t,i),e===2&&(s=nc(t),s!==0&&(i=s,e=Ac(t,s))),e===1))throw n=ds,Jn(t,0),cn(t,i),Xe(t,ge()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(E(345));case 2:Wn(t,Ke,Wt);break;case 3:if(cn(t,i),(i&130023424)===i&&(e=Lu+500-ge(),10<e)){if(zo(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ue(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=uc(Wn.bind(null,t,Ke,Wt),e);break}Wn(t,Ke,Wt);break;case 4:if(cn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Pt(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ge()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Wv(i/1960))-i,10<i){t.timeoutHandle=uc(Wn.bind(null,t,Ke,Wt),i);break}Wn(t,Ke,Wt);break;case 5:Wn(t,Ke,Wt);break;default:throw Error(E(329))}}}return Xe(t,ge()),t.callbackNode===n?cm.bind(null,t):null}function Ac(t,e){var n=Nr;return t.current.memoizedState.isDehydrated&&(Jn(t,e).flags|=256),t=ea(t,e),t!==2&&(e=Ke,Ke=n,e!==null&&Dc(e)),t}function Dc(t){Ke===null?Ke=t:Ke.push.apply(Ke,t)}function Hv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Tt(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cn(t,e){for(e&=~Iu,e&=~Sa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pt(e),i=1<<n;t[n]=-1,e&=~i}}function yh(t){if((K&6)!==0)throw Error(E(327));Ui();var e=zo(t,0);if((e&1)===0)return Xe(t,ge()),null;var n=ea(t,e);if(t.tag!==0&&n===2){var i=nc(t);i!==0&&(e=i,n=Ac(t,i))}if(n===1)throw n=ds,Jn(t,0),cn(t,e),Xe(t,ge()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wn(t,Ke,Wt),Xe(t,ge()),null}function Ru(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(Zi=ge()+500,xa&&Rn())}}function ri(t){hn!==null&&hn.tag===0&&(K&6)===0&&Ui();var e=K;K|=1;var n=mt.transition,i=Q;try{if(mt.transition=null,Q=1,t)return t()}finally{Q=i,mt.transition=n,K=e,(K&6)===0&&Rn()}}function zu(){it=Ii.current,oe(Ii)}function Jn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xv(n)),me!==null)for(n=me.return;n!==null;){var i=n;switch(mu(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Uo();break;case 3:Ji(),oe(Qe),oe(je),Cu();break;case 5:Su(i);break;case 4:Ji();break;case 13:oe(ue);break;case 19:oe(ue);break;case 10:xu(i.type._context);break;case 22:case 23:zu()}n=n.return}if(Ce=t,me=t=Cn(t.current,null),Ae=it=e,we=0,ds=null,Iu=Sa=ii=0,Ke=Nr=null,qn!==null){for(e=0;e<qn.length;e++)if(n=qn[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}qn=null}return t}function um(t,e){do{var n=me;try{if(wu(),bo.current=Jo,Go){for(var i=de.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Go=!1}if(ni=0,ke=ve=de=null,$r=!1,ls=0,Mu.current=null,n===null||n.return===null){we=1,ds=e,me=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ae,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if((u.mode&1)===0&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=rh(o);if(f!==null){f.flags&=-257,sh(f,o,a,s,e),f.mode&1&&ih(s,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if((e&1)===0){ih(s,c,e),ju();break e}l=Error(E(426))}}else if(le&&a.mode&1){var w=rh(o);if(w!==null){(w.flags&65536)===0&&(w.flags|=256),sh(w,o,a,s,e),yu(Qi(l,a));break e}}s=l=Qi(l,a),we!==4&&(we=2),Nr===null?Nr=[s]:Nr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Yg(s,l,e);Qd(s,p);break e;case 1:a=l;var g=s.type,v=s.stateNode;if((s.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(kn===null||!kn.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=qg(s,a,e);Qd(s,x);break e}}s=s.return}while(s!==null)}fm(n)}catch(b){e=b,me===n&&n!==null&&(me=n=n.return);continue}break}while(1)}function dm(){var t=Qo.current;return Qo.current=Jo,t===null?Jo:t}function ju(){(we===0||we===3||we===2)&&(we=4),Ce===null||(ii&268435455)===0&&(Sa&268435455)===0||cn(Ce,Ae)}function ea(t,e){var n=K;K|=2;var i=dm();(Ce!==t||Ae!==e)&&(Wt=null,Jn(t,e));do try{Vv();break}catch(r){um(t,r)}while(1);if(wu(),K=n,Qo.current=i,me!==null)throw Error(E(261));return Ce=null,Ae=0,we}function Vv(){for(;me!==null;)hm(me)}function Kv(){for(;me!==null&&!yy();)hm(me)}function hm(t){var e=gm(t.alternate,t,it);t.memoizedProps=t.pendingProps,e===null?fm(t):me=e,Mu.current=null}function fm(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=$v(n,e,it),n!==null){me=n;return}}else{if(n=Fv(n,e),n!==null){n.flags&=32767,me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{we=6,me=null;return}}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);we===0&&(we=5)}function Wn(t,e,n){var i=Q,r=mt.transition;try{mt.transition=null,Q=1,Yv(t,e,n,i)}finally{mt.transition=r,Q=i}return null}function Yv(t,e,n,i){do Ui();while(hn!==null);if((K&6)!==0)throw Error(E(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ey(t,s),t===Ce&&(me=Ce=null,Ae=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||qs||(qs=!0,mm(Ro,function(){return Ui(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=mt.transition,mt.transition=null;var o=Q;Q=1;var a=K;K|=4,Mu.current=null,Uv(t,n),am(n,t),fv(lc),jo=!!ac,lc=ac=null,t.current=n,Bv(n),vy(),K=a,Q=o,mt.transition=s}else t.current=n;if(qs&&(qs=!1,hn=t,Xo=r),s=t.pendingLanes,s===0&&(kn=null),_y(n.stateNode),Xe(t,ge()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Zo)throw Zo=!1,t=Tc,Tc=null,t;return(Xo&1)!==0&&t.tag!==0&&Ui(),s=t.pendingLanes,(s&1)!==0?t===Oc?Ur++:(Ur=0,Oc=t):Ur=0,Rn(),null}function Ui(){if(hn!==null){var t=Yp(Xo),e=mt.transition,n=Q;try{if(mt.transition=null,Q=16>t?16:t,hn===null)var i=!1;else{if(t=hn,hn=null,Xo=0,(K&6)!==0)throw Error(E(331));var r=K;for(K|=4,L=t.current;L!==null;){var s=L,o=s.child;if((L.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(L=c;L!==null;){var u=L;switch(u.tag){case 0:case 11:case 15:Fr(8,u,s)}var d=u.child;if(d!==null)d.return=u,L=d;else for(;L!==null;){u=L;var h=u.sibling,f=u.return;if(rm(u),u===c){L=null;break}if(h!==null){h.return=f,L=h;break}L=f}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}L=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,L=o;else e:for(;L!==null;){if(s=L,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Fr(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,L=p;break e}L=s.return}}var g=t.current;for(L=g;L!==null;){o=L;var v=o.child;if((o.subtreeFlags&2064)!==0&&v!==null)v.return=o,L=v;else e:for(o=g;L!==null;){if(a=L,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:ka(9,a)}}catch(b){fe(a,a.return,b)}if(a===o){L=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,L=x;break e}L=a.return}}if(K=r,Rn(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(ga,t)}catch{}i=!0}return i}finally{Q=n,mt.transition=e}}return!1}function vh(t,e,n){e=Qi(n,e),e=Yg(t,e,1),t=bn(t,e,1),e=Ue(),t!==null&&(bs(t,1,e),Xe(t,e))}function fe(t,e,n){if(t.tag===3)vh(t,t,n);else for(;e!==null;){if(e.tag===3){vh(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(kn===null||!kn.has(i))){t=Qi(n,t),t=qg(e,t,1),e=bn(e,t,1),t=Ue(),e!==null&&(bs(e,1,t),Xe(e,t));break}}e=e.return}}function qv(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ue(),t.pingedLanes|=t.suspendedLanes&n,Ce===t&&(Ae&n)===n&&(we===4||we===3&&(Ae&130023424)===Ae&&500>ge()-Lu?Jn(t,0):Iu|=n),Xe(t,e)}function pm(t,e){e===0&&((t.mode&1)===0?e=1:(e=$s,$s<<=1,($s&130023424)===0&&($s=4194304)));var n=Ue();t=Zt(t,e),t!==null&&(bs(t,e,n),Xe(t,n))}function Gv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pm(t,n)}function Jv(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(E(314))}i!==null&&i.delete(e),pm(t,n)}var gm;gm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qe.current)Je=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Je=!1,jv(t,e,n);Je=(t.flags&131072)!==0}else Je=!1,le&&(e.flags&1048576)!==0&&wg(e,Ho,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;So(t,e),t=e.pendingProps;var r=Yi(e,je.current);Ni(e,n),r=Eu(null,e,i,t,r,n);var s=Tu();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ze(i)?(s=!0,Bo(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,bu(e),r.updater=ba,e.stateNode=r,r._reactInternals=e,yc(e,i,t,n),e=xc(null,e,i,!0,s,n)):(e.tag=0,le&&s&&gu(e),Ne(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(So(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Zv(i),t=_t(i,t),r){case 0:e=wc(null,e,i,t,n);break e;case 1:e=lh(null,e,i,t,n);break e;case 11:e=oh(null,e,i,t,n);break e;case 14:e=ah(null,e,i,_t(i.type,t),n);break e}throw Error(E(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_t(i,r),wc(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_t(i,r),lh(t,e,i,r,n);case 3:e:{if(Zg(e),t===null)throw Error(E(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Cg(t,e),Yo(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Qi(Error(E(423)),e),e=ch(t,e,i,n,r);break e}else if(i!==r){r=Qi(Error(E(424)),e),e=ch(t,e,i,n,r);break e}else for(rt=_n(e.stateNode.containerInfo.firstChild),ot=e,le=!0,St=null,n=kg(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qi(),i===r){e=Xt(t,e,n);break e}Ne(t,e,i,n)}e=e.child}return e;case 5:return Pg(e),t===null&&pc(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,cc(i,r)?o=null:s!==null&&cc(i,s)&&(e.flags|=32),Qg(t,e),Ne(t,e,o,n),e.child;case 6:return t===null&&pc(e),null;case 13:return Xg(t,e,n);case 4:return ku(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Gi(e,null,i,n):Ne(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_t(i,r),oh(t,e,i,r,n);case 7:return Ne(t,e,e.pendingProps,n),e.child;case 8:return Ne(t,e,e.pendingProps.children,n),e.child;case 12:return Ne(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,re(Vo,i._currentValue),i._currentValue=o,s!==null)if(Tt(s.value,o)){if(s.children===r.children&&!Qe.current){e=Xt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Gt(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gc(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gc(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ne(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ni(e,n),r=vt(r),i=i(r),e.flags|=1,Ne(t,e,i,n),e.child;case 14:return i=e.type,r=_t(i,e.pendingProps),r=_t(i.type,r),ah(t,e,i,r,n);case 15:return Gg(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_t(i,r),So(t,e),e.tag=1,Ze(i)?(t=!0,Bo(e)):t=!1,Ni(e,n),Kg(e,i,r),yc(e,i,r,n),xc(null,e,i,!0,t,n);case 19:return em(t,e,n);case 22:return Jg(t,e,n)}throw Error(E(156,e.tag))};function mm(t,e){return Wp(t,e)}function Qv(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(t,e,n,i){return new Qv(t,e,n,i)}function $u(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zv(t){if(typeof t=="function")return $u(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iu)return 11;if(t===ru)return 14}return 2}function Cn(t,e){var n=t.alternate;return n===null?(n=pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Eo(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")$u(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ki:return Qn(n.children,r,s,e);case nu:o=8,r|=8;break;case Ul:return t=pt(12,n,e,r|2),t.elementType=Ul,t.lanes=s,t;case Bl:return t=pt(13,n,e,r),t.elementType=Bl,t.lanes=s,t;case Wl:return t=pt(19,n,e,r),t.elementType=Wl,t.lanes=s,t;case Pp:return Ca(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sp:o=10;break e;case Cp:o=9;break e;case iu:o=11;break e;case ru:o=14;break e;case sn:o=16,i=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=pt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Qn(t,e,n,i){return t=pt(7,t,i,e),t.lanes=n,t}function Ca(t,e,n,i){return t=pt(22,t,i,e),t.elementType=Pp,t.lanes=n,t.stateNode={isHidden:!1},t}function pl(t,e,n){return t=pt(6,t,null,e),t.lanes=n,t}function gl(t,e,n){return e=pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xv(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ga(0),this.expirationTimes=Ga(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ga(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fu(t,e,n,i,r,s,o,a,l){return t=new Xv(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bu(s),t}function e1(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bi,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ym(t){if(!t)return An;t=t._reactInternals;e:{if(di(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ze(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Ze(n))return yg(t,n,e)}return e}function vm(t,e,n,i,r,s,o,a,l){return t=Fu(n,i,!0,t,r,s,o,a,l),t.context=ym(null),n=t.current,i=Ue(),r=Sn(n),s=Gt(i,r),s.callback=e!=null?e:null,bn(n,s,r),t.current.lanes=r,bs(t,r,i),Xe(t,i),t}function Pa(t,e,n,i){var r=e.current,s=Ue(),o=Sn(r);return n=ym(n),e.context===null?e.context=n:e.pendingContext=n,e=Gt(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=bn(r,e,o),t!==null&&(Et(t,r,o,s),_o(t,r,o)),o}function ta(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nu(t,e){wh(t,e),(t=t.alternate)&&wh(t,e)}function t1(){return null}var wm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uu(t){this._internalRoot=t}Ea.prototype.render=Uu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Pa(t,e,null,null)};Ea.prototype.unmount=Uu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ri(function(){Pa(null,t,null,null)}),e[Qt]=null}};function Ea(t){this._internalRoot=t}Ea.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ln.length&&e!==0&&e<ln[n].priority;n++);ln.splice(n,0,t),n===0&&Zp(t)}};function Bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ta(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xh(){}function n1(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=ta(o);s.call(c)}}var o=vm(e,i,t,0,null,!1,!1,"",xh);return t._reactRootContainer=o,t[Qt]=o.current,is(t.nodeType===8?t.parentNode:t),ri(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=ta(l);a.call(c)}}var l=Fu(t,0,!1,null,null,!1,!1,"",xh);return t._reactRootContainer=l,t[Qt]=l.current,is(t.nodeType===8?t.parentNode:t),ri(function(){Pa(e,l,n,i)}),l}function Oa(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=ta(o);a.call(l)}}Pa(e,o,t,r)}else o=n1(n,e,t,r,i);return ta(o)}qp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Er(e.pendingLanes);n!==0&&(au(e,n|1),Xe(e,ge()),(K&6)===0&&(Zi=ge()+500,Rn()))}break;case 13:ri(function(){var i=Zt(t,1);if(i!==null){var r=Ue();Et(i,t,1,r)}}),Nu(t,1)}};lu=function(t){if(t.tag===13){var e=Zt(t,134217728);if(e!==null){var n=Ue();Et(e,t,134217728,n)}Nu(t,134217728)}};Gp=function(t){if(t.tag===13){var e=Sn(t),n=Zt(t,e);if(n!==null){var i=Ue();Et(n,t,e,i)}Nu(t,e)}};Jp=function(){return Q};Qp=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};Xl=function(t,e,n){switch(e){case"input":if(Kl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wa(i);if(!r)throw Error(E(90));Tp(i),Kl(i,r)}}}break;case"textarea":Ap(t,n);break;case"select":e=n.value,e!=null&&zi(t,!!n.multiple,e,!1)}};jp=Ru;$p=ri;var i1={usingClientEntryPoint:!1,Events:[Ss,Ei,wa,Rp,zp,Ru]},yr={findFiberByHostInstance:Yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r1={bundleType:yr.bundleType,version:yr.version,rendererPackageName:yr.rendererPackageName,rendererConfig:yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:en.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Up(t),t===null?null:t.stateNode},findFiberByHostInstance:yr.findFiberByHostInstance||t1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Gs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gs.isDisabled&&Gs.supportsFiber)try{ga=Gs.inject(r1),jt=Gs}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i1;lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(e))throw Error(E(200));return e1(t,e,null,n)};lt.createRoot=function(t,e){if(!Bu(t))throw Error(E(299));var n=!1,i="",r=wm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Fu(t,1,!1,null,null,n,!1,i,r),t[Qt]=e.current,is(t.nodeType===8?t.parentNode:t),new Uu(e)};lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Up(e),t=t===null?null:t.stateNode,t};lt.flushSync=function(t){return ri(t)};lt.hydrate=function(t,e,n){if(!Ta(e))throw Error(E(200));return Oa(null,t,e,!0,n)};lt.hydrateRoot=function(t,e,n){if(!Bu(t))throw Error(E(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=wm;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=vm(e,null,t,1,n!=null?n:null,r,!1,s,o),t[Qt]=e.current,is(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ea(e)};lt.render=function(t,e,n){if(!Ta(e))throw Error(E(200));return Oa(null,t,e,!1,n)};lt.unmountComponentAtNode=function(t){if(!Ta(t))throw Error(E(40));return t._reactRootContainer?(ri(function(){Oa(null,null,t,!1,function(){t._reactRootContainer=null,t[Qt]=null})}),!0):!1};lt.unstable_batchedUpdates=Ru;lt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ta(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Oa(t,e,n,!1,i)};lt.version="18.3.1-next-f1338f8080-20240426";function xm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xm)}catch(t){console.error(t)}}xm(),xp.exports=lt;var _h=xp.exports;Fl.createRoot=_h.createRoot,Fl.hydrateRoot=_h.hydrateRoot;const s1="f71910da-e7e2-4deb-b99f-cc00eeddb1d0",o1=chrome.identity.getRedirectURL();async function a1(){try{const{currentOrgId:t,organizationId:e}=await chrome.storage.local.get(["currentOrgId","organizationId"]),n=t||e;if(!n)throw new Error("Please navigate to your Dynamics CRM environment first.");const i=l1(n);return new Promise((r,s)=>{chrome.identity.launchWebAuthFlow({url:i,interactive:!0},async o=>{var a;try{if(chrome.runtime.lastError||!o){s({success:!1,error:((a=chrome.runtime.lastError)==null?void 0:a.message)||"Authentication failed"});return}const l=new URL(o).hash.substring(1),c=new URLSearchParams(l),u=c.get("access_token"),d=c.get("expires_in");if(!u){s({success:!1,error:"No access token received"});return}const h=Date.now()+parseInt(d)*1e3,f=u.startsWith("Bearer ")?u:`Bearer ${u}`;r({success:!0,token:f,expirationTime:h,error:null})}catch(l){s({success:!1,error:l})}})})}catch(t){return console.error("Dynamics authentication error:",t),{success:!1,error:t}}}function l1(t){const e=`https://${t}.crm.dynamics.com/.default`;return`https://login.microsoftonline.com/common/oauth2/v2.0/authorize?${new URLSearchParams({client_id:s1,response_type:"token",response_mode:"fragment",redirect_uri:o1,scope:e,prompt:"consent",state:Date.now().toString(),nonce:Math.random().toString(36).substring(2)}).toString()}`}async function c1(t){try{const{currentOrgId:e,organizationId:n}=await chrome.storage.local.get(["currentOrgId","organizationId"]),i=e||n;if(!i)throw new Error("Organization ID not found");const r=`https://${i}.crm.dynamics.com/api/data/v9.2/WhoAmI`,s=await fetch(r,{headers:{Authorization:t,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(!s.ok)throw new Error(`Failed to fetch user info: ${s.status}`);const o=await s.json(),a=`https://${i}.crm.dynamics.com/api/data/v9.2/systemusers(${o.UserId})`,l=await fetch(a,{headers:{Authorization:t,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(!l.ok)return{id:o.UserId,email:"unknown@example.com",name:"Unknown User",organizationId:i};const c=await l.json();return{id:o.UserId,email:c.internalemailaddress||c.domainname||"unknown@example.com",name:`${c.firstname||""} ${c.lastname||""}`.trim()||"Unknown User",organizationId:i}}catch(e){console.error("Error fetching user info:",e);const n=await chrome.storage.local.get(["currentOrgId","organizationId"]).then(i=>i.currentOrgId||i.organizationId||"unknown");return{id:"unknown",email:"unknown@example.com",name:"Unknown User",organizationId:n}}}const Mc={loginWithDynamicsCrm:a1,fetchUserInfo:c1},u1="modulepreload",bh={},d1="/",Xi=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${d1}${i}`,i in bh)return;bh[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":u1,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},h1=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...n)=>Xi(()=>Promise.resolve().then(function(){return ar}),void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class Wu extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class f1 extends Wu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class p1 extends Wu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class g1 extends Wu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ic;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ic||(Ic={}));var m1=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class y1{constructor(e,{headers:n={},customFetch:i,region:r=Ic.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=h1(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return m1(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob!="undefined"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData!="undefined"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:c}).catch(m=>{throw new f1(m)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new p1(u);if(!u.ok)throw new g1(u);let h=((i=u.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(r){return{data:null,error:r}}})}}var Ye={},Hu={},Aa={},Ps={},Da={},Ma={},v1=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")},er=v1();const w1=er.fetch;var _m=er.fetch.bind(er);const bm=er.Headers,x1=er.Request,_1=er.Response;var ar=Object.freeze(Object.defineProperty({__proto__:null,fetch:w1,default:_m,Headers:bm,Request:x1,Response:_1},Symbol.toStringTag,{value:"Module"})),b1=N0(ar),Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});class k1 extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}Ia.default=k1;var km=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ma,"__esModule",{value:!0});const S1=km(b1),C1=km(Ia);class P1{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch=="undefined"?this.fetch=S1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,d=null,h=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const p=await s.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await s.text();try{c=JSON.parse(y),Array.isArray(c)&&s.status===404&&(u=[],c=null,h=200,f="OK")}catch{s.status===404&&y===""?(h=204,f="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&((l=c==null?void 0:c.details)===null||l===void 0?void 0:l.includes("0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw new C1.default(c)}return{error:c,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(r=r.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,n)}returns(){return this}overrideTypes(){return this}}Ma.default=P1;var E1=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Da,"__esModule",{value:!0});const T1=E1(Ma);class O1 extends T1.default{select(e){let n=!1;const i=(e!=null?e:"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:i,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i=="undefined"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,n,{foreignTable:i,referencedTable:r=i}={}){const s=typeof r=="undefined"?"offset":`${r}.offset`,o=typeof r=="undefined"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:i=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,i?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}Da.default=O1;var A1=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ps,"__esModule",{value:!0});const D1=A1(Da);class M1 extends D1.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const i=Array.from(new Set(n)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:i,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(e,n,i){return this.url.searchParams.append(e,`not.${n}.${i}`),this}or(e,{foreignTable:n,referencedTable:i=n}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,n,i){return this.url.searchParams.append(e,`${n}.${i}`),this}}Ps.default=M1;var I1=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Aa,"__esModule",{value:!0});const vr=I1(Ps);class L1{constructor(e,{headers:n={},schema:i,fetch:r}){this.url=e,this.headers=n,this.schema=i,this.fetch=r}select(e,{head:n=!1,count:i}={}){const r=n?"HEAD":"GET";let s=!1;const o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new vr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:i=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new vr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:i=!1,count:r,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new vr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new vr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new vr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}Aa.default=L1;var La={},Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.version=void 0;Ra.version="0.0.0-automated";Object.defineProperty(La,"__esModule",{value:!0});La.DEFAULT_HEADERS=void 0;const R1=Ra;La.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${R1.version}`};var Sm=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hu,"__esModule",{value:!0});const z1=Sm(Aa),j1=Sm(Ps),$1=La;class Vu{constructor(e,{headers:n={},schema:i,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},$1.DEFAULT_HEADERS),n),this.schemaName=i,this.fetch=r}from(e){const n=new URL(`${this.url}/${e}`);return new z1.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Vu(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:r=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;i||r?(o=i?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new j1.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}Hu.default=Vu;var lr=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.PostgrestError=Ye.PostgrestBuilder=Ye.PostgrestTransformBuilder=Ye.PostgrestFilterBuilder=Ye.PostgrestQueryBuilder=Ye.PostgrestClient=void 0;const Cm=lr(Hu);Ye.PostgrestClient=Cm.default;const Pm=lr(Aa);Ye.PostgrestQueryBuilder=Pm.default;const Em=lr(Ps);Ye.PostgrestFilterBuilder=Em.default;const Tm=lr(Da);Ye.PostgrestTransformBuilder=Tm.default;const Om=lr(Ma);Ye.PostgrestBuilder=Om.default;const Am=lr(Ia);Ye.PostgrestError=Am.default;var F1=Ye.default={PostgrestClient:Cm.default,PostgrestQueryBuilder:Pm.default,PostgrestFilterBuilder:Em.default,PostgrestTransformBuilder:Tm.default,PostgrestBuilder:Om.default,PostgrestError:Am.default};const{PostgrestClient:N1,PostgrestQueryBuilder:Y2,PostgrestFilterBuilder:q2,PostgrestTransformBuilder:G2,PostgrestBuilder:J2,PostgrestError:Q2}=F1,U1="2.11.2",B1={"X-Client-Info":`realtime-js/${U1}`},W1="1.0.0",Dm=1e4,H1=1e3;var Bi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Bi||(Bi={}));var tt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(tt||(tt={}));var kt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(kt||(kt={}));var Lc;(function(t){t.websocket="websocket"})(Lc||(Lc={}));var Kn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Kn||(Kn={}));class V1{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const r=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=i.decode(e.slice(o,o+r));o=o+r;const l=i.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(i.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Mm{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ne||(ne={}));const kh=(t,e,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((s,o)=>(s[o]=K1(o,t,e,r),s),{})},K1=(t,e,n,i)=>{const r=e.find(a=>a.name===t),s=r==null?void 0:r.type,o=n[t];return s&&!i.includes(s)?Im(s,o):Rc(o)},Im=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return J1(e,n)}switch(t){case ne.bool:return Y1(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return q1(e);case ne.json:case ne.jsonb:return G1(e);case ne.timestamp:return Q1(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return Rc(e);default:return Rc(e)}},Rc=t=>t,Y1=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},q1=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},G1=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},J1=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Im(e,a))}return t},Q1=t=>typeof t=="string"?t.replace(" ","T"):t,Lm=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ml{constructor(e,n,i={},r=Dm){this.channel=e,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Sh||(Sh={}));class Br{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Br.syncState(this.state,r,s,o),this.pendingDiffs.forEach(l=>{this.state=Br.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Br.syncDiff(this.state,r,s,o),a())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,r){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const h=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),m=u.filter(w=>f.indexOf(w.presence_ref)<0),y=d.filter(w=>h.indexOf(w.presence_ref)<0);m.length>0&&(a[c]=m),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},i,r)}static syncDiff(e,n,i,r){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}i(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const r=e[i];return"metas"in r?n[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[i]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ch;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ch||(Ch={}));var Ph;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ph||(Ph={}));var Ht;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ht||(Ht={}));class Ku{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ml(this,kt.join,this.params,this.timeout),this.rejoinTimer=new Mm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kt.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new Br(this),this.broadcastEndpointURL=Lm(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Ht.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ht.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(u=>u.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Ht.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,m=[];for(let y=0;y<f;y++){const w=h[y],{filter:{event:p,schema:g,table:v,filter:x}}=w,b=u&&u[y];if(b&&b.event===p&&b.schema===g&&b.table===v&&b.filter===x)m.push(Object.assign(Object.assign({},w),{id:b.id}));else{this.unsubscribe(),e==null||e(Ht.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(Ht.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Ht.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ht.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this._on(e,n,i)}async send(e,n={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=tt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const r=new ml(this,kt.leave,{},e);r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,n,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(s),o}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ml(this,e,n,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var r,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=kt;if(i&&[a,l,c,u].indexOf(o)>=0&&i!==this._joinRef())return;let h=this._onMessage(o,n,i);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var m,y,w;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((w=(y=f.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(h,i)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var m,y,w,p,g,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,b=(m=f.filter)===null||m===void 0?void 0:m.event;return x&&((y=n.ids)===null||y===void 0?void 0:y.includes(x))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const x=(g=(p=f==null?void 0:f.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return x==="*"||x===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:y,table:w,commit_timestamp:p,type:g,errors:v}=m;h=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:p,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(m))}f.callback(h,i)})}_isClosed(){return this.state===tt.closed}_isJoined(){return this.state===tt.joined}_isJoining(){return this.state===tt.joining}_isLeaving(){return this.state===tt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const r=e.toLocaleLowerCase(),s={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&Ku.isEqual(r.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(kt.close,{},e)}_onError(e){this._on(kt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=kh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=kh(e.columns,e.old_record)),n}}const Z1=()=>{},X1=typeof WebSocket!="undefined",ew=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tw{constructor(e,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=B1,this.params={},this.timeout=Dm,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Z1,this.conn=null,this.sendBuffer=[],this.serializer=new V1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch=="undefined"?o=(...a)=>Xi(()=>Promise.resolve().then(function(){return ar}),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Lc.websocket}`,this.httpEndpoint=Lm(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(i=n==null?void 0:n.params)===null||i===void 0?void 0:i.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Mm(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(X1){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new nw(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Xi(()=>import("./browser.js").then(function(e){return e.b}),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:W1}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n!=null?n:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Bi.connecting:return Kn.Connecting;case Bi.open:return Kn.Open;case Bi.closing:return Kn.Closing;default:return Kn.Closed}}isConnected(){return this.connectionState()===Kn.Open}channel(e,n={config:{}}){const i=new Ku(`realtime:${e}`,n,this);return this.channels.push(i),i}push(e){const{topic:n,event:i,payload:r,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${i} (${s})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let i=null;try{i=JSON.parse(atob(n.split(".")[1]))}catch{}if(i&&i.exp&&!(Math.floor(Date.now()/1e3)-i.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`);this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n}),r.joinedOnce&&r._isJoined()&&r._push(kt.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(H1,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:i,event:r,payload:s,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${r} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(r,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(kt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${i}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([ew],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class nw{constructor(e,n,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Bi.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}}class Yu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function be(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class iw extends Yu{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class zc extends Yu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var rw=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const Rm=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...n)=>Xi(()=>Promise.resolve().then(function(){return ar}),void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},sw=()=>rw(void 0,void 0,void 0,function*(){return typeof Response=="undefined"?(yield Xi(()=>Promise.resolve().then(function(){return ar}),void 0)).Response:Response}),jc=t=>{if(Array.isArray(t))return t.map(n=>jc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=jc(i)}),e};var hi=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const yl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ow=(t,e,n)=>hi(void 0,void 0,void 0,function*(){const i=yield sw();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{e(new iw(yl(r),t.status||500))}).catch(r=>{e(new zc(yl(r),r))}):e(new zc(yl(t),t))}),aw=(t,e,n,i)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i&&(r.body=JSON.stringify(i)),Object.assign(Object.assign({},r),n))};function Es(t,e,n,i,r,s){return hi(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,aw(e,i,r,s)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ow(l,a,i))})})}function na(t,e,n,i){return hi(this,void 0,void 0,function*(){return Es(t,"GET",e,n,i)})}function an(t,e,n,i,r){return hi(this,void 0,void 0,function*(){return Es(t,"POST",e,i,r,n)})}function lw(t,e,n,i,r){return hi(this,void 0,void 0,function*(){return Es(t,"PUT",e,i,r,n)})}function cw(t,e,n,i){return hi(this,void 0,void 0,function*(){return Es(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function zm(t,e,n,i,r){return hi(this,void 0,void 0,function*(){return Es(t,"DELETE",e,i,r,n)})}var He=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const uw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Eh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dw{constructor(e,n={},i,r){this.url=e,this.headers=n,this.bucketId=i,this.fetch=Rm(r)}uploadOrUpdate(e,n,i,r){return He(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Eh),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob!="undefined"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",i)):typeof FormData!="undefined"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(be(s))return{data:null,error:s};throw s}})}upload(e,n,i){return He(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,r){return He(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Eh.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob!="undefined"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData!="undefined"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(be(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return He(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const s=yield an(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Yu("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}})}update(e,n,i){return He(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return He(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}copy(e,n,i){return He(this,void 0,void 0,function*(){try{return{data:{path:(yield an(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}createSignedUrl(e,n,i){return He(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield an(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,i){return He(this,void 0,void 0,function*(){try{const r=yield an(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}download(e,n){return He(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)!="undefined"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield na(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}info(e){return He(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield na(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:jc(i),error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}})}exists(e){return He(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield cw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(be(i)&&i instanceof zc){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),r=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&r.push(s);const a=typeof(n==null?void 0:n.transform)!="undefined"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${c}`)}}}remove(e){return He(this,void 0,void 0,function*(){try{return{data:yield zm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}list(e,n,i){return He(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},uw),n),{prefix:e||""});return{data:yield an(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer!="undefined"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const hw="2.7.1",fw={"X-Client-Info":`storage-js/${hw}`};var yi=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class pw{constructor(e,n={},i){this.url=e,this.headers=Object.assign(Object.assign({},fw),n),this.fetch=Rm(i)}listBuckets(){return yi(this,void 0,void 0,function*(){try{return{data:yield na(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(be(e))return{data:null,error:e};throw e}})}getBucket(e){return yi(this,void 0,void 0,function*(){try{return{data:yield na(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return yi(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return yi(this,void 0,void 0,function*(){try{return{data:yield lw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}})}emptyBucket(e){return yi(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}deleteBucket(e){return yi(this,void 0,void 0,function*(){try{return{data:yield zm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}}class gw extends pw{constructor(e,n={},i){super(e,n,i)}from(e){return new dw(this.url,this.headers,e,this.fetch)}}const mw="2.49.4";let Or="";typeof Deno!="undefined"?Or="deno":typeof document!="undefined"?Or="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?Or="react-native":Or="node";const yw={"X-Client-Info":`supabase-js-${Or}/${mw}`},vw={headers:yw},ww={schema:"public"},xw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_w={};var bw=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};const kw=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=_m:e=fetch,(...n)=>e(...n)},Sw=()=>typeof Headers=="undefined"?bm:Headers,Cw=(t,e,n)=>{const i=kw(n),r=Sw();return(s,o)=>bw(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,Object.assign(Object.assign({},o),{headers:c}))})};var Pw=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};function Ew(t){return t.replace(/\/$/,"")}function Tw(t,e){const{db:n,auth:i,realtime:r,global:s}=t,{db:o,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),i),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),s),accessToken:()=>Pw(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const jm="2.69.1",_i=30*1e3,$c=3,vl=$c*_i,Ow="http://localhost:9999",Aw="supabase.auth.token",Dw={"X-Client-Info":`gotrue-js/${jm}`},Fc="X-Supabase-Api-Version",$m={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Mw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Iw=6e5;class qu extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function U(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Lw extends qu{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function Rw(t){return U(t)&&t.name==="AuthApiError"}class Fm extends qu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class zn extends qu{constructor(e,n,i,r){super(e,i,r),this.name=n,this.status=i}}class nn extends zn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zw(t){return U(t)&&t.name==="AuthSessionMissingError"}class wl extends zn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Js extends zn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qs extends zn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jw(t){return U(t)&&t.name==="AuthImplicitGrantRedirectError"}class Th extends zn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nc extends zn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function xl(t){return U(t)&&t.name==="AuthRetryableFetchError"}class Oh extends zn{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Wr extends zn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ah="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Dh=` 	
\r=`.split(""),$w=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Dh.length;e+=1)t[Dh[e].charCodeAt(0)]=-2;for(let e=0;e<Ah.length;e+=1)t[Ah[e].charCodeAt(0)]=e;return t})();function Nm(t,e,n){const i=$w[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Mh(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=o=>{Uw(o,i,n)};for(let o=0;o<t.length;o+=1)Nm(t.charCodeAt(o),r,s);return e.join("")}function Fw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Nw(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}Fw(i,e)}}function Uw(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Bw(t){const e=[],n={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Nm(t.charCodeAt(r),n,i);return new Uint8Array(e)}function Ww(t){const e=[];return Nw(t,n=>e.push(n)),new Uint8Array(e)}function Hw(t){return Math.round(Date.now()/1e3)+t}function Vw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const At=()=>typeof window!="undefined"&&typeof document!="undefined",jn={tested:!1,writable:!1},Hr=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jn.tested)return jn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jn.tested=!0,jn.writable=!0}catch{jn.tested=!0,jn.writable=!1}return jn.writable};function Kw(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return n.searchParams.forEach((i,r)=>{e[r]=i}),e}const Um=t=>{let e;return t?e=t:typeof fetch=="undefined"?e=(...n)=>Xi(()=>Promise.resolve().then(function(){return ar}),void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},Yw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Bm=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Zs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Xs=async(t,e)=>{await t.removeItem(e)};class za{constructor(){this.promise=new za.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}za.promiseConstructor=Promise;function _l(t){const e=t.split(".");if(e.length!==3)throw new Wr("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Mw.test(e[i]))throw new Wr("JWT not in base64url format");return{header:JSON.parse(Mh(e[0])),payload:JSON.parse(Mh(e[1])),signature:Bw(e[2]),raw:{header:e[0],payload:e[1]}}}async function qw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Gw(t,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){r(o);return}}})()})}function Jw(t){return("0"+t.toString(16)).substr(-2)}function Qw(){const e=new Uint32Array(56);if(typeof crypto=="undefined"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let s=0;s<56;s++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,Jw).join("")}async function Zw(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function Xw(t){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Zw(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vi(t,e,n=!1){const i=Qw();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await Bm(t,`${e}-code-verifier`,r);const s=await Xw(i);return[s,i===s?"plain":"s256"]}const ex=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tx(t){const e=t.headers.get(Fc);if(!e||!e.match(ex))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nx(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ix(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var rx=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};const Hn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sx=[502,503,504];async function Ih(t){var e;if(!Yw(t))throw new Nc(Hn(t),0);if(sx.includes(t.status))throw new Nc(Hn(t),t.status);let n;try{n=await t.json()}catch(s){throw new Fm(Hn(s),s)}let i;const r=tx(t);if(r&&r.getTime()>=$m["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Oh(Hn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new nn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Oh(Hn(n),t.status,n.weak_password.reasons);throw new Lw(Hn(n),t.status||500,i)}const ox=(t,e,n,i)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function V(t,e,n,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[Fc]||(s[Fc]=$m["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const o=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ax(t,e,n+a,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function ax(t,e,n,i,r,s){const o=ox(e,i,r,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Nc(Hn(l),0)}if(a.ok||await Ih(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await Ih(l)}}function rn(t){var e;let n=null;dx(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Hw(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function Lh(t){const e=rn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function un(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function lx(t){return{data:t,error:null}}function cx(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s}=t,o=rx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ux(t){return t}function dx(t){return t.access_token&&t.refresh_token&&t.expires_in}var hx=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};class fx{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=Um(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await V(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(U(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await V(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:un})}catch(i){if(U(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=hx(e,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await V(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:cx,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(U(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await V(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:un})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,r,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await V(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:ux});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);c[`${w}Page`]=y}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(U(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await V(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:un})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await V(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:un})}catch(i){if(U(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){try{return await V(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:un})}catch(i){if(U(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){try{const{data:n,error:i}=await V(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await V(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}}const px={getItem:t=>Hr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{!Hr()||globalThis.localStorage.setItem(t,e)},removeItem:t=>{!Hr()||globalThis.localStorage.removeItem(t)}};function Rh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function gx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self!="undefined"&&(self.globalThis=self)}}const wi={debug:!!(globalThis&&Hr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mx extends Wm{}async function yx(t,e,n){wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),wi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new mx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wi.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}gx();const vx={url:Ow,storageKey:Aw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Dw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function zh(t,e,n){return await n()}class hs{constructor(e){var n,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=hs.nextInstanceID,hs.nextInstanceID+=1,this.instanceID>0&&At()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},vx),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new fx({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Um(r.fetch),this.lock=r.lock||zh,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:At()&&((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0?void 0:n.locks)?this.lock=yx:this.lock=zh,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Hr()?this.storage=px:(this.memoryStorage={},this.storage=Rh(this.memoryStorage)):(this.memoryStorage={},this.storage=Rh(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jm}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Kw(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),At()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(n,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),jw(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return U(n)?{error:n}:{error:new Fm("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,r;try{const s=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:rn}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,i,r;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await vi(this.storage,this.storageKey)),s=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},xform:rn})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},channel:(r=h==null?void 0:h.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:rn})}else throw new Js("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Lh})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Lh})}else throw new Js("You must provide either an email or phone number and a password");const{data:i,error:r}=n;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new wl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Zs(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n!=null?n:"").split("/");try{const{data:s,error:o}=await V(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:rn});if(await Xs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new wl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:r!=null?r:null}),error:o})}catch(s){if(U(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:i,token:r,access_token:s,nonce:o}=e,a=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:rn}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new wl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,r,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await vi(this.storage,this.storageKey));const{error:d}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Js("You must provide either an email or phone number.")}catch(a){if(U(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,i;try{let r,s;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:a}=await V(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:rn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(U(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var n,i,r;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await vi(this.storage,this.storageKey)),await V(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:lx})}catch(s){if(U(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new nn;const{error:r}=await V(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(U(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:s}=e,{error:o}=await V(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:o,error:a}=await V(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Js("You must provide either an email or phone number and a type")}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<vl:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:un}):await this._useSession(async n=>{var i,r,s;const{data:o,error:a}=n;if(a)throw a;return!(!((i=o.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nn}:await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:un})})}catch(n){if(U(n))return zw(n)&&(await this._removeSession(),await Xs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new nn;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await vi(this.storage,this.storageKey));const{data:c,error:u}=await V(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:un});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(i){if(U(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nn;const n=Date.now()/1e3;let i=n,r=!0,s=null;const{payload:o}=_l(e.access_token);if(o.exp&&(i=o.exp,r=i<=n),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(U(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(i=o.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new nn;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!At())throw new Qs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Th("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qs("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Th("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Qs("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=_i&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:y,error:w}=await this._getUser(s);if(w)throw w;const p={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(i){if(U(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Zs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return{error:s};const o=(i=r.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Rw(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Xs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Vw(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,r;try{const{data:{session:s},error:o}=n;if(o)throw o;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await vi(this.storage,this.storageKey,!0));try{return await V(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(U(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:r}=await this._useSession(async s=>{var o,a,l,c,u;const{data:d,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await V(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return At()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(U(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,r;const{data:s,error:o}=n;if(o)throw o;return await V(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await Gw(async r=>(r>0&&await qw(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await V(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rn})),(r,s)=>{const o=200*Math.pow(2,r);return s&&xl(s)&&Date.now()+o-i<_i})}catch(i){if(this._debug(n,"error",i),U(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),At()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Zs(this.storage,this.storageKey);if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<vl;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${vl}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),xl(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new za;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new nn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(r,"error",s),U(s)){const o={session:null,error:s};return xl(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Bm(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Xs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&At()&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_i);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/_i);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${_i}ms, refresh threshold is ${$c} ticks`),r<=$c&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Wm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,o]=await vi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?{data:null,error:s}:await V(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await V(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&((r=l==null?void 0:l.totp)===null||r===void 0?void 0:r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await V(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?{data:null,error:s}:await V(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(e==null?void 0:e.factors)||[],r=i.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=i.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:i,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=_l(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((i=(n=r.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(o=>o.kid===e);if(i||(i=this.jwks.keys.find(o=>o.kid===e),i&&this.jwks_cached_at+Iw>Date.now()))return i;const{data:r,error:s}=await V(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!r.keys||r.keys.length===0)throw new Wr("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),i=r.keys.find(o=>o.kid===e),!i)throw new Wr("No matching signing key found in JWKS");return i}async getClaims(e,n={keys:[]}){try{let i=e;if(!i){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};i=f.session.access_token}const{header:r,payload:s,signature:o,raw:{header:a,payload:l}}=_l(i);if(nx(s.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(i);if(f)throw f;return{data:{claims:s,header:r,signature:o},error:null}}const c=ix(r.alg),u=await this.fetchJwk(r.kid,n),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,Ww(`${a}.${l}`)))throw new Wr("Invalid JWT signature");return{data:{claims:s,header:r,signature:o},error:null}}catch(i){if(U(i))return{data:null,error:i};throw i}}}hs.nextInstanceID=0;const wx=hs;class xx extends wx{constructor(e){super(e)}}var _x=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class bx{constructor(e,n,i){var r,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Ew(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:ww,realtime:_w,auth:Object.assign(Object.assign({},xw),{storageKey:l}),global:vw},u=Tw(i!=null?i:{},c);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Cw(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new N1(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new y1(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new gw(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return _x(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:r,storageKey:s,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xx({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:r,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new tw(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kx=(t,e,n)=>new bx(t,e,n),Sx="https://izeyvfbioqdftncourod.supabase.co",Cx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6ZXl2ZmJpb3FkZnRuY291cm9kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQyMjExMDksImV4cCI6MjA1OTc5NzEwOX0.qtPLzjqY-o6pIFcodsv2ZVfUQTkWnDUVjrbTg4pKlfQ",Px={auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1},global:{headers:{"Content-Type":"application/json",Accept:"application/json"}}},si=kx(Sx,Cx,Px);async function Ex(){try{const{error:t}=await si.from("users").select("id",{count:"exact",head:!0}).limit(1);return{connected:!t,error:t}}catch(t){return console.error("Supabase connection error:",t),{connected:!1,error:t}}}const Tx=3,Ox="Lens",Ax="1.0.0",Dx="Chrome extension for Dynamics 365 Sales",Mx={default_title:"Lens"},Ix="options.html",Lx={service_worker:"service-worker.js",type:"module"},Rx=["identity","storage","activeTab","scripting","tabs","sidePanel"],zx=["https://*.crm.dynamics.com/*","https://*.microsoftonline.com/*"],jx=[{matches:["https://*.crm.dynamics.com/*"],js:["contentScript.js"],run_at:"document_idle"}],$x={default_path:"popup.html"},Fx={16:"icon16.png",48:"icon48.png",128:"icon128.png"};var Nx={manifest_version:Tx,name:Ox,version:Ax,description:Dx,action:Mx,options_page:Ix,background:Lx,permissions:Rx,host_permissions:zx,content_scripts:jx,side_panel:$x,icons:Fx};async function Ux(t){try{if(!t.email||t.email==="unknown@example.com")throw new Error("Valid email required for Supabase sync");const e=t.email.split("@")[1]||"unknown.com",n=t.organizationId||`org_${e.replace(/\./g,"_")}`;await Bx(n,e);const{data:i}=await si.from("users").select("id, login_count, subscription_status").eq("email",t.email).single(),r=!i,s=(i==null?void 0:i.login_count)||0,o={email:t.email,name:t.name||"Unknown User",organization_id:n,last_login:a.toISOString(),login_count:s+1,extension_version:Nx.version,dynamics_user_id:t.id||"unknown"},a=new Date,l=new Date(a);l.setDate(l.getDate()+14),r&&(o.subscription_status="free",o.first_login=a.toISOString(),o.trial_ends_at=l.toISOString());const{error:c}=await si.from("users").upsert(o,{onConflict:"email"});if(c)throw c;return{success:!0}}catch(e){return console.error("Error syncing with Supabase:",e),{success:!1,error:e}}}async function Bx(t,e){const{error:n}=await si.from("organizations").upsert({id:t,name:e.split(".")[0]||"Unknown Org",domain:e,last_active:new Date},{onConflict:"id"});n&&console.error("Error updating organization:",n)}async function Wx(){return si.auth.signOut()}const Hx={syncUserWithSupabase:Ux,signOut:Wx},Vx={openOpportunitiesTracker:["free","trial","pro","team"],basicStats:["free","trial","pro","team"],simpleWinLossCounters:["free","trial","pro","team"],limitedActivityTrends:["free"],portfolioAnalytics:["trial","pro","team"],winLossCharts:["trial","pro","team"],salesCycleAnalytics:["trial","pro","team"],fullActivityTrends:["trial","pro","team"],opportunityStats:["trial","pro","team"],activitiesCalendar:["trial","pro","team"],fullTimelineLog:["trial","pro","team"],salesCycleBenchmarks:["trial","pro","team"],allChartsAndVisuals:["trial","pro","team"],benchmarkTeamPerformance:["team"],trackOpportunities:["team"],scheduledReports:["team"],commissionEstimator:["team"],customBranding:["team"]};async function Gu(){try{const{user:t}=await chrome.storage.local.get(["user"]);if(!t||!t.email)return console.error("User not found in local storage"),kl();console.log("Checking subscription status for email:",t.email);const{manualSubscription:e}=await chrome.storage.local.get(["manualSubscription"]);if(e&&e.email===t.email)return console.log("Using manual subscription override:",e.status),e;const{data:n,error:i}=await si.from("users").select("subscription_status, subscription_end_date, trial_ends_at, organization_id, uid").eq("email",t.email).single();if(i||!n)return console.error("Error fetching user data:",i),kl();console.log("User subscription data from Supabase:",{status:n.subscription_status,trialEndsAt:n.trial_ends_at,subscriptionEndDate:n.subscription_end_date});const r=bl(n.subscription_status,n.trial_ends_at);console.log("Mapped subscription status:",r);const s=r==="trial",o=s&&n.trial_ends_at?Math.ceil((new Date(n.trial_ends_at)-new Date)/(1e3*60*60*24)):0;if(n.organization_id){const{data:l,error:c}=await si.from("organizations").select("subscription_status, subscription_end_date, subscription_seats").eq("id",n.organization_id).single();if(!c&&l&&l.subscription_status){const u=["free","trial","basic","pro","team"],d=u.indexOf(r);if(u.indexOf(bl(l.subscription_status))>d)return{status:bl(l.subscription_status),endDate:l.subscription_end_date||null,isActive:!l.subscription_end_date||new Date(l.subscription_end_date)>new Date,isOrgSubscription:!0,organizationId:n.organization_id}}}const a={status:r,endDate:n.subscription_end_date||null,isActive:!0};return s&&(a.trialEndsAt=n.trial_ends_at,a.trialDaysRemaining=o),await chrome.storage.local.set({subscription:a}),a}catch(t){return console.error("Error in getSubscriptionStatus:",t),kl()}}function bl(t,e){return t==="active"?"pro":e&&new Date(e)>new Date?"trial":{cancelled:"free",trialing:"trial",trial:"trial"}[t]||t||"free"}function Hm(t,e="free"){return(Vx[t]||[]).includes(e)}function kl(){return{status:"free",endDate:null,isActive:!0,isOrgSubscription:!1}}async function Kx(){try{const t=await Mc.loginWithDynamicsCrm();if(!t.success)return{success:!1,error:t.error};const e=await Mc.fetchUserInfo(t.token);await $h(t,e,{status:"free",isActive:!0});try{await Hx.syncUserWithSupabase(e);const n=await Gu();return await $h(t,e,n),{success:!0,token:t.token,user:e,subscription:n,error:null}}catch(n){return console.warn("Supabase sync failed, continuing with Dynamics auth only:",n),{success:!0,token:t.token,user:e,subscription:{status:"free",isActive:!0},error:null}}}catch(t){return console.error("Login error:",t),{success:!1,error:t.message}}}async function jh(){try{const{accessToken:t,expirationTime:e}=await chrome.storage.local.get(["accessToken","expirationTime"]);return t&&e&&Date.now()<e}catch(t){return console.error("Login check error:",t),!1}}async function Yx(){try{const{user:t}=await chrome.storage.local.get(["user"]);if(t&&t.email)return t;const e=await Gx();if(e){const n=await Mc.fetchUserInfo(e);return await chrome.storage.local.set({user:n}),n}return null}catch(t){return console.error("Error getting current user:",t),null}}async function qx(t={}){try{await chrome.storage.local.remove(["accessToken","rawAccessToken","expirationTime","tokenType","user","subscription","currentOpportunityId","lastUpdated"]);for(const e in t)typeof t[e]=="function"&&t[e](null);return{success:!0,message:"Logged out successfully"}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}}async function Gx(){try{const{accessToken:t,expirationTime:e}=await chrome.storage.local.get(["accessToken","expirationTime"]);return!t||Date.now()>e?null:t}catch(t){return console.error("Error getting access token:",t),null}}async function $h(t,e,n){await chrome.storage.local.set({accessToken:t.token,expirationTime:t.expirationTime,user:e,subscription:n})}let eo=null;const Jx=t=>{if(!t)return"Token is null or undefined";const e=t.startsWith("Bearer "),n=t.length,i=t.substring(0,Math.min(30,n));return{format:e?"Has 'Bearer' prefix":"Missing 'Bearer' prefix",length:n,preview:i+"...",isJWT:t.includes(".")&&t.split(".").length===3}},Wi=async()=>{try{const{currentOrgId:t,organizationId:e}=await chrome.storage.local.get(["currentOrgId","organizationId"]);if(t||e){const r=t||e;return console.log("[OppUtil] Found organization ID in storage:",r),r}const i=(await chrome.tabs.query({active:!0,currentWindow:!0}))[0];if((i==null?void 0:i.url)&&i.url.includes("crm.dynamics.com"))try{const r=await new Promise((s,o)=>{try{chrome.tabs.sendMessage(i.id,{type:"GET_ORGANIZATION_ID"},a=>{if(chrome.runtime.lastError){console.warn("Error sending message:",chrome.runtime.lastError),o(chrome.runtime.lastError);return}s(a)})}catch(a){o(a)}});if(r!=null&&r.organizationId)return chrome.storage.local.set({currentOrgId:r.organizationId,organizationId:r.organizationId,lastOrgIdUpdated:Date.now()}),r.organizationId}catch(r){if(console.warn("Could not communicate with content script:",r),i.url){const s=i.url.match(/https:\/\/([^.]+)\.crm\.dynamics\.com/i);if(s&&s[1]){const o=s[1];return chrome.storage.local.set({currentOrgId:o,organizationId:o,lastOrgIdUpdated:Date.now()}),o}}}return null}catch(t){return console.error("Error getting organization ID:",t),null}},tr=async()=>{if(eo)return eo;const t=await Wi();return t?(eo=`https://${t}.crm.dynamics.com/api/data/v9.2`,eo):(console.error("Cannot create base URL: No organization ID available"),null)},Vm=async t=>{try{const e=await tr();if(!e)return console.error("[OppUtil][getCurrentUserId] Cannot determine API base URL - organization ID not found"),null;let n=t;t.startsWith("Bearer ")||(n=`Bearer ${t}`),console.log(`[OppUtil][getCurrentUserId] Fetching current user with WhoAmI endpoint: ${e}/WhoAmI`),console.log(`[OppUtil][getCurrentUserId] Using token format: ${n.substring(0,20)}...`),console.log("[OppUtil][getCurrentUserId] Token debug info:",Jx(t));const i=await fetch(`${e}/WhoAmI`,{method:"GET",headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0","Content-Type":"application/json"}});if(console.log(`[OppUtil][getCurrentUserId] WhoAmI URL used: ${e}/WhoAmI`),console.log(`[OppUtil][getCurrentUserId] WhoAmI response status: ${i.status} token: ${t}`),console.log("[OppUtil][getCurrentUserId] Token at WhoAmI call:",t==null?void 0:t.substring(0,30)),!i.ok){const o=await i.text();if(console.error(`[OppUtil][getCurrentUserId] Failed to fetch current user: ${i.status} - ${o}`),i.status===401)throw new Error("[OppUtil][getCurrentUserId] Authentication failed. Please log in again.");return null}const r=await i.json();if(console.log("[OppUtil][getCurrentUserId] WhoAmI response data:",JSON.stringify(r,null,2)),r.UserId)return console.log(`[OppUtil][getCurrentUserId] Found UserId: ${r.UserId}`),r.UserId;if(r.value&&r.value.UserId)return console.log(`[OppUtil][getCurrentUserId] Found UserId in value property: ${r.value.UserId}`),r.value.UserId;const s=["userId","userid","user_id","id"];for(const o of s)if(r[o])return console.log(`[OppUtil][getCurrentUserId] Found user ID in property ${o}: ${r[o]}`),r[o];throw console.error(`[OppUtil][getCurrentUserId] No user ID found in response: ${JSON.stringify(r)}`),new Error("[OppUtil][getCurrentUserId] User ID not found in response. Please check the Dynamics CRM configuration.")}catch(e){throw console.error("[OppUtil][getCurrentUserId] Error fetching current user:",e),new Error(`[OppUtil][getCurrentUserId] Error fetching current user: ${e.message}`)}},Qx=async()=>{try{const t=await chrome.storage.local.get(["currentOpportunityId"]);if(t.currentOpportunityId)return console.log("[OppUtil] Found opportunity ID in storage:",t.currentOpportunityId),t.currentOpportunityId;const n=(await chrome.tabs.query({active:!0,currentWindow:!0}))[0];return(n==null?void 0:n.url)&&n.url.includes("crm.dynamics.com")?new Promise((i,r)=>{try{chrome.tabs.sendMessage(n.id,{type:"CHECK_OPPORTUNITY_ID"},s=>{if(chrome.runtime.lastError){console.warn("Error sending message:",chrome.runtime.lastError),i(null);return}console.log("[OppUtil] Content script response:",s),i((s==null?void 0:s.opportunityId)||null)})}catch(s){console.error("Message sending error:",s),i(null)}}):null}catch(t){return console.error("Error getting opportunity ID:",t),null}},Zx=async(t,e)=>{var r;console.log(`[OppUtil] Attempting to fetch activities for opportunity: ${e}`);const n=await tr();if(!n)return console.error("Cannot fetch activities: Organization ID not found"),[];const i=`${n}/activitypointers?$filter=_regardingobjectid_value eq '${e}'&$select=activityid,subject,activitytypecode,actualstart,actualend,createdon,scheduledstart`;console.log("[OppUtil] FETCHING ACTIVITIES FROM:",i);try{const s=await fetch(i,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(console.log(`[OppUtil] Activities API response status: ${s.status}`),s.status===401)return console.warn("Authentication token expired or invalid when fetching activities"),[];if(!s.ok){const a=await s.text();throw new Error(`Failed to fetch activities: ${s.status} - ${a}`)}const o=await s.json();return console.log(`[OppUtil] Received ${((r=o.value)==null?void 0:r.length)||0} activities`),o.value||[]}catch(s){return console.error("Error fetching activities:",s),[]}},Fh=async(t,e,n,i,r,s)=>{if(!!e)try{n(!0),i(null),console.log(`[OppUtil][fetchOpportunityDetails] Attempting to fetch opportunity details for ID: ${e}`);const o=await tr();if(!o)throw new Error("Cannot fetch opportunity details: Organization ID not found. Please navigate to Dynamics CRM first.");const a=[`${o}/opportunities(${e})`,`${o}/opportunities(guid'${e}')`,`${o}/opportunities?$filter=opportunityid eq ${e}`,`${o}/opportunities?$filter=opportunityid eq guid'${e}'`];let l=null,c=null,u=!1;for(const f of a){console.log(`[OppUtil][fetchOpportunityDetails] Trying URL format: ${f}`);try{const m=await fetch(f,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0","Content-Type":"application/json"}});if(console.log(`[OppUtil][fetchOpportunityDetails] Response status for ${f}: ${m.status}`),m.status===401){u=!0,l={status:401,url:f,text:"Authentication failed"};break}if(m.ok){c=m;break}l={status:m.status,url:f,text:await m.text()}}catch(m){console.log(`[OppUtil][fetchOpportunityDetails] Error with format ${f}: ${m.message}`),l={message:m.message,url:f}}}if(u)throw new Error("[OppUtil][fetchOpportunityDetails] Authentication failed. Please log in again.");if(!c)throw console.error("[OppUtil][fetchOpportunityDetails] All URL formats failed:",l),new Error(`[OppUtil][fetchOpportunityDetails] Failed to fetch opportunity details: ${l.status||"API Error"}`);const d=await c.json();console.log("[OppUtil][fetchOpportunityDetails] Opportunity data received:",d),d.value&&Array.isArray(d.value)&&d.value.length>0?r(d.value[0]):r(d);const h=await Zx(t,e);s(h),console.log("[OppUtil][fetchOpportunityDetails] Activities data received:",h)}catch(o){console.error("[OppUtil][fetchOpportunityDetails] Error fetching opportunity details:",o),i(`[OppUtil][fetchOpportunityDetails] Failed to fetch opportunity details: ${o.message}`)}finally{n(!1)}},Nh=async(t,e,n,i,r)=>{var s;try{e(!0),n(null);const o=await tr();if(!o)throw new Error("[OppUtil][fetchOpportunitiesWithActivities] Cannot fetch opportunities: Organization ID not found. Please navigate to Dynamics CRM first.");const a=await Vm(t);if(!a)throw new Error("[OppUtil][fetchOpportunitiesWithActivities] Could not determine current user ID");const l=`${o}/opportunities?$filter=statecode eq 0 and _ownerid_value eq ${a}&$select=name,opportunityid,_customerid_value,createdon,statecode,estimatedvalue,estimatedclosedate,actualclosedate&$expand=customerid_account($select=name)`;console.log(`\u2705 [OppUtil][fetchOpportunitiesWithActivities] Fetching opportunities list from ${l}`);const c=await fetch(l,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(console.log(`[OppUtil][fetchOpportunitiesWithActivities] Response status: ${c.status}`),console.log(`[OppUtil][fetchOpportunitiesWithActivities] Token used: ${t}`),c.status===401)throw console.warn("[OppUtil][fetchOpportunitiesWithActivities] Status 401: Authentication token expired or invalid."),new Error("[OppUtil][fetchOpportunitiesWithActivities] Status 401: Authentication failed. Please log in again.");if(!c.ok){let h="";try{const f=await c.json();h=JSON.stringify(f)}catch{h=await c.text()}throw console.error(`[OppUtil][fetchOpportunitiesWithActivities] API Error: ${c.status}`,h),new Error(`[OppUtil][fetchOpportunitiesWithActivities] Failed to fetch data: ${c.status} - ${h}`)}const u=await c.json();console.log(`[OppUtil][fetchOpportunitiesWithActivities] Received ${((s=u.value)==null?void 0:s.length)||0} opportunities`);const d=await Promise.all((u.value||[]).map(async(h,f)=>{try{const m=h.opportunityid;if(!m)return console.warn(`[OppUtil][fetchOpportunitiesWithActivities] Skipping opportunity at index ${f} without ID`,h),{...h,opportunities_list_index:f,activities:[],lastActivity:null};const w=`${await tr()}/activitypointers?$filter=_regardingobjectid_value eq ${m}&$select=activityid,subject,activitytypecode,scheduledstart,actualstart,createdon&$orderby=createdon desc`,p=await fetch(w,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});let g=[];return p.ok&&(g=(await p.json()).value||[]),{...h,opportunities_list_index:f,activities:g,lastActivity:g.length>0?g[0].createdon:null}}catch(m){return console.error(`[OppUtil][fetchOpportunitiesWithActivities] Error processing opportunity at index ${f}:`,m),{...h,opportunities_list_index:f,activities:[],lastActivity:null}}}));i(d)}catch(o){console.error("[OppUtil][fetchOpportunitiesWithActivities] Error fetching opportunities:",o),n(`[OppUtil][fetchOpportunitiesWithActivities] Failed to fetch opportunities list: ${o.message}`),r&&r({errorType:"[OppUtil][fetchOpportunitiesWithActivities] Opportunities List Error",message:o.message,timestamp:new Date().toISOString()})}finally{e(!1)}},Xx=async(t,e,n,i)=>{var r;try{e&&e(!0),n&&n(null);const s=await tr();if(!s)throw new Error("[OppUtil][fetchClosedOpportunities] Cannot fetch closed opportunities: Organization ID not found. Please navigate to Dynamics CRM first.");const o=await Vm(t);if(!o)throw new Error("[OppUtil][fetchClosedOpportunities] Could not determine current user ID");const a=`${s}/opportunities?$filter=statecode ne 0 and _ownerid_value eq ${o}&$select=name,statecode,_customerid_value,opportunityid,totalamount,actualclosedate,totaldiscountamount,exchangerate,createdon&$orderby=actualclosedate desc`;console.log("[OppUtil][fetchClosedOpportunities] Fetching closed opportunities..."),console.log("[OppUtil][fetchClosedOpportunities] closed opportunity URL:",a);const l=await fetch(a,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(l.status===401)throw console.warn("[OppUtil][fetchClosedOpportunities] Authentication token expired or invalid"),new Error("[OppUtil][fetchClosedOpportunities] Authentication failed. Please log in again.");if(!l.ok){let d="";try{const h=await l.json();d=JSON.stringify(h)}catch{d=await l.text()}throw console.error(`[OppUtil][fetchClosedOpportunities] API Error: ${l.status}`,d),new Error(`[OppUtil][fetchClosedOpportunities] Failed to fetch closed opportunities: ${l.status} - ${d}`)}const c=await l.json();console.log(`[OppUtil][fetchClosedOpportunities] Received ${((r=c.value)==null?void 0:r.length)||0} closed opportunities`);const u=(c.value||[]).filter(d=>d.actualclosedate&&d.createdon);return i&&i(u),u}catch(s){return console.error("[OppUtil][fetchClosedOpportunities] Error fetching closed opportunities:",s),n&&n(`[OppUtil][fetchClosedOpportunities] Failed to fetch closed opportunities: ${s.message}`),[]}finally{e&&e(!1)}},fs=async t=>{if(!t)return"";const e=await Wi();return e?`https://${e}.crm.dynamics.com/main.aspx?appid=e82f31a2-d4e4-ef11-9341-6045bd0438e7&pagetype=entityrecord&etn=opportunity&id=${t}`:(console.error("[OppUtil][fetchClosedOpportunities] Cannot generate opportunity URL: Organization ID not found"),"")};var ja={exports:{}},$a={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_=I.exports,t_=Symbol.for("react.element"),n_=Symbol.for("react.fragment"),i_=Object.prototype.hasOwnProperty,r_=e_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s_={key:!0,ref:!0,__self:!0,__source:!0};function Km(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)i_.call(e,i)&&!s_.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:t_,type:t,key:s,ref:o,props:r,_owner:r_.current}}$a.Fragment=n_;$a.jsx=Km;$a.jsxs=Km;ja.exports=$a;const _=ja.exports.jsx,C=ja.exports.jsxs,Uc=ja.exports.Fragment,o_=({message:t,onDismiss:e})=>t?C("div",{style:{padding:"8px",backgroundColor:"#ededed",color:"#c62828",borderRadius:"4px",margin:"8px",position:"relative"},children:[_("button",{onClick:e,style:{position:"absolute",top:"2px",right:"2px",background:"none",border:"none",fontSize:"16px",cursor:"pointer",color:"#c62828"},children:"\xD7"}),C("div",{style:{marginBottom:"4px"},children:[_("strong",{children:"Error:"})," ",t]})]}):null;var Ym={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Uh=yn.createContext&&yn.createContext(Ym),a_=["attr","size","title"];function l_(t,e){if(t==null)return{};var n=c_(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(n[i]=t[i]))}return n}function c_(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function ia(){return ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ia.apply(this,arguments)}function Bh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ra(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bh(Object(n),!0).forEach(function(i){u_(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bh(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function u_(t,e,n){return e=d_(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d_(t){var e=h_(t,"string");return typeof e=="symbol"?e:e+""}function h_(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qm(t){return t&&t.map((e,n)=>yn.createElement(e.tag,ra({key:n},e.attr),qm(e.child)))}function Me(t){return e=>yn.createElement(f_,ia({attr:ra({},t.attr)},e),qm(t.child))}function f_(t){var e=n=>{var{attr:i,size:r,title:s}=t,o=l_(t,a_),a=r||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),yn.createElement("svg",ia({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:l,style:ra(ra({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&yn.createElement("title",null,s),t.children)};return Uh!==void 0?yn.createElement(Uh.Consumer,null,n=>e(n)):e(Ym)}function p_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M180.24,132.24l-80,80a6,6,0,0,1-8.48-8.48L167.51,128,91.76,52.24a6,6,0,0,1,8.48-8.48l80,80A6,6,0,0,1,180.24,132.24Z"},child:[]}]})(t)}function g_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M246,80a26,26,0,1,0-46.6,15.84l-29.83,36.72-26-59.76a26,26,0,1,0-31.16,0l-26,59.76L56.6,95.84a26,26,0,1,0-22.36,10.09L49,194.3A14,14,0,0,0,62.78,206H193.22A14,14,0,0,0,207,194.3l14.73-88.37A26,26,0,0,0,246,80ZM128,38a14,14,0,1,1-14,14A14,14,0,0,1,128,38ZM22,80A14,14,0,1,1,36,94,14,14,0,0,1,22,80ZM195.2,192.33a2,2,0,0,1-2,1.67H62.78a2,2,0,0,1-2-1.67L46.08,104l1.22-.55,36,44.36A6,6,0,0,0,88,150a5.52,5.52,0,0,0,.81-.06,6,6,0,0,0,4.69-3.55l29.92-68.8a25.79,25.79,0,0,0,9.16,0l29.92,68.8a6,6,0,0,0,4.69,3.55,5.52,5.52,0,0,0,.81.06,6,6,0,0,0,4.66-2.22l36-44.36,1.22.55ZM220,94a14,14,0,1,1,14-14A14,14,0,0,1,220,94Z"},child:[]}]})(t)}function m_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M208,82H174V56a46,46,0,0,0-92,0V82H48A14,14,0,0,0,34,96V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V96A14,14,0,0,0,208,82ZM94,56a34,34,0,0,1,68,0V82H94ZM210,208a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V96a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2Zm-72-56a10,10,0,1,1-10-10A10,10,0,0,1,138,152Z"},child:[]}]})(t)}function Wh(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},child:[]}]})(t)}function y_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M208,152h16a8,8,0,0,0,0-16H208V120h16a8,8,0,0,0,0-16H207.6a79.76,79.76,0,0,0-21.44-46.85l19.5-19.49a8,8,0,0,0-11.32-11.32l-20.29,20.3a79.74,79.74,0,0,0-92.1,0L61.66,26.34A8,8,0,0,0,50.34,37.66l19.5,19.49A79.76,79.76,0,0,0,48.4,104H32a8,8,0,0,0,0,16H48v16H32a8,8,0,0,0,0,16H48v8c0,2.7.14,5.37.4,8H32a8,8,0,0,0,0,16H51.68a80,80,0,0,0,152.64,0H224a8,8,0,0,0,0-16H207.6c.26-2.63.4-5.3.4-8ZM128,48a64.07,64.07,0,0,1,63.48,56h-127A64.07,64.07,0,0,1,128,48Zm8,175.48V144a8,8,0,0,0-16,0v79.48A64.07,64.07,0,0,1,64,160V120H192v40A64.07,64.07,0,0,1,136,223.48Z"},child:[]}]})(t)}function v_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-68-76a12,12,0,1,1-12-12A12,12,0,0,1,140,132Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,184,132ZM96,172a12,12,0,1,1-12-12A12,12,0,0,1,96,172Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,140,172Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,184,172Z"},child:[]}]})(t)}function w_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM208,208V48H48V208H208Z"},child:[]}]})(t)}function x_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"},child:[]}]})(t)}function __(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M219.31,108.68l-80-80a16,16,0,0,0-22.62,0l-80,80A15.87,15.87,0,0,0,32,120v96a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V160h32v56a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V120A15.87,15.87,0,0,0,219.31,108.68ZM208,208H160V152a8,8,0,0,0-8-8H104a8,8,0,0,0-8,8v56H48V120l80-80,80,80Z"},child:[]}]})(t)}function b_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M174.63,81.37a80,80,0,1,0-93.26,93.26,80,80,0,1,0,93.26-93.26ZM100.69,136,120,155.31A63.48,63.48,0,0,1,96,160,63.48,63.48,0,0,1,100.69,136Zm33.75,11.13-25.57-25.57a64.65,64.65,0,0,1,12.69-12.69l25.57,25.57A64.65,64.65,0,0,1,134.44,147.13ZM155.31,120,136,100.69A63.48,63.48,0,0,1,160,96,63.48,63.48,0,0,1,155.31,120ZM32,96a64,64,0,0,1,126-16A80.08,80.08,0,0,0,80.05,158,64.11,64.11,0,0,1,32,96ZM160,224A64.11,64.11,0,0,1,98,176,80.08,80.08,0,0,0,176,98,64,64,0,0,1,160,224Z"},child:[]}]})(t)}function k_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,128a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,128ZM40,72H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16ZM216,184H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"},child:[]}]})(t)}function Hh(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},child:[]}]})(t)}function S_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M144.27,45.93a8,8,0,0,1,9.8-5.66,86.22,86.22,0,0,1,61.66,61.66,8,8,0,0,1-5.66,9.8A8.23,8.23,0,0,1,208,112a8,8,0,0,1-7.73-5.94,70.35,70.35,0,0,0-50.33-50.33A8,8,0,0,1,144.27,45.93Zm-2.33,41.8c13.79,3.68,22.65,12.54,26.33,26.33A8,8,0,0,0,176,120a8.23,8.23,0,0,0,2.07-.27,8,8,0,0,0,5.66-9.8c-5.12-19.16-18.5-32.54-37.66-37.66a8,8,0,1,0-4.13,15.46Zm81.94,95.35A56.26,56.26,0,0,1,168,232C88.6,232,24,167.4,24,88A56.26,56.26,0,0,1,72.92,32.12a16,16,0,0,1,16.62,9.52l21.12,47.15,0,.12A16,16,0,0,1,109.39,104c-.18.27-.37.52-.57.77L88,129.45c7.49,15.22,23.41,31,38.83,38.51l24.34-20.71a8.12,8.12,0,0,1,.75-.56,16,16,0,0,1,15.17-1.4l.13.06,47.11,21.11A16,16,0,0,1,223.88,183.08Zm-15.88-2s-.07,0-.11,0h0l-47-21.05-24.35,20.71a8.44,8.44,0,0,1-.74.56,16,16,0,0,1-15.75,1.14c-18.73-9.05-37.4-27.58-46.46-46.11a16,16,0,0,1,1-15.7,6.13,6.13,0,0,1,.57-.77L96,95.15l-21-47a.61.61,0,0,1,0-.12A40.2,40.2,0,0,0,40,88,128.14,128.14,0,0,0,168,216,40.21,40.21,0,0,0,208,181.07Z"},child:[]}]})(t)}function C_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40a8,8,0,0,0-11.32,11.32L204.69,120H112a8,8,0,0,0,0,16h92.69l-26.35,26.34a8,8,0,0,0,11.32,11.32l40-40A8,8,0,0,0,229.66,122.34Z"},child:[]}]})(t)}function Sl(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M246,98.73l-56-64A8,8,0,0,0,184,32H72a8,8,0,0,0-6,2.73l-56,64a8,8,0,0,0,.17,10.73l112,120a8,8,0,0,0,11.7,0l112-120A8,8,0,0,0,246,98.73ZM222.37,96H180L144,48h36.37ZM74.58,112l30.13,75.33L34.41,112Zm89.6,0L128,202.46,91.82,112ZM96,96l32-42.67L160,96Zm85.42,16h40.17l-70.3,75.33ZM75.63,48H112L76,96H33.63Z"},child:[]}]})(t)}function P_(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"},child:[]}]})(t)}function Vh(t){return Me({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"},child:[]}]})(t)}const E_=({onLogin:t})=>C("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:[C("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"10px"},children:[_(b_,{size:25,style:{marginRight:"10px"}}),_("h2",{style:{fontFamily:"'Parkinsans', sans-serif",fontWeight:600,margin:0,fontSize:"24px"},children:"Lens"})]}),_("p",{style:{marginBottom:"20px",fontFamily:"Arial, sans-serif",color:"#666666"},children:"By NordCFO"}),_("button",{onClick:t,style:{padding:"10px 16px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",maxWidth:"300px",fontSize:"14px",fontWeight:"bold"},children:"Sign in with Microsoft"})]}),T_=()=>{var d,h,f,m,y;const[t,e]=I.exports.useState(!1),[n,i]=I.exports.useState(null),[r,s]=I.exports.useState(!1),[o,a]=I.exports.useState([]);I.exports.useEffect(()=>{const w=console.error,p=[];return console.error=function(...g){w.apply(console,g);const v={timestamp:new Date().toISOString(),message:g.map(x=>{if(x instanceof Error)return{name:x.name,message:x.message};if(typeof x=="object")try{return JSON.stringify(x)}catch{return`[Object: ${typeof x}]`}else return String(x)}).join(" ")};p.unshift(v),p.length>10&&p.pop(),a([...p])},()=>{console.error=w}},[]);const l=async()=>{try{const w={userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,vendor:navigator.vendor,screen:{width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth},viewport:{width:window.innerWidth,height:window.innerHeight}};let p={};try{p={id:chrome.runtime.id,version:chrome.runtime.getManifest().version}}catch(k){p={error:k.message}}let g="unknown";try{const k=await chrome.tabs.query({active:!0,currentWindow:!0});if(k&&k[0]&&k[0].url){const P=new URL(k[0].url);g=`${P.protocol}//${P.hostname}${P.pathname.split("/").slice(0,-1).join("/")}/[REDACTED]`}}catch(k){g=`Error getting URL: ${k.message}`}let v={};try{v=await chrome.storage.local.get(null),v.currentOpportunityId&&(v.currentOpportunityId="REDACTED")}catch(k){v={error:k.message}}let x={};try{if(window.performance){const k=window.performance;x={memory:k.memory?{jsHeapSizeLimit:k.memory.jsHeapSizeLimit,totalJSHeapSize:k.memory.totalJSHeapSize,usedJSHeapSize:k.memory.usedJSHeapSize}:"Not available",navigation:k.navigation?{redirectCount:k.navigation.redirectCount,type:k.navigation.type}:"Not available",timing:k.timing?{domComplete:k.timing.domComplete,domContentLoadedEventEnd:k.timing.domContentLoadedEventEnd,loadEventEnd:k.timing.loadEventEnd}:"Not available"}}}catch(k){x={error:k.message}}const b={timestamp:new Date().toISOString(),browserInfo:w,extensionInfo:p,currentUrl:g,storageState:v,errorLog:o,performanceMetrics:x,buildInfo:{buildDate:window.__BUILD_DATE__||"unknown",environment:window.__ENV__||"unknown"}};i(b),e(!0)}catch(w){console.error("Error collecting debug information:",w),i({error:w.message,timestamp:new Date().toISOString()}),e(!0)}},c=()=>{try{navigator.clipboard.writeText(JSON.stringify(n,null,2)),s(!0),setTimeout(()=>s(!1),2e3)}catch(w){console.error("Error copying to clipboard:",w)}},u=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(n,null,2)),window.open("https://www.lens.nordcfo.com/debugcontact","_blank")}catch(w){console.error("Error opening debug page or copying log:",w),alert("Could not open the debug page. Please visit https://www.lens.nordcfo.com/debugcontact manually.")}};return C(Uc,{children:[_("button",{onClick:l,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Debug",children:_(y_,{size:20})}),t&&_("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>e(!1),children:C("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"700px",width:"90%",maxHeight:"80vh",overflow:"auto"},onClick:w=>w.stopPropagation(),children:[_("h3",{style:{margin:"0 0 16px 0"},children:"Debug Information"}),C("div",{style:{marginBottom:"16px"},children:[_("p",{style:{fontSize:"14px",marginBottom:"8px"},children:"This information helps us diagnose and fix issues with the NordSales extension."}),C("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[C("div",{style:{backgroundColor:"#f0f4ff",padding:"8px",borderRadius:"4px",fontSize:"12px",flex:"1 0 auto"},children:[_("strong",{children:"Extension Version:"})," ",((d=n==null?void 0:n.extensionInfo)==null?void 0:d.version)||"Unknown"]}),C("div",{style:{backgroundColor:"#f0f4ff",padding:"8px",borderRadius:"4px",fontSize:"12px",flex:"1 0 auto"},children:[_("strong",{children:"Browser:"})," ",((h=n==null?void 0:n.browserInfo)==null?void 0:h.vendor)||""," ",((m=(f=n==null?void 0:n.browserInfo)==null?void 0:f.userAgent)==null?void 0:m.split(" ").pop())||"Unknown"]}),C("div",{style:{backgroundColor:"#f0f4ff",padding:"8px",borderRadius:"4px",fontSize:"12px",flex:"1 0 auto"},children:[_("strong",{children:"Errors:"})," ",((y=n==null?void 0:n.errorLog)==null?void 0:y.length)||0]})]})]}),_("pre",{style:{backgroundColor:"#f5f5f5",padding:"8px",borderRadius:"4px",overflow:"auto",fontSize:"12px",maxHeight:"300px"},children:JSON.stringify(n,null,2)}),C("div",{style:{marginTop:"16px",display:"flex",justifyContent:"space-between"},children:[_("div",{children:_("button",{onClick:u,style:{padding:"8px 16px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"8px"},children:"Email Report"})}),C("div",{children:[_("button",{onClick:c,style:{marginRight:"8px",padding:"8px 16px",backgroundColor:r?"#4caf50":"#f1f1f1",color:r?"white":"black",border:"none",borderRadius:"4px",cursor:"pointer"},children:r?"Copied!":"Copy"}),_("button",{onClick:()=>e(!1),style:{padding:"8px 16px",backgroundColor:"#f1f1f1",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Close"})]})]})]})})]})},O_=({subscription:t})=>{I.exports.useEffect(()=>{console.log("SubscriptionStatus component received subscription:",t)},[t]);let e,n;const i=(t==null?void 0:t.status)||"free";console.log("Processing subscription tier:",i),i==="trial"?(e="Trial",n={background:"#e3f2fd",text:"#0277bd",hover:"#29b6f6"}):i==="pro"||i==="enterprise"||i==="team"?(e=i.charAt(0).toUpperCase()+i.slice(1),n={background:"#111111",text:"#FFFFFF",hover:"#333333"}):i==="basic"?(e="Basic",n={background:"#444444",text:"#FFFFFF",hover:"#555555"}):(e="Free",n={background:"#666666",text:"#FFFFFF",hover:"#777777"});const r=i==="trial"&&(t==null?void 0:t.trialDaysRemaining);return C("div",{children:[C("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"500",backgroundColor:n.background,color:n.text,marginRight:"8px"},children:[e,r&&C("span",{style:{marginLeft:"4px",fontSize:"10px"},children:["(",t.trialDaysRemaining," ",t.trialDaysRemaining===1?"day":"days",")"]})]}),(t==null?void 0:t.isOrgSubscription)&&_("span",{style:{display:"inline-block",padding:"3px 8px",borderRadius:"20px",fontSize:"10px",backgroundColor:"#0078d4",color:"#FFFFFF"},children:"Team Plan"}),i==="trial"&&_("a",{href:"https://buy.stripe.com/8wMg1NaB77DG5wcfYY",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginTop:"4px",fontSize:"10px",color:"#0277bd",textDecoration:"none"},children:"Upgrade to Pro"})]})},Gm=({title:t="Lens",showBackButton:e=!0,onBackClick:n=()=>{},onMenuClick:i=()=>{},onSettingsClick:r=()=>{},onFetchMyOpenOpportunities:s=()=>{},onLogout:o=()=>{},isLoggingOut:a=!1,subscription:l={}})=>{const[c,u]=I.exports.useState(!1),d=()=>{u(!c),i()},h=()=>{o(),u(!1)};return C(Uc,{children:[_("div",{style:{display:"flex",justifyContent:"space-between",position:"sticky",top:0,left:0,right:0,zIndex:100,backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:C("div",{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:"4px",boxSizing:"border-box",justifyContent:"space-between",padding:"2px 12px",backgroundColor:"#ffffff",border:"1px solid #e0e0e0",fontFamily:"Segoe UI, sans-serif"},children:[C("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[_("button",{onClick:d,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:_(k_,{size:20})}),_("h2",{style:{fontSize:"16px",fontWeight:"600",fontFamily:"'Parkinsans', sans-serif"},children:t})]}),C("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[_(O_,{subscription:l}),_(T_,{}),_("button",{onClick:s,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:_(Wh,{size:20})}),C("button",{onClick:h,disabled:a,style:{background:"none",border:"none",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:a?.7:1},children:[_(C_,{size:20}),a&&_("span",{style:{fontSize:"10px",marginLeft:"2px",position:"absolute",right:"4px",top:"4px",width:"8px",height:"8px",borderRadius:"50%",borderTop:"2px solid #333",borderRight:"2px solid transparent",animation:"spin 1s linear infinite"}})]}),e&&_("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:_(Vh,{size:20})})]})]})}),_("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}),c&&_("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:101,display:"flex"},onClick:d,children:C("div",{onClick:f=>f.stopPropagation(),style:{width:"80%",maxWidth:"300px",height:"100%",backgroundColor:"white",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column"},children:[C("div",{style:{padding:"2px 16px",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[_("h2",{style:{fontSize:"16px",fontWeight:"600",fontFamily:"'Parkinsans', sans-serif",marginLeft:"12px"},children:t}),_("button",{onClick:d,style:{background:"none",border:"none",cursor:"pointer",display:"flex"},children:_(Vh,{size:24})})]}),C("div",{style:{flex:1,padding:"16px"},children:[_("div",{style:{marginBottom:"12px",cursor:"pointer",padding:"10px",borderRadius:"4px",backgroundColor:"#f5f5f5",fontWeight:"500"},onClick:s,children:C("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[_(Wh,{size:16}),"Refresh"]})}),_("div",{style:{marginBottom:"12px",cursor:"pointer",padding:"10px",borderRadius:"4px",fontWeight:"500",transition:"background-color 0.2s ease",backgroundColor:"transparent"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent"},onClick:()=>{u(!1)},children:C("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[_(__,{size:16}),"Dashboard"]})}),_("div",{style:{marginBottom:"12px",cursor:"pointer",padding:"10px",borderRadius:"4px",fontWeight:"500",transition:"background-color 0.2s ease",backgroundColor:"transparent"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent"},onClick:()=>{u(!1)},children:C("a",{href:"https://billing.stripe.com/p/login/eVa3ce7YdeM2gYofYY",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"inherit"},children:[C("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[_(P_,{size:16}),"Manage Subscription"]}),(l==null?void 0:l.status)&&C("div",{style:{margin:"0 16px 12px",padding:"10px",borderRadius:"6px",fontSize:"13px",color:"#333",lineHeight:"1.5",boxShadow:"inset 0 0 2px rgba(0,0,0,0.05)"},children:[_("strong",{children:"Plan:"})," ",l.status.charAt(0).toUpperCase()+l.status.slice(1),_("br",{}),l.status!=="free"&&l.endDate&&C(Uc,{children:[_("strong",{children:"Valid until:"})," ",new Date(l.endDate).toLocaleDateString()]})]})]})})]}),_("div",{style:{padding:"16px",borderTop:"1px solid #f0f0f0"},children:C("button",{onClick:h,disabled:a,style:{width:"100%",padding:"10px",backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"4px",cursor:a?"not-allowed":"pointer",textAlign:"center",position:"relative",opacity:a?.7:1,transition:"background-color 0.2s ease"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="white"},children:[a?"Logging out...":"Logout",a&&_("span",{style:{display:"inline-block",width:"10px",height:"10px",marginLeft:"8px",borderRadius:"50%",borderTop:"2px solid #333",borderRight:"2px solid transparent",animation:"spin 1s linear infinite"}})]})})]})})]})},A_=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],D_=["January","February","March","April","May","June","July","August","September","October","November","December"],Kh={4201:"#4285F4",4202:"#0F9D58",4204:"#F4B400",4210:"#DB4437",default:"#9E9E9E"},sa=t=>{if(!t)return"Activity";switch(t.toLowerCase()){case"appointment":return"Meeting";case"email":return"Email";case"phonecall":return"Phone Call";case"task":return"Task";default:return`Activity (${t})`}},M_=(t,e)=>{if(e<=1)return t;switch(t){case"Meeting":return"Meetings";case"Email":return"Emails";case"Phone Call":return"Phone Calls";case"Task":return"Tasks";default:return`${t}s`}},Ju=t=>{if(!t)return _(Hh,{size:18,color:"#555"});switch(t.toLowerCase()){case"email":return _(x_,{size:18,color:"#555"});case"meeting":return _(v_,{size:18,color:"#555"});case"phone call":return _(S_,{size:18,color:"#555"});case"task":return _(w_,{size:18,color:"#555"});default:return _(Hh,{size:18,color:"#555"})}},Jm=t=>{const e=parseInt(t,10);return Kh[e]||Kh.default},I_=t=>{if(!t||t.length===0)return[];const e={};return t.forEach(n=>{if(!n)return;const i=sa(n.activitytypecode);e[i]||(e[i]={count:0,label:i}),e[i].count++}),Object.values(e).map(n=>({...n,icon:Ju(n.label)}))},ps=t=>{var o,a;if(!t)return null;const e=l=>{if(!l)return null;try{const c=new Date(l);return isNaN(c.getTime())?null:c}catch(c){return console.warn("Error parsing date:",l,c),null}},n=e(t.createdon),i=e(t.scheduledstart),r=e(t.scheduledend),s=e(t.actualstart);return(o=t.activitytypecode)==null||o.toLowerCase(),s||i||n;return((a=t.activitytypecode)==null?void 0:a.toLowerCase())==="task"?i||s||n||r:n},L_=t=>{if(!t||t.length===0)return null;const e=[...t].map(o=>({...o,_dateUsed:ps(o)})).filter(o=>o._dateUsed).sort((o,a)=>a._dateUsed-o._dateUsed),n=e.length>0?e[0]._dateUsed:null;if(!n)return null;const i=new Date,r=Math.abs(i-n);return{days:Math.ceil(r/(1e3*60*60*24)),date:n,activity:e[0]}},R_=t=>t===null?{text:"No activity",color:"#9e9e9e"}:t<=3?{text:"Last 3 days",color:"#4caf50"}:t<=7?{text:"Last 7 days",color:"#2196f3"}:t<=14?{text:"Last 2 weeks",color:"#ff9800"}:{text:`${t} days ago`,color:"#f44336"},Hi=(t,e)=>{const n=new Date(t),i=e?new Date(e):new Date,r=Math.abs(i-n);return Math.ceil(r/(1e3*60*60*24))},z_=(t,e,n)=>{const i=new Date(t,e,1),s=new Date(t,e+1,0).getDate();let o=i.getDay()-1;o<0&&(o=6);const a=[];let l=Array(7).fill(null);for(let u=0;u<o;u++)l[u]={day:null,activities:[]};const c={};n&&n.forEach(u=>{try{const d=ps(u);if(!d)return;const h=d.getMonth()===e,f=d.getFullYear()===t;if(h&&f){const m=d.getDate();c[m]||(c[m]=[]),c[m].push(u)}}catch(d){console.error("Error processing activity for calendar:",d)}});for(let u=1;u<=s;u++){const d=(o+u-1)%7;l[d]={day:u,activities:c[u]||[],isToday:new Date().getDate()===u&&new Date().getMonth()===e&&new Date().getFullYear()===t},(d===6||u===s)&&(a.push([...l]),l=Array(7).fill(null))}return a},j_=({opportunity:t,onClick:e})=>{const n=Array.isArray(t==null?void 0:t.activities)?t.activities:[],i=Hi(t.createdon,null),r=t.estimatedclosedate?Hi(new Date,t.estimatedclosedate):null,s=t.lastActivity?Hi(t.lastActivity,new Date):null,o=R_(s),a=()=>{const c=Array(8).fill(0),u=Array.isArray(n)?n:[];if(console.log("\u{1F6A8} Opportunity activities in card::",u),u.length>0){const f=new Date,m=7*24*60*60*1e3;u.forEach((y,w)=>{if(!y){console.warn(`\u{1F6A8} Null activity at index ${w}`);return}let p=null;try{p=ps(y)}catch(v){console.warn(`\u{1F6A8} Error getting date for activity ${w}:`,v);return}if(!p||isNaN(p)){console.warn(`\u{1F6A8} Invalid date for activity ${w}:`,y);return}const g=Math.floor((f-p)/m);g>=0&&g<8&&c[g]++})}else console.warn("\u{1F6A8} No activities or empty activities array",t);const d=Math.max(...c,1),h=f=>{if(f===0)return"#ebedf0";switch(Math.min(Math.ceil(f/d*4),4)){case 1:return"#c6e48b";case 2:return"#7bc96f";case 3:return"#239a3b";case 4:return"#196127";default:return"#ebedf0"}};return c.map((f,m)=>_("div",{title:`${f} ${f===1?"activity":"activities"} ${m===0?"this week":`${m} week${m!==1?"s":""} ago`}`,style:{flex:1,height:"24px",backgroundColor:h(f),borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center"},children:f>0&&_("span",{style:{fontSize:"10px",fontWeight:"bold",color:f>d/2?"#fff":"#333"},children:f})},`week-${m}`)).reverse()};return C("div",{style:{padding:"14px 16px 14px 16px",marginBottom:"12px",border:"1px solidrgb(200, 200, 200)",backgroundColor:"white",borderRadius:"8px",cursor:"pointer",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.2)",l.currentTarget.style.borderLeft="1px solidrgba(165, 165, 165, 0.80)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.08)",l.currentTarget.style.borderLeft="0px solid #cccccc"},onClick:e,children:[_("div",{style:{marginBottom:"8px",fontSize:"12px",color:"#1f2223",fontWeight:"600"},children:t.name}),C("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"12px",fontWeight:"500",color:"#5f646a"},children:[_("div",{children:t.customerid_account&&_("span",{children:t.customerid_account.name})}),_("div",{style:{fontWeight:"500"},children:t.estimatedvalue?`$${t.estimatedvalue.toLocaleString()}`:"No est. value"})]}),C("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",gap:"12px"},children:[C("div",{style:{flex:1,backgroundColor:"#f5f5f5",borderRadius:"4px",padding:"8px 12px"},children:[C("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[_("div",{style:{fontSize:"12px",color:"#555"},children:"Open days"}),_("div",{style:{fontSize:"14px",fontWeight:"bold"},children:i})]}),_("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden"},children:_("div",{style:{height:"100%",width:`${Math.min(i/90*100,100)}%`,backgroundColor:i>60?"#f44336":i>30?"#ff9800":"#2196f3",borderRadius:"2px"}})})]}),C("div",{style:{flex:1,backgroundColor:"#f5f5f5",borderRadius:"4px",padding:"8px 12px"},children:[C("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[_("div",{style:{fontSize:"12px",color:"#555"},children:"Days to close"}),_("div",{style:{fontSize:"14px",fontWeight:"bold"},children:r!==null?r:"\u2014"})]}),r!==null&&_("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden"},children:_("div",{style:{height:"100%",width:`${Math.max(100-r/30*100,0)}%`,backgroundColor:r<7?"#f44336":r<15?"#ff9800":"#4caf50",borderRadius:"2px"}})})]})]}),C("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",gap:"4px"},children:[_("div",{style:{fontSize:"12px",color:"#555",marginRight:"8px"},children:"Activity:"}),_("div",{style:{flex:1,display:"flex",gap:"4px",height:"24px",alignItems:"center"},children:a()}),_("div",{style:{display:"inline-block",backgroundColor:`${o.color}20`,color:o.color,padding:"3px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",marginLeft:"8px"},children:o.text})]})]})},zt=({title:t,isOpen:e,onToggle:n,children:i,rightElement:r})=>C("div",{style:{marginBottom:"8px",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)",border:"1px solid #e0e0e0"},children:[C("div",{onClick:n,style:{padding:"14px 16px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:e?"1px solid #f0f0f0":"none",backgroundColor:e?"#fafafa":"white"},children:[C("div",{style:{display:"flex",alignItems:"center",flex:1},children:[_("div",{style:{marginRight:"10px",color:"#6b7c93",transform:e?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:_(p_,{size:16})}),typeof t=="string"?_("h3",{style:{margin:"0",fontSize:"14px",fontWeight:"600",color:"#32325d"},children:t}):_("div",{children:t})]}),r&&_("div",{style:{marginLeft:"12px"},children:r})]}),e&&_("div",{style:{padding:"16px"},children:i})]});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ts(t){return t+.5|0}const fn=(t,e,n)=>Math.max(Math.min(t,n),e);function Ar(t){return fn(Ts(t*2.55),0,255)}function Pn(t){return fn(Ts(t*255),0,255)}function Kt(t){return fn(Ts(t/2.55)/100,0,1)}function Yh(t){return fn(Ts(t*100),0,100)}const dt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bc=[..."0123456789ABCDEF"],$_=t=>Bc[t&15],F_=t=>Bc[(t&240)>>4]+Bc[t&15],to=t=>(t&240)>>4===(t&15),N_=t=>to(t.r)&&to(t.g)&&to(t.b)&&to(t.a);function U_(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&dt[t[1]]*17,g:255&dt[t[2]]*17,b:255&dt[t[3]]*17,a:e===5?dt[t[4]]*17:255}:(e===7||e===9)&&(n={r:dt[t[1]]<<4|dt[t[2]],g:dt[t[3]]<<4|dt[t[4]],b:dt[t[5]]<<4|dt[t[6]],a:e===9?dt[t[7]]<<4|dt[t[8]]:255})),n}const B_=(t,e)=>t<255?e(t):"";function W_(t){var e=N_(t)?$_:F_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+B_(t.a,e):void 0}const H_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Qm(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function V_(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function K_(t,e,n){const i=Qm(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Y_(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Qu(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Y_(n,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function Zu(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Pn)}function Xu(t,e,n){return Zu(Qm,t,e,n)}function q_(t,e,n){return Zu(K_,t,e,n)}function G_(t,e,n){return Zu(V_,t,e,n)}function Zm(t){return(t%360+360)%360}function J_(t){const e=H_.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ar(+e[5]):Pn(+e[5]));const r=Zm(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=q_(r,s,o):e[1]==="hsv"?i=G_(r,s,o):i=Xu(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function Q_(t,e){var n=Qu(t);n[0]=Zm(n[0]+e),n=Xu(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Z_(t){if(!t)return;const e=Qu(t),n=e[0],i=Yh(e[1]),r=Yh(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Kt(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const qh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function X_(){const t={},e=Object.keys(Gh),n=Object.keys(qh);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,qh[s]);s=parseInt(Gh[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let no;function eb(t){no||(no=X_(),no.transparent=[0,0,0,0]);const e=no[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const tb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function nb(t){const e=tb.exec(t);let n=255,i,r,s;if(!!e){if(e[7]!==i){const o=+e[7];n=e[8]?Ar(o):fn(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Ar(i):fn(i,0,255)),r=255&(e[4]?Ar(r):fn(r,0,255)),s=255&(e[6]?Ar(s):fn(s,0,255)),{r:i,g:r,b:s,a:n}}}function ib(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Kt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Cl=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,xi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function rb(t,e,n){const i=xi(Kt(t.r)),r=xi(Kt(t.g)),s=xi(Kt(t.b));return{r:Pn(Cl(i+n*(xi(Kt(e.r))-i))),g:Pn(Cl(r+n*(xi(Kt(e.g))-r))),b:Pn(Cl(s+n*(xi(Kt(e.b))-s))),a:t.a+n*(e.a-t.a)}}function io(t,e,n){if(t){let i=Qu(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Xu(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Xm(t,e){return t&&Object.assign(e||{},t)}function Jh(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Pn(t[3]))):(e=Xm(t,{r:0,g:0,b:0,a:1}),e.a=Pn(e.a)),e}function sb(t){return t.charAt(0)==="r"?nb(t):J_(t)}class gs{constructor(e){if(e instanceof gs)return e;const n=typeof e;let i;n==="object"?i=Jh(e):n==="string"&&(i=U_(e)||eb(e)||sb(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Xm(this._rgb);return e&&(e.a=Kt(e.a)),e}set rgb(e){this._rgb=Jh(e)}rgbString(){return this._valid?ib(this._rgb):void 0}hexString(){return this._valid?W_(this._rgb):void 0}hslString(){return this._valid?Z_(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=rb(this._rgb,e._rgb,n)),this}clone(){return new gs(this.rgb)}alpha(e){return this._rgb.a=Pn(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ts(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return io(this._rgb,2,e),this}darken(e){return io(this._rgb,2,-e),this}saturate(e){return io(this._rgb,1,e),this}desaturate(e){return io(this._rgb,1,-e),this}rotate(e){return Q_(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Nt(){}const ob=(()=>{let t=0;return()=>t++})();function G(t){return t==null}function ce(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Y(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Se(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function nt(t,e){return Se(t)?t:e}function q(t,e){return typeof t=="undefined"?e:t}const ab=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ie(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function J(t,e,n,i){let r,s,o;if(ce(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(Y(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function oa(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function aa(t){if(ce(t))return t.map(aa);if(Y(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=aa(t[n[r]]);return e}return t}function e0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function lb(t,e,n,i){if(!e0(t))return;const r=e[t],s=n[t];Y(r)&&Y(s)?ms(r,s,i):e[t]=aa(s)}function ms(t,e,n){const i=ce(e)?e:[e],r=i.length;if(!Y(t))return t;n=n||{};const s=n.merger||lb;let o;for(let a=0;a<r;++a){if(o=i[a],!Y(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Vr(t,e){return ms(t,e,{merger:cb})}function cb(t,e,n){if(!e0(t))return;const i=e[t],r=n[t];Y(i)&&Y(r)?Vr(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=aa(r))}const Qh={"":t=>t,x:t=>t.x,y:t=>t.y};function ub(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function db(t){const e=ub(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function nr(t,e){return(Qh[e]||(Qh[e]=db(e)))(t)}function ed(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ys=t=>typeof t!="undefined",Dn=t=>typeof t=="function",Zh=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function hb(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Pe=Math.PI,Ft=2*Pe,la=Number.POSITIVE_INFINITY,fb=Pe/180,st=Pe/2,$n=Pe/4,Xh=Pe*2/3,pn=Math.log10,En=Math.sign;function To(t,e,n){return Math.abs(t-e)<n}function ef(t){const e=Math.round(t);t=To(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(pn(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function pb(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function gb(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function ca(t){return!gb(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function mb(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function t0(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function gn(t){return t*(Pe/180)}function td(t){return t*(180/Pe)}function tf(t){if(!Se(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function yb(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Pe&&(s+=Ft),{angle:s,distance:r}}function vb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Lt(t){return(t%Ft+Ft)%Ft}function wb(t,e,n,i){const r=Lt(t),s=Lt(e),o=Lt(n),a=Lt(s-r),l=Lt(o-r),c=Lt(r-s),u=Lt(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Ct(t,e,n){return Math.max(e,Math.min(n,t))}function xb(t){return Ct(t,-32768,32767)}function Li(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function nd(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Wc=(t,e,n,i)=>nd(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),_b=(t,e,n)=>nd(t,n,i=>t[i][e]>=n);function bb(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const n0=["push","pop","shift","splice","unshift"];function kb(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),n0.forEach(n=>{const i="_onData"+ed(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function nf(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(n0.forEach(s=>{delete t[s]}),delete t._chartjs)}function i0(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const r0=function(){return typeof window=="undefined"?function(t){return t()}:window.requestAnimationFrame}();function s0(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,r0.call(window,()=>{i=!1,t.apply(e,n)}))}}function Sb(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const id=t=>t==="start"?"left":t==="end"?"right":"center",Re=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Cb=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,ro=t=>t===0||t===1,rf=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ft/n)),sf=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ft/n)+1,Kr={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*st)+1,easeOutSine:t=>Math.sin(t*st),easeInOutSine:t=>-.5*(Math.cos(Pe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ro(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ro(t)?t:rf(t,.075,.3),easeOutElastic:t=>ro(t)?t:sf(t,.075,.3),easeInOutElastic(t){return ro(t)?t:t<.5?.5*rf(t*2,.1125,.45):.5+.5*sf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Kr.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Kr.easeInBounce(t*2)*.5:Kr.easeOutBounce(t*2-1)*.5+.5};function o0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function of(t){return o0(t)?t:new gs(t)}function Pl(t){return o0(t)?t:new gs(t).saturate(.5).darken(.1).hexString()}const Pb=["x","y","borderWidth","radius","tension"],Eb=["color","borderColor","backgroundColor"];function Tb(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Eb},numbers:{type:"number",properties:Pb}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Ob(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const af=new Map;function Ab(t,e){e=e||{};const n=t+JSON.stringify(e);let i=af.get(n);return i||(i=new Intl.NumberFormat(t,e),af.set(n,i)),i}function rd(t,e,n){return Ab(e,n).format(t)}const a0={values(t){return ce(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=Db(t,n)}const o=pn(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),rd(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(pn(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?a0.numeric.call(this,t,e,n):""}};function Db(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Fa={formatters:a0};function Mb(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Fa.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const oi=Object.create(null),Hc=Object.create(null);function Yr(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function El(t,e,n){return typeof e=="string"?ms(Yr(t,e),n):ms(Yr(t,""),e)}class Ib{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Pl(r.backgroundColor),this.hoverBorderColor=(i,r)=>Pl(r.borderColor),this.hoverColor=(i,r)=>Pl(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return El(this,e,n)}get(e){return Yr(this,e)}describe(e,n){return El(Hc,e,n)}override(e,n){return El(oi,e,n)}route(e,n,i,r){const s=Yr(this,e),o=Yr(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Y(l)?Object.assign({},c,l):q(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var pe=new Ib({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Tb,Ob,Mb]);function Lb(t){return!t||G(t.size)||G(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ua(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Rb(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],d!=null&&!ce(d))o=ua(t,r,s,o,d);else if(ce(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!ce(h)&&(o=ua(t,r,s,o,h));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Fn(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function lf(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function cf(t,e,n,i){l0(t,e,n,i,null)}function l0(t,e,n,i,r){let s,o,a,l,c,u,d,h;const f=e.pointStyle,m=e.rotation,y=e.radius;let w=(m||0)*fb;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(w),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,y,0,0,Ft):t.arc(n,i,y,0,Ft),t.closePath();break;case"triangle":u=r?r/2:y,t.moveTo(n+Math.sin(w)*u,i-Math.cos(w)*y),w+=Xh,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*y),w+=Xh,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(w+$n)*l,d=Math.cos(w+$n)*(r?r/2-c:l),a=Math.sin(w+$n)*l,h=Math.sin(w+$n)*(r?r/2-c:l),t.arc(n-d,i-a,c,w-Pe,w-st),t.arc(n+h,i-o,c,w-st,w),t.arc(n+d,i+a,c,w,w+st),t.arc(n-h,i+o,c,w+st,w+Pe),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*y,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}w+=$n;case"rectRot":d=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,h=Math.sin(w)*(r?r/2:y),t.moveTo(n-d,i-a),t.lineTo(n+h,i-o),t.lineTo(n+d,i+a),t.lineTo(n-h,i+o),t.closePath();break;case"crossRot":w+=$n;case"cross":d=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,h=Math.sin(w)*(r?r/2:y),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o);break;case"star":d=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,h=Math.sin(w)*(r?r/2:y),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o),w+=$n,d=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,h=Math.sin(w)*(r?r/2:y),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o);break;case"line":o=r?r/2:Math.cos(w)*y,a=Math.sin(w)*y,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(w)*(r?r/2:y),i+Math.sin(w)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ri(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function sd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function od(t){t.restore()}function zb(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),G(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function jb(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function $b(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ai(t,e,n,i,r,s={}){const o=ce(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,zb(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&$b(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),G(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),jb(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function vs(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Pe,Pe,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Pe,st,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,st,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-st,!0),t.lineTo(n+o.topLeft,i)}const Fb=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Nb=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ub(t,e){const n=(""+t).match(Fb);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Bb=t=>+t||0;function c0(t,e){const n={},i=Y(e),r=i?Object.keys(e):e,s=Y(t)?i?o=>q(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Bb(s(o));return n}function u0(t){return c0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Zn(t){return c0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function $e(t){const e=u0(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function xe(t,e){t=t||{},e=e||pe.font;let n=q(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=q(t.style,e.style);i&&!(""+i).match(Nb)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:q(t.family,e.family),lineHeight:Ub(q(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:q(t.weight,e.weight),string:""};return r.string=Lb(r),r}function so(t,e,n,i){let r=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),n!==void 0&&ce(a)&&(a=a[n%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function Wb(t,e,n){const{min:i,max:r}=t,s=ab(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function fi(t,e){return Object.assign(Object.create(t),e)}function ad(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i=="undefined"&&(i=p0("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>ad([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return h0(a,l,()=>Qb(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return df(a).includes(l)},ownKeys(a){return df(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function ir(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:d0(t,i),setContext:s=>ir(t,s,n,i),override:s=>ir(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return h0(s,o,()=>Vb(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function d0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Dn(n)?n:()=>n,isIndexable:Dn(i)?i:()=>i}}const Hb=(t,e)=>t?t+ed(e):e,ld=(t,e)=>Y(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function h0(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Vb(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Dn(a)&&o.isScriptable(e)&&(a=Kb(e,a,t,n)),ce(a)&&a.length&&(a=Yb(e,a,t,o.isIndexable)),ld(e,a)&&(a=ir(a,r,s&&s[e],o)),a}function Kb(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),ld(t,l)&&(l=cd(r._scopes,r,t,l)),l}function Yb(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index!="undefined"&&i(t))return e[s.index%e.length];if(Y(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=cd(c,r,t,u);e.push(ir(d,s,o&&o[t],a))}}return e}function f0(t,e,n){return Dn(t)?t(e,n):t}const qb=(t,e)=>t===!0?e:typeof t=="string"?nr(e,t):void 0;function Gb(t,e,n,i,r){for(const s of e){const o=qb(n,s);if(o){t.add(o);const a=f0(o._fallback,n,r);if(typeof a!="undefined"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i!="undefined"&&n!==i)return null}return!1}function cd(t,e,n,i){const r=e._rootScopes,s=f0(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=uf(a,o,n,s||n,i);return l===null||typeof s!="undefined"&&s!==n&&(l=uf(a,o,s,l,i),l===null)?!1:ad(Array.from(a),[""],r,s,()=>Jb(e,n,i))}function uf(t,e,n,i,r){for(;n;)n=Gb(t,e,n,i,r);return n}function Jb(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return ce(r)&&Y(n)?n:r||{}}function Qb(t,e,n,i){let r;for(const s of e)if(r=p0(Hb(s,t),n),typeof r!="undefined")return ld(t,r)?cd(n,i,t,r):r}function p0(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i!="undefined")return i}}function df(t){let e=t._keys;return e||(e=t._keys=Zb(t._scopes)),e}function Zb(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function ud(){return typeof window!="undefined"&&typeof document!="undefined"}function dd(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function da(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Na=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Xb(t,e){return Na(t).getPropertyValue(e)}const ek=["top","right","bottom","left"];function Xn(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=ek[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const tk=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function nk(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(tk(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Vn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Na(n),s=r.boxSizing==="border-box",o=Xn(r,"padding"),a=Xn(r,"border","width"),{x:l,y:c,box:u}=nk(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:m}=e;return s&&(f-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/f*n.width/i),y:Math.round((c-h)/m*n.height/i)}}function ik(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&dd(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Na(s),l=Xn(a,"border","width"),c=Xn(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=da(a.maxWidth,s,"clientWidth"),r=da(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||la,maxHeight:r||la}}const oo=t=>Math.round(t*10)/10;function rk(t,e,n,i){const r=Na(t),s=Xn(r,"margin"),o=da(r.maxWidth,t,"clientWidth")||la,a=da(r.maxHeight,t,"clientHeight")||la,l=ik(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const h=Xn(r,"border","width"),f=Xn(r,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=oo(Math.min(c,o,l.maxWidth)),u=oo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=oo(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=oo(Math.floor(u*i))),{width:c,height:u}}function hf(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const sk=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};ud()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function ff(t,e){const n=Xb(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const ok=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},ak=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Vi(t,e,n){return t?ok(e,n):ak()}function g0(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function m0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class lk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=r0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ut=new lk;const pf="transparent",ck={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=of(t||pf),r=i.valid&&of(e||pf);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class uk{constructor(e,n,i,r){const s=n[i];r=so([e.to,r,s,e.from]);const o=so([e.from,s,r]);this._active=!0,this._fn=e.fn||ck[e.type||typeof o],this._easing=Kr[e.easing]||Kr.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=so([e.to,n,r,e.from]),this._from=so([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class y0{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Y(e))return;const n=Object.keys(pe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Y(s))return;const o={};for(const a of n)o[a]=s[a];(ce(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=hk(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&dk(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new uk(h,e,c,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Ut.add(this._chart,i),!0}}function dk(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function hk(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function gf(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function fk(t,e,n){if(n===!1)return!1;const i=gf(t,n),r=gf(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function pk(t){let e,n,i,r;return Y(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function v0(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function mf(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],Se(c)&&(s||e===0||En(e)===En(c))&&(e+=c)}return!u&&!i.all?0:e}function gk(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:t[u]};return a}function Tl(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function mk(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function yk(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function vk(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function yf(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function vf(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=mk(s,o,i),d=e.length;let h;for(let f=0;f<d;++f){const m=e[f],{[l]:y,[c]:w}=m,p=m._stacks||(m._stacks={});h=p[c]=vk(r,u,y),h[a]=w,h._top=yf(h,o,!0,i.type),h._bottom=yf(h,o,!1,i.type);const g=h._visualValues||(h._visualValues={});g[a]=w}}function Ol(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function wk(t,e){return fi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function xk(t,e,n){return fi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function wr(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(!!i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Al=t=>t==="reset"||t==="none",wf=(t,e)=>e?t:Object.assign({},t),_k=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:v0(n,!0),values:null};class qr{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Tl(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&wr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,h,f,m)=>d==="x"?h:d==="r"?m:f,s=n.xAxisID=q(i.xAxisID,Ol(e,"x")),o=n.yAxisID=q(i.yAxisID,Ol(e,"y")),a=n.rAxisID=q(i.rAxisID,Ol(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),u=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&nf(this._data,this),e._stacked&&wr(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Y(n)){const r=this._cachedMeta;this._data=gk(n,r)}else if(i!==n){if(i){nf(i,this);const r=this._cachedMeta;wr(r),r._parsed=[]}n&&Object.isExtensible(n)&&kb(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Tl(n.vScale,n),n.stack!==i.stack&&(r=!0,wr(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(vf(this,n._parsed),n._stacked=Tl(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,h;if(this._parsing===!1)i._parsed=r,i._sorted=!0,h=r;else{ce(r[e])?h=this.parseArrayData(i,r,e,n):Y(r[e])?h=this.parseObjectData(i,r,e,n):h=this.parsePrimitiveData(i,r,e,n);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),c=d);i._sorted=l}o&&vf(this,h)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(r);let h,f,m;for(h=0,f=r;h<f;++h)m=h+i,d[h]={[a]:u||s.parse(c[m],m),[l]:o.parse(n[m],m)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+i,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,h,f;for(u=0,d=r;u<d;++u)h=u+i,f=n[h],c[u]={x:s.parse(nr(f,a),h),y:o.parse(nr(f,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:v0(r,!0),values:n._stacks[e.axis]._visualValues};return mf(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=mf(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=_k(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=yk(a);let h,f;function m(){f=r[h];const y=f[a.axis];return!Se(f[e.axis])||u>y||d<y}for(h=0;h<o&&!(!m()&&(this.updateRangeFromParsed(c,e,f,l),s));++h);if(s){for(h=o-1;h>=0;--h)if(!m()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Se(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=pk(q(this.options.clip,fk(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=r[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=xk(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=wk(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&ys(i);if(a)return wf(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(pe.elements[e]),m=()=>this.getContext(i,r,n),y=c.resolveNamedOptions(h,f,m,d);return y.$shared&&(y.$shared=l,s[o]=Object.freeze(wf(y,l))),y}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,i,n))}const c=new y0(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(!!e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Al(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){Al(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Al(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&wr(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}B(qr,"defaults",{}),B(qr,"datasetElementType",null),B(qr,"dataElementType",null);function bk(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=i0(i.sort((r,s)=>r-s))}return t._cache.$bar}function kk(t){const e=t.iScale,n=bk(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(ys(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function Sk(t,e,n,i){const r=n.barThickness;let s,o;return G(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function Ck(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function Pk(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function w0(t,e,n,i){return ce(t)?Pk(t,e,n,i):e[n.axis]=n.parse(t,i),e}function xf(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=e[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(w0(h,d,s,c));return l}function Dl(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Ek(t,e,n){return t!==0?En(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Tk(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function Ok(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Tk(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[_f(u,o,a,l)]=!0,r=c)),s[_f(r,o,a,l)]=!0,t.borderSkipped=s}function _f(t,e,n,i){return i?(t=Ak(t,e,n),t=bf(t,n,e)):t=bf(t,e,n),t}function Ak(t,e,n){return t===e?n:t===n?e:t}function bf(t,e,n){return t==="start"?e:t==="end"?n:t}function Dk(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Oo extends qr{parsePrimitiveData(e,n,i,r){return xf(e,n,i,r)}parseArrayData(e,n,i,r){return xf(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let h,f,m,y;for(h=i,f=i+r;h<f;++h)y=n[h],m={},m[s.axis]=s.parse(nr(y,c),h),d.push(w0(nr(y,u),m,o,h));return d}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=Dl(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r);for(let f=n;f<n+i;f++){const m=this.getParsed(f),y=s||G(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),w=this._calculateBarIndexPixels(f,u),p=(m._stacks||{})[a.axis],g={horizontal:c,base:y.base,enableBorderRadius:!p||Dl(m._custom)||o===p._top||o===p._bottom,x:c?y.head:w.center,y:c?w.center:y.head,height:c?w.size:Math.abs(y.size),width:c?Math.abs(y.size):w.size};h&&(g.options=d||this.resolveDataElementOptions(f,e[f].active?"active":r));const v=g.options||e[f].options;Ok(g,v,p,o),Dk(g,v,u.ratio),this.updateElement(e[f],f,g,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=u=>{const d=u._parsed.find(f=>f[i.axis]===l),h=d&&d[u.vScale.axis];if(G(h)||isNaN(h))return!0};for(const u of r)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||kk(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=Dl(c);let d=l[n.axis],h=0,f=i?this.applyStack(n,l,i):d,m,y;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&En(d)!==En(c.barEnd)&&(h=0),h+=d);const w=!G(s)&&!u?s:h;let p=n.getPixelForValue(w);if(this.chart.getDataVisibility(e)?m=n.getPixelForValue(h+f):m=p,y=m-p,Math.abs(y)<o){y=Ek(y,n,a)*o,d===a&&(p-=y/2);const g=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),x=Math.min(g,v),b=Math.max(g,v);p=Math.max(Math.min(p,b),x),m=p+y,i&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(m)-n.getValueForPixel(p))}if(p===n.getPixelForValue(a)){const g=En(y)*n.getLineWidthForValue(a)/2;p+=g,y-=g}return{size:y,base:p,head:m,center:m+y/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=q(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=r.barThickness==="flex"?Ck(e,n,r,c):Sk(e,n,r,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}B(Oo,"id","bar"),B(Oo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),B(Oo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Nn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hd{constructor(e){B(this,"options");this.options=e||{}}static override(e){Object.assign(hd.prototype,e)}init(){}formats(){return Nn()}parse(){return Nn()}format(){return Nn()}add(){return Nn()}diff(){return Nn()}startOf(){return Nn()}endOf(){return Nn()}}var Mk={_date:hd};function Ik(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?_b:Wc;if(i){if(r._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(s,e,n-d),f=c(s,e,n+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:h}=t,f=h.slice(0,u.lo+1).reverse().findIndex(y=>!G(y[d.axis]));u.lo-=Math.max(0,f);const m=h.slice(u.hi).findIndex(y=>!G(y[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:s.length-1}}function Os(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:h}=Ik(s[a],e,o,r);for(let f=d;f<=h;++f){const m=u[f];m.skip||i(m,c,f)}}}function Lk(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Ml(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Os(t,n,e,function(a,l,c){!r&&!Ri(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Rk(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=yb(o,{x:e.x,y:e.y});wb(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Os(t,n,e,s),r}function zk(t,e,n,i,r,s){let o=[];const a=Lk(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const m=u.getCenterPoint(r);if(!(!!s||t.isPointInArea(m))&&!f)return;const w=a(e,m);w<l?(o=[{element:u,datasetIndex:d,index:h}],l=w):w===l&&o.push({element:u,datasetIndex:d,index:h})}return Os(t,n,e,c),o}function Il(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?Rk(t,e,n,r):zk(t,e,n,i,r,s)}function kf(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Os(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var jk={evaluateInteractionItems:Os,modes:{index(t,e,n,i){const r=Vn(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Ml(t,r,s,i,o):Il(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const r=Vn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Ml(t,r,s,i,o):Il(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const r=Vn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Ml(t,r,s,i,o)},nearest(t,e,n,i){const r=Vn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Il(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Vn(e,t);return kf(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Vn(e,t);return kf(t,r,"y",n.intersect,i)}}};const x0=["left","top","right","bottom"];function xr(t,e){return t.filter(n=>n.pos===e)}function Sf(t,e){return t.filter(n=>x0.indexOf(n.pos)===-1&&n.box.axis===e)}function _r(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function $k(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function Fk(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!x0.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Nk(t,e){const n=Fk(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function Uk(t){const e=$k(t),n=_r(e.filter(c=>c.box.fullSize),!0),i=_r(xr(e,"left"),!0),r=_r(xr(e,"right")),s=_r(xr(e,"top"),!0),o=_r(xr(e,"bottom")),a=Sf(e,"x"),l=Sf(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:xr(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Cf(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function _0(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Bk(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!Y(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&_0(o,s.getPadding());const a=Math.max(0,e.outerWidth-Cf(o,t,"left","right")),l=Math.max(0,e.outerHeight-Cf(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Wk(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Hk(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Dr(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Hk(a.horizontal,e));const{same:d,other:h}=Bk(e,n,a,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&Dr(r,e,n,i)||u}function ao(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Pf(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;ys(c.start)&&(o=c.start),l.fullSize?ao(l,r.left,o,n.outerWidth-r.right-r.left,h):ao(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;ys(c.start)&&(s=c.start),l.fullSize?ao(l,s,r.top,h,n.outerHeight-r.bottom-r.top):ao(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var gt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=$e(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=Uk(t.boxes),l=a.vertical,c=a.horizontal;J(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,w)=>w.box.options&&w.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);_0(h,$e(i));const f=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),m=Nk(l.concat(c),d);Dr(a.fullSize,f,d,m),Dr(l,f,d,m),Dr(c,f,d,m)&&Dr(l,f,d,m),Wk(f),Pf(a.leftAndTop,f,d,m),f.x+=f.w,f.y+=f.h,Pf(a.rightAndBottom,f,d,m),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},J(a.chartArea,y=>{const w=y.box;Object.assign(w,t.chartArea),w.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class b0{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Vk extends b0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ao="$chartjs",Kk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ef=t=>t===null||t==="";function Yk(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Ao]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ef(r)){const s=ff(t,"width");s!==void 0&&(t.width=s)}if(Ef(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=ff(t,"height");s!==void 0&&(t.height=s)}return t}const k0=sk?{passive:!0}:!1;function qk(t,e,n){t&&t.addEventListener(e,n,k0)}function Gk(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,k0)}function Jk(t,e){const n=Kk[t.type]||t.type,{x:i,y:r}=Vn(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function ha(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Qk(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ha(a.addedNodes,i),o=o&&!ha(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Zk(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ha(a.removedNodes,i),o=o&&!ha(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const ws=new Map;let Tf=0;function S0(){const t=window.devicePixelRatio;t!==Tf&&(Tf=t,ws.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Xk(t,e){ws.size||window.addEventListener("resize",S0),ws.set(t,e)}function eS(t){ws.delete(t),ws.size||window.removeEventListener("resize",S0)}function tS(t,e,n){const i=t.canvas,r=i&&dd(i);if(!r)return;const s=s0((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),Xk(t,s),o}function Ll(t,e,n){n&&n.disconnect(),e==="resize"&&eS(t)}function nS(t,e,n){const i=t.canvas,r=s0(s=>{t.ctx!==null&&n(Jk(s,t))},t);return qk(i,e,r),r}class iS extends b0{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Yk(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Ao])return!1;const i=n[Ao].initial;["height","width"].forEach(s=>{const o=i[s];G(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Ao],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:Qk,detach:Zk,resize:tS}[n]||nS;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Ll,detach:Ll,resize:Ll}[n]||Gk)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return rk(e,n,i,r)}isAttached(e){const n=e&&dd(e);return!!(n&&n.isConnected)}}function rS(t){return!ud()||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas?Vk:iS}class Mn{constructor(){B(this,"x");B(this,"y");B(this,"active",!1);B(this,"options");B(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return ca(this.x)&&ca(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}B(Mn,"defaults",{}),B(Mn,"defaultRoutes");function sS(t,e){const n=t.options.ticks,i=oS(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?lS(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return cS(e,c,s,o/r),c;const u=aS(s,e,r);if(o>0){let d,h;const f=o>1?Math.round((l-a)/(o-1)):null;for(lo(e,c,u,G(f)?0:a-f,a),d=0,h=o-1;d<h;d++)lo(e,c,u,s[d],s[d+1]);return lo(e,c,u,l,G(f)?e.length:l+f),c}return lo(e,c,u),c}function oS(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function aS(t,e,n){const i=uS(t),r=e.length/n;if(!i)return Math.max(r,1);const s=pb(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function lS(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function cS(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function lo(t,e,n,i,r){const s=q(i,0),o=Math.min(q(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function uS(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const dS=t=>t==="left"?"right":t==="right"?"left":t,Of=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Af=(t,e)=>Math.min(e||t,t);function Df(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function hS(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function fS(t,e){J(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function br(t){return t.drawTicks?t.tickLength:0}function Mf(t,e){if(!t.display)return 0;const n=xe(t.font,e),i=$e(t.padding);return(ce(t.text)?t.text.length:1)*n.lineHeight+i.height}function pS(t,e){return fi(t,{scale:e,type:"scale"})}function gS(t,e,n){return fi(t,{tick:n,index:e,type:"tick"})}function mS(t,e,n){let i=id(t);return(n&&e!=="right"||!n&&e==="right")&&(i=dS(i)),i}function yS(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,f,m;const y=o-r,w=a-s;if(t.isHorizontal()){if(f=Re(i,s,a),Y(n)){const p=Object.keys(n)[0],g=n[p];m=u[p].getPixelForValue(g)+y-e}else n==="center"?m=(c.bottom+c.top)/2+y-e:m=Of(t,n,e);h=a-s}else{if(Y(n)){const p=Object.keys(n)[0],g=n[p];f=u[p].getPixelForValue(g)-w+e}else n==="center"?f=(c.left+c.right)/2-w+e:f=Of(t,n,e);m=Re(i,o,r),d=n==="left"?-st:st}return{titleX:f,titleY:m,maxWidth:h,rotation:d}}class pi extends Mn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=nt(e,Number.POSITIVE_INFINITY),n=nt(n,Number.NEGATIVE_INFINITY),i=nt(i,Number.POSITIVE_INFINITY),r=nt(r,Number.NEGATIVE_INFINITY),{min:nt(e,i),max:nt(n,r),minDefined:Se(e),maxDefined:Se(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:nt(n,nt(i,n)),max:nt(i,nt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ie(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Wb(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Df(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sS(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ie(this.options.afterUpdate,[this])}beforeSetDimensions(){ie(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ie(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ie(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ie(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=ie(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){ie(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ie(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Af(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Ct(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-br(e.grid)-n.padding-Mf(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=td(Math.min(Math.asin(Ct((u.highest.height+6)/a,-1,1)),Math.asin(Ct(l/c,-1,1))-Math.asin(Ct(h/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ie(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ie(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Mf(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=br(s)+l):(e.height=this.maxHeight,e.width=br(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,m=gn(this.labelRotation),y=Math.cos(m),w=Math.sin(m);if(a){const p=i.mirror?0:w*d.width+y*h.height;e.height=Math.min(this.maxHeight,e.height+p+f)}else{const p=i.mirror?0:y*d.width+w*h.height;e.width=Math.min(this.maxWidth,e.width+p+f)}this._calculatePadding(c,u,w,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=r*e.width,f=i*n.height):(h=i*e.height,f=r*n.width):s==="start"?f=n.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ie(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)G(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Df(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Af(n,i));let c=0,u=0,d,h,f,m,y,w,p,g,v,x,b;for(d=0;d<n;d+=l){if(m=e[d].label,y=this._resolveTickFontOptions(d),r.font=w=y.string,p=s[w]=s[w]||{data:{},gc:[]},g=y.lineHeight,v=x=0,!G(m)&&!ce(m))v=ua(r,p.data,p.gc,v,m),x=g;else if(ce(m))for(h=0,f=m.length;h<f;++h)b=m[h],!G(b)&&!ce(b)&&(v=ua(r,p.data,p.gc,v,b),x+=g);o.push(v),a.push(x),c=Math.max(v,c),u=Math.max(x,u)}fS(s,n);const k=o.indexOf(c),P=a.indexOf(u),S=M=>({width:o[M]||0,height:a[M]||0});return{first:S(0),last:S(n-1),widest:S(k),highest:S(P),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return xb(this._alignToPixels?Fn(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=gS(this.getContext(),e,i))}return this.$context||(this.$context=pS(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=gn(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=br(s),f=[],m=a.setContext(this.getContext()),y=m.display?m.width:0,w=y/2,p=function(ae){return Fn(i,ae,y)};let g,v,x,b,k,P,S,M,O,A,z,T;if(o==="top")g=p(this.bottom),P=this.bottom-h,M=g-w,A=p(e.top)+w,T=e.bottom;else if(o==="bottom")g=p(this.top),A=e.top,T=p(e.bottom)-w,P=g+w,M=this.top+h;else if(o==="left")g=p(this.right),k=this.right-h,S=g-w,O=p(e.left)+w,z=e.right;else if(o==="right")g=p(this.left),O=e.left,z=p(e.right)-w,k=g+w,S=this.left+h;else if(n==="x"){if(o==="center")g=p((e.top+e.bottom)/2+.5);else if(Y(o)){const ae=Object.keys(o)[0],ye=o[ae];g=p(this.chart.scales[ae].getPixelForValue(ye))}A=e.top,T=e.bottom,P=g+w,M=P+h}else if(n==="y"){if(o==="center")g=p((e.left+e.right)/2);else if(Y(o)){const ae=Object.keys(o)[0],ye=o[ae];g=p(this.chart.scales[ae].getPixelForValue(ye))}k=g-w,S=k-h,O=e.left,z=e.right}const N=q(r.ticks.maxTicksLimit,d),X=Math.max(1,Math.ceil(d/N));for(v=0;v<d;v+=X){const ae=this.getContext(v),ye=s.setContext(ae),D=a.setContext(ae),j=ye.lineWidth,F=ye.color,Z=D.dash||[],ee=D.dashOffset,et=ye.tickWidth,Ee=ye.tickColor,ut=ye.tickBorderDash||[],_e=ye.tickBorderDashOffset;x=hS(this,v,l),x!==void 0&&(b=Fn(i,x,j),c?k=S=O=z=b:P=M=A=T=b,f.push({tx1:k,ty1:P,tx2:S,ty2:M,x1:O,y1:A,x2:z,y2:T,width:j,color:F,borderDash:Z,borderDashOffset:ee,tickWidth:et,tickColor:Ee,tickBorderDash:ut,tickBorderDashOffset:_e}))}return this._ticksLength=d,this._borderValue=g,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=br(i.grid),f=h+u,m=d?-u:f,y=-gn(this.labelRotation),w=[];let p,g,v,x,b,k,P,S,M,O,A,z,T="middle";if(r==="top")k=this.bottom-m,P=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+m,P=this._getXAxisLabelAlignment();else if(r==="left"){const X=this._getYAxisLabelAlignment(h);P=X.textAlign,b=X.x}else if(r==="right"){const X=this._getYAxisLabelAlignment(h);P=X.textAlign,b=X.x}else if(n==="x"){if(r==="center")k=(e.top+e.bottom)/2+f;else if(Y(r)){const X=Object.keys(r)[0],ae=r[X];k=this.chart.scales[X].getPixelForValue(ae)+f}P=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")b=(e.left+e.right)/2-f;else if(Y(r)){const X=Object.keys(r)[0],ae=r[X];b=this.chart.scales[X].getPixelForValue(ae)}P=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?T="top":l==="end"&&(T="bottom"));const N=this._getLabelSizes();for(p=0,g=a.length;p<g;++p){v=a[p],x=v.label;const X=s.setContext(this.getContext(p));S=this.getPixelForTick(p)+s.labelOffset,M=this._resolveTickFontOptions(p),O=M.lineHeight,A=ce(x)?x.length:1;const ae=A/2,ye=X.color,D=X.textStrokeColor,j=X.textStrokeWidth;let F=P;o?(b=S,P==="inner"&&(p===g-1?F=this.options.reverse?"left":"right":p===0?F=this.options.reverse?"right":"left":F="center"),r==="top"?c==="near"||y!==0?z=-A*O+O/2:c==="center"?z=-N.highest.height/2-ae*O+O:z=-N.highest.height+O/2:c==="near"||y!==0?z=O/2:c==="center"?z=N.highest.height/2-ae*O:z=N.highest.height-A*O,d&&(z*=-1),y!==0&&!X.showLabelBackdrop&&(b+=O/2*Math.sin(y))):(k=S,z=(1-A)*O/2);let Z;if(X.showLabelBackdrop){const ee=$e(X.backdropPadding),et=N.heights[p],Ee=N.widths[p];let ut=z-ee.top,_e=0-ee.left;switch(T){case"middle":ut-=et/2;break;case"bottom":ut-=et;break}switch(P){case"center":_e-=Ee/2;break;case"right":_e-=Ee;break;case"inner":p===g-1?_e-=Ee:p>0&&(_e-=Ee/2);break}Z={left:_e,top:ut,width:Ee+ee.width,height:et+ee.height,color:X.backdropColor}}w.push({label:x,font:M,textOffset:z,options:{rotation:y,color:ye,strokeColor:D,strokeWidth:j,textAlign:F,textBaseline:T,translation:[b,k],backdrop:Z}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-gn(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=Fn(e,this.left,o)-o/2,u=Fn(e,this.right,a)+a/2,d=h=l):(d=Fn(e,this.top,o)-o/2,h=Fn(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&sd(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;ai(i,c,0,u,l,a)}r&&od(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=xe(i.font),o=$e(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Y(n)?(l+=o.bottom,ce(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=yS(this,l,n,a);ai(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:mS(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=q(e.grid&&e.grid.z,-1),r=q(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==pi.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return xe(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class co{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;xS(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,vS(e,o,i),this.override&&pe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in pe[r]&&(delete pe[r][i],this.override&&delete oi[i])}}function vS(t,e,n){const i=ms(Object.create(null),[n?pe.get(n):{},pe.get(e),t.defaults]);pe.set(e,i),t.defaultRoutes&&wS(e,t.defaultRoutes),t.descriptors&&pe.describe(e,t.descriptors)}function wS(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");pe.route(s,r,l,a)})}function xS(t){return"id"in t&&"defaults"in t}class _S{constructor(){this.controllers=new co(qr,"datasets",!0),this.elements=new co(Mn,"elements"),this.plugins=new co(Object,"plugins"),this.scales=new co(pi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):J(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=ed(e);ie(i["before"+r],[],i),n[e](i),ie(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var It=new _S;class bS{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(ie(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){G(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=q(i.options&&i.options.plugins,{}),s=kS(i);return r===!1&&!n?[]:CS(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function kS(t){const e={},n=[],i=Object.keys(It.plugins.items);for(let s=0;s<i.length;s++)n.push(It.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function SS(t,e){return!e&&t===!1?null:t===!0?{}:t}function CS(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=SS(i[l],r);c!==null&&s.push({plugin:a,options:PS(t.config,{plugin:a,local:n[l]},c,o)})}return s}function PS(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Vc(t,e){const n=pe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function ES(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function TS(t,e){return t===e?"_index_":"_value_"}function If(t){if(t==="x"||t==="y"||t==="r")return t}function OS(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Kc(t,...e){if(If(t))return t;for(const n of e){const i=n.axis||OS(n.position)||t.length>1&&If(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Lf(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function AS(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Lf(t,"x",n[0])||Lf(t,"y",n[0])}return{}}function DS(t,e){const n=oi[t.type]||{scales:{}},i=e.scales||{},r=Vc(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Y(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Kc(o,a,AS(o,t),pe.scales[a.type]),c=TS(l,r),u=n.scales||{};s[o]=Vr(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Vc(a,e),u=(oi[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=ES(d,l),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),Vr(s[f],[{axis:h},i[f],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Vr(a,[pe.scales[a.type],pe.scale])}),s}function C0(t){const e=t.options||(t.options={});e.plugins=q(e.plugins,{}),e.scales=DS(t,e)}function P0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function MS(t){return t=t||{},t.data=P0(t.data),C0(t),t}const Rf=new Map,E0=new Set;function uo(t,e){let n=Rf.get(t);return n||(n=e(),Rf.set(t,n),E0.add(n)),n}const kr=(t,e,n)=>{const i=nr(e,n);i!==void 0&&t.add(i)};class IS{constructor(e){this._config=MS(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=P0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),C0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return uo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return uo(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return uo(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return uo(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>kr(l,e,d))),u.forEach(d=>kr(l,r,d)),u.forEach(d=>kr(l,oi[s]||{},d)),u.forEach(d=>kr(l,pe,d)),u.forEach(d=>kr(l,Hc,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),E0.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,oi[n]||{},pe.datasets[n]||{},{type:n},pe,Hc]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=zf(this._resolverCache,e,r);let l=o;if(RS(o,n)){s.$shared=!1,i=Dn(i)?i():i;const c=this.createResolver(e,i,a);l=ir(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=zf(this._resolverCache,e,i);return Y(n)?ir(s,n,void 0,r):s}}function zf(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:ad(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const LS=t=>Y(t)&&Object.getOwnPropertyNames(t).some(e=>Dn(t[e]));function RS(t,e){const{isScriptable:n,isIndexable:i}=d0(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Dn(a)||LS(a))||o&&ce(a))return!0}return!1}var zS="4.4.8";const jS=["top","bottom","left","right","chartArea"];function jf(t,e){return t==="top"||t==="bottom"||jS.indexOf(t)===-1&&e==="x"}function $f(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Ff(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ie(n&&n.onComplete,[t],e)}function $S(t){const e=t.chart,n=e.options.animation;ie(n&&n.onProgress,[t],e)}function T0(t){return ud()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Do={},Nf=t=>{const e=T0(t);return Object.values(Do).filter(n=>n.canvas===e).pop()};function FS(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function NS(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function ho(t,e,n){return t.options.clip?t[n]:e[n]}function US(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:ho(n,e,"left"),right:ho(n,e,"right"),top:ho(i,e,"top"),bottom:ho(i,e,"bottom")}:e}class qe{static register(...e){It.add(...e),Uf()}static unregister(...e){It.remove(...e),Uf()}constructor(e,n){const i=this.config=new IS(n),r=T0(e),s=Nf(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||rS(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=ob(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bS,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Sb(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Do[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ut.listen(this,"complete",Ff),Ut.listen(this,"progress",$S),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return G(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return It}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lf(this.canvas,this.ctx),this}stop(){return Ut.stop(this),this}resize(e,n){Ut.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,hf(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ie(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};J(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Kc(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),J(s,o=>{const a=o.options,l=a.id,c=Kc(l,a),u=q(a.type,o.dtype);(a.position===void 0||jf(a.position,c)!==jf(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const h=It.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),J(r,(o,a)=>{o||delete i[a]}),J(i,o=>{gt.configure(this,o,o.options),gt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort($f("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Vc(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=It.getController(a),{datasetElementType:c,dataElementType:u}=pe.datasets[a];Object.assign(l,{dataElementType:It.getElement(u),datasetElementType:c&&It.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){J(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||J(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort($f("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){J(this.scales,e=>{gt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Zh(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;FS(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Zh(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;gt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],J(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Dn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ut.has(this)?this.attached&&!Ut.running(this)&&Ut.start(this):(this.draw(),Ff({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=US(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&sd(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&od(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Ri(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=jk.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=fi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);ys(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ut.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),lf(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Do[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};J(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){J(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},J(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!oa(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=hb(e),c=NS(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ie(s.onHover,[e,a,this],this),l&&ie(s.onClick,[e,a,this],this));const u=!oa(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}B(qe,"defaults",pe),B(qe,"instances",Do),B(qe,"overrides",oi),B(qe,"registry",It),B(qe,"version",zS),B(qe,"getChart",Nf);function Uf(){return J(qe.instances,t=>t._plugins.invalidate())}function O0(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,u=i+d):(d=s/2,a=n-d,l=n+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function mn(t,e,n,i){return t?0:Ct(e,n,i)}function BS(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=u0(i);return{t:mn(r.top,s.top,0,n),r:mn(r.right,s.right,0,e),b:mn(r.bottom,s.bottom,0,n),l:mn(r.left,s.left,0,e)}}function WS(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=Zn(r),o=Math.min(e,n),a=t.borderSkipped,l=i||Y(r);return{topLeft:mn(!l||a.top||a.left,s.topLeft,0,o),topRight:mn(!l||a.top||a.right,s.topRight,0,o),bottomLeft:mn(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:mn(!l||a.bottom||a.right,s.bottomRight,0,o)}}function HS(t){const e=O0(t),n=e.right-e.left,i=e.bottom-e.top,r=BS(t,n/2,i/2),s=WS(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Rl(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&O0(t,i);return a&&(r||Li(e,a.left,a.right))&&(s||Li(n,a.top,a.bottom))}function VS(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function KS(t,e){t.rect(e.x,e.y,e.w,e.h)}function zl(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class Tn extends Mn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=HS(this),a=VS(o.radius)?vs:KS;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,zl(o,n,s)),e.clip(),a(e,zl(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,zl(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Rl(this,e,n,i)}inXRange(e,n){return Rl(this,e,null,n)}inYRange(e,n){return Rl(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}B(Tn,"id","bar"),B(Tn,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),B(Tn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Bf=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},YS=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Wf extends Mn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ie(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=xe(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Bf(i,s);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((m,y)=>{const w=i+n/2+s.measureText(m.text).width;(y===0||c[c.length-1]+w+2*a>o)&&(d+=u,c[c.length-(y>0?0:1)]=0,f+=u,h++),l[y]={left:0,top:f,row:h,width:w,height:r},c[c.length-1]+=w+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,f=0,m=0,y=0;return this.legendItems.forEach((w,p)=>{const{itemWidth:g,itemHeight:v}=qS(i,n,s,w,r);p>0&&f+v+2*a>u&&(d+=h+a,c.push({width:h,height:f}),m+=h+a,y++,h=f=0),l[p]={left:m,top:f,col:y,width:g,height:v},h=Math.max(h,g),f+=v+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Vi(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Re(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Re(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Re(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Re(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;sd(e,this),this._draw(),od(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=pe.color,l=Vi(e.rtl,this.left,this.width),c=xe(o.font),{padding:u}=o,d=c.size,h=d/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:m,boxHeight:y,itemHeight:w}=Bf(o,d),p=function(k,P,S){if(isNaN(m)||m<=0||isNaN(y)||y<0)return;r.save();const M=q(S.lineWidth,1);if(r.fillStyle=q(S.fillStyle,a),r.lineCap=q(S.lineCap,"butt"),r.lineDashOffset=q(S.lineDashOffset,0),r.lineJoin=q(S.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=q(S.strokeStyle,a),r.setLineDash(q(S.lineDash,[])),o.usePointStyle){const O={radius:y*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:M},A=l.xPlus(k,m/2),z=P+h;l0(r,O,A,z,o.pointStyleWidth&&m)}else{const O=P+Math.max((d-y)/2,0),A=l.leftForLtr(k,m),z=Zn(S.borderRadius);r.beginPath(),Object.values(z).some(T=>T!==0)?vs(r,{x:A,y:O,w:m,h:y,radius:z}):r.rect(A,O,m,y),r.fill(),M!==0&&r.stroke()}r.restore()},g=function(k,P,S){ai(r,S.text,k,P+w/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();v?f={x:Re(s,this.left+u,this.right-i[0]),y:this.top+u+x,line:0}:f={x:this.left+u,y:Re(s,this.top+x+u,this.bottom-n[0].height),line:0},g0(this.ctx,e.textDirection);const b=w+u;this.legendItems.forEach((k,P)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;const S=r.measureText(k.text).width,M=l.textAlign(k.textAlign||(k.textAlign=o.textAlign)),O=m+h+S;let A=f.x,z=f.y;l.setWidth(this.width),v?P>0&&A+O+u>this.right&&(z=f.y+=b,f.line++,A=f.x=Re(s,this.left+u,this.right-i[f.line])):P>0&&z+b>this.bottom&&(A=f.x=A+n[f.line].width+u,f.line++,z=f.y=Re(s,this.top+x+u,this.bottom-n[f.line].height));const T=l.x(A);if(p(T,z,k),A=Cb(M,A+m+h,v?A+O:this.right,e.rtl),g(l.x(A),z,k),v)f.x+=O+u;else if(typeof k.text!="string"){const N=c.lineHeight;f.y+=A0(k,N)+u}else f.y+=b}),m0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=xe(n.font),r=$e(n.padding);if(!n.display)return;const s=Vi(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Re(e.align,d,this.right-h);else{const m=this.columnSizes.reduce((y,w)=>Math.max(y,w.height),0);u=c+Re(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const f=Re(a,d,d+h);o.textAlign=s.textAlign(id(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,ai(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=xe(e.font),i=$e(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Li(e,this.left,this.right)&&Li(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Li(e,r.left,r.left+r.width)&&Li(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!QS(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=YS(r,i);r&&!s&&ie(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&ie(n.onHover,[e,i,this],this)}else i&&ie(n.onClick,[e,i,this],this)}}function qS(t,e,n,i,r){const s=GS(i,t,e,n),o=JS(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function GS(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function JS(t,e,n){let i=t;return typeof e.text!="string"&&(i=A0(e,n)),i}function A0(t,e){const n=t.text?t.text.length:0;return e*n}function QS(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var As={id:"legend",_element:Wf,start(t,e,n){const i=t.legend=new Wf({ctx:t.ctx,options:n,chart:t});gt.configure(t,i,n),gt.addBox(t,i)},stop(t){gt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;gt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=$e(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class D0 extends Mn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=ce(i.text)?i.text.length:1;this._padding=$e(i.padding);const s=r*xe(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Re(a,i,s),d=n+e,c=s-i):(o.position==="left"?(u=i+e,d=Re(a,r,n),l=Pe*-.5):(u=s-e,d=Re(a,n,r),l=Pe*.5),c=r-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=xe(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);ai(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:id(n.align),textBaseline:"middle",translation:[o,a]})}}function ZS(t,e){const n=new D0({ctx:t.ctx,options:e,chart:t});gt.configure(t,n,e),gt.addBox(t,n),t.titleBlock=n}var Ds={id:"title",_element:D0,start(t,e,n){ZS(t,n)},stop(t){const e=t.titleBlock;gt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;gt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mr={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=vb(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Dt(t,e){return e&&(ce(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Bt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function XS(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Hf(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=xe(e.bodyFont),c=xe(e.titleFont),u=xe(e.footerFont),d=s.length,h=r.length,f=i.length,m=$e(e.padding);let y=m.height,w=0,p=i.reduce((x,b)=>x+b.before.length+b.lines.length+b.after.length,0);if(p+=t.beforeBody.length+t.afterBody.length,d&&(y+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),p){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=f*x+(p-f)*l.lineHeight+(p-1)*e.bodySpacing}h&&(y+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let g=0;const v=function(x){w=Math.max(w,n.measureText(x).width+g)};return n.save(),n.font=c.string,J(t.title,v),n.font=l.string,J(t.beforeBody.concat(t.afterBody),v),g=e.displayColors?o+2+e.boxPadding:0,J(i,x=>{J(x.before,v),J(x.lines,v),J(x.after,v)}),g=0,n.font=u.string,J(t.footer,v),n.restore(),w+=m.width,{width:w,height:y}}function e2(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function t2(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function n2(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),t2(c,t,e,n)&&(c="center"),c}function Vf(t,e,n){const i=n.yAlign||e.yAlign||e2(t,n);return{xAlign:n.xAlign||e.xAlign||n2(t,e,n,i),yAlign:i}}function i2(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function r2(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function Kf(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Zn(o);let m=i2(e,a);const y=r2(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,h)+r:a==="right"&&(m+=Math.max(d,f)+r),{x:Ct(m,0,i.width-e.width),y:Ct(y,0,i.height-e.height)}}function fo(t,e,n){const i=$e(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Yf(t){return Dt([],Bt(t))}function s2(t,e,n){return fi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function qf(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const M0={beforeTitle:Nt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Nt,beforeBody:Nt,beforeLabel:Nt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return G(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Nt,afterBody:Nt,beforeFooter:Nt,footer:Nt,afterFooter:Nt};function Ve(t,e,n,i){const r=t[e].call(n,i);return typeof r=="undefined"?M0[e].call(n,i):r}class Yc extends Mn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new y0(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=s2(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Ve(i,"beforeTitle",this,e),s=Ve(i,"title",this,e),o=Ve(i,"afterTitle",this,e);let a=[];return a=Dt(a,Bt(r)),a=Dt(a,Bt(s)),a=Dt(a,Bt(o)),a}getBeforeBody(e,n){return Yf(Ve(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return J(e,s=>{const o={before:[],lines:[],after:[]},a=qf(i,s);Dt(o.before,Bt(Ve(a,"beforeLabel",this,s))),Dt(o.lines,Ve(a,"label",this,s)),Dt(o.after,Bt(Ve(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return Yf(Ve(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Ve(i,"beforeFooter",this,e),s=Ve(i,"footer",this,e),o=Ve(i,"afterFooter",this,e);let a=[];return a=Dt(a,Bt(r)),a=Dt(a,Bt(s)),a=Dt(a,Bt(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(XS(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,i))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,i))),J(a,u=>{const d=qf(e.callbacks,u);r.push(Ve(d,"labelColor",this,u)),s.push(Ve(d,"labelPointStyle",this,u)),o.push(Ve(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Mr[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Hf(this,i),c=Object.assign({},a,l),u=Vf(this.chart,i,c),d=Kf(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Zn(a),{x:h,y:f}=e,{width:m,height:y}=n;let w,p,g,v,x,b;return s==="center"?(x=f+y/2,r==="left"?(w=h,p=w-o,v=x+o,b=x-o):(w=h+m,p=w+o,v=x-o,b=x+o),g=w):(r==="left"?p=h+Math.max(l,u)+o:r==="right"?p=h+m-Math.max(c,d)-o:p=this.caretX,s==="top"?(v=f,x=v-o,w=p-o,g=p+o):(v=f+y,x=v+o,w=p+o,g=p-o),b=v),{x1:w,x2:p,x3:g,y1:v,y2:x,y3:b}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=Vi(i.rtl,this.x,this.width);for(e.x=fo(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=xe(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=xe(s.bodyFont),d=fo(this,"left",s),h=r.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+f;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(h,c)+c/2,p=m+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,cf(e,y,w,p),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,cf(e,y,w,p)}else{e.lineWidth=Y(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=r.leftForLtr(h,c),w=r.leftForLtr(r.xPlus(h,1),c-2),p=Zn(o.borderRadius);Object.values(p).some(g=>g!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,vs(e,{x:y,y:m,w:c,h:l,radius:p}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),vs(e,{x:w,y:m+1,w:c-2,h:l-2,radius:p}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(y,m,c,l),e.strokeRect(y,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=xe(i.bodyFont);let h=d.lineHeight,f=0;const m=Vi(i.rtl,this.x,this.width),y=function(S){n.fillText(S,m.x(e.x+f),e.y+h/2),e.y+=h+s},w=m.textAlign(o);let p,g,v,x,b,k,P;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=fo(this,w,i),n.fillStyle=i.bodyColor,J(this.beforeBody,y),f=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,k=r.length;x<k;++x){for(p=r[x],g=this.labelTextColors[x],n.fillStyle=g,J(p.before,y),v=p.lines,a&&v.length&&(this._drawColorBox(n,e,x,m,i),h=Math.max(d.lineHeight,l)),b=0,P=v.length;b<P;++b)y(v[b]),h=d.lineHeight;J(p.after,y)}f=0,h=d.lineHeight,J(this.afterBody,y),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Vi(i.rtl,this.x,this.width);for(e.x=fo(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=xe(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=Zn(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Mr[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Hf(this,e),l=Object.assign({},o,this._size),c=Vf(n,e,l),u=Kf(e,l,c,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=$e(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),g0(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),m0(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!oa(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!oa(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Mr[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}B(Yc,"positioners",Mr);var Ms={id:"tooltip",_element:Yc,positioners:Mr,afterInit(t,e,n){n&&(t.tooltip=new Yc({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:M0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const o2=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function a2(t,e,n,i){const r=t.indexOf(e);if(r===-1)return o2(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const l2=(t,e)=>t===null?null:Ct(Math.round(t),0,e);function Gf(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class li extends pi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(G(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:a2(i,e,q(n,e),this._addedLabels),l2(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Gf.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}B(li,"id","category"),B(li,"defaults",{ticks:{callback:Gf}});function c2(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=s||1,m=u-1,{min:y,max:w}=e,p=!G(o),g=!G(a),v=!G(c),x=(w-y)/(d+1);let b=ef((w-y)/m/f)*f,k,P,S,M;if(b<1e-14&&!p&&!g)return[{value:y},{value:w}];M=Math.ceil(w/b)-Math.floor(y/b),M>m&&(b=ef(M*b/m/f)*f),G(l)||(k=Math.pow(10,l),b=Math.ceil(b*k)/k),r==="ticks"?(P=Math.floor(y/b)*b,S=Math.ceil(w/b)*b):(P=y,S=w),p&&g&&s&&mb((a-o)/s,b/1e3)?(M=Math.round(Math.min((a-o)/b,u)),b=(a-o)/M,P=o,S=a):v?(P=p?o:P,S=g?a:S,M=c-1,b=(S-P)/M):(M=(S-P)/b,To(M,Math.round(M),b/1e3)?M=Math.round(M):M=Math.ceil(M));const O=Math.max(tf(b),tf(P));k=Math.pow(10,G(l)?O:l),P=Math.round(P*k)/k,S=Math.round(S*k)/k;let A=0;for(p&&(h&&P!==o?(n.push({value:o}),P<o&&A++,To(Math.round((P+A*b)*k)/k,o,Jf(o,x,t))&&A++):P<o&&A++);A<M;++A){const z=Math.round((P+A*b)*k)/k;if(g&&z>a)break;n.push({value:z})}return g&&h&&S!==a?n.length&&To(n[n.length-1].value,a,Jf(a,x,t))?n[n.length-1].value=a:n.push({value:a}):(!g||S===a)&&n.push({value:S}),n}function Jf(t,e,{horizontal:n,minRotation:i}){const r=gn(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class fa extends pi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return G(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=En(r),c=En(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=c2(r,s);return e.bounds==="ticks"&&t0(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return rd(e,this.chart.options.locale,this.options.ticks.format)}}class ci extends fa{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Se(e)?e:0,this.max=Se(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=gn(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}B(ci,"id","linear"),B(ci,"defaults",{ticks:{callback:Fa.formatters.numeric}});const xs=t=>Math.floor(pn(t)),Un=(t,e)=>Math.pow(10,xs(t)+e);function Qf(t){return t/Math.pow(10,xs(t))===1}function Zf(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function u2(t,e){const n=e-t;let i=xs(n);for(;Zf(t,e,i)>10;)i++;for(;Zf(t,e,i)<10;)i--;return Math.min(i,xs(t))}function d2(t,{min:e,max:n}){e=nt(t.min,e);const i=[],r=xs(e);let s=u2(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),h=nt(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<n;)i.push({value:h,major:Qf(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;const f=nt(t.max,h);return i.push({value:f,major:Qf(f),significand:d}),i}class Xf extends pi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=fa.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Se(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Se(e)?Math.max(0,e):null,this.max=Se(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Se(this._userMin)&&(this.min=e===Un(this.min,0)?Un(this.min,-1):Un(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Un(i,-1)),o(Un(r,1)))),i<=0&&s(Un(r,-1)),r<=0&&o(Un(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=d2(n,this);return e.bounds==="ticks"&&t0(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":rd(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=pn(e),this._valueRange=pn(this.max)-pn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(pn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}B(Xf,"id","logarithmic"),B(Xf,"defaults",{ticks:{callback:Fa.formatters.logarithmic,major:{enabled:!0}}});function qc(t){const e=t.ticks;if(e.display&&t.display){const n=$e(e.backdropPadding);return q(e.font&&e.font.size,pe.font.size)+n.height}return 0}function h2(t,e,n){return n=ce(n)?n:[n],{w:Rb(t,e.string,n),h:n.length*e.lineHeight}}function ep(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function f2(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Pe/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+r[l],a),d=xe(c.font),h=h2(t.ctx,d,t._pointLabels[l]);i[l]=h;const f=Lt(t.getIndexAngle(l)+a),m=Math.round(td(f)),y=ep(m,u.x,h.w,0,180),w=ep(m,u.y,h.h,90,270);p2(n,e,f,y,w)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=y2(t,i,r)}function p2(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function g2(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(td(Lt(l.angle+st))),u=x2(l.y,a.h,c),d=v2(c),h=w2(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function m2(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(Ri({x:n,y:i},e)||Ri({x:n,y:s},e)||Ri({x:r,y:i},e)||Ri({x:r,y:s},e))}function y2(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:qc(s)/2,additionalAngle:o?Pe/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const d=g2(t,u,l);i.push(d),a==="auto"&&(d.visible=m2(d,c),d.visible&&(c=d))}return i}function v2(t){return t===0||t===180?"center":t<180?"left":"right"}function w2(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function x2(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function _2(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!G(a)){const l=Zn(e.borderRadius),c=$e(e.backdropPadding);t.fillStyle=a;const u=i-c.left,d=r-c.top,h=s-i+c.width,f=o-r+c.height;Object.values(l).some(m=>m!==0)?(t.beginPath(),vs(t,{x:u,y:d,w:h,h:f,radius:l}),t.fill()):t.fillRect(u,d,h,f)}}function b2(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));_2(n,o,s);const a=xe(o.font),{x:l,y:c,textAlign:u}=s;ai(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function I0(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Ft);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function k2(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),I0(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function S2(t,e,n){return fi(t,{label:n,index:e,type:"pointLabel"})}class po extends fa{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=$e(qc(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Se(e)&&!isNaN(e)?e:0,this.max=Se(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/qc(this.options))}generateTickLabels(e){fa.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=ie(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?f2(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=Ft/(this._pointLabels.length||1),i=this.options.startAngle||0;return Lt(e*n+gn(i))}getDistanceFromCenterForValue(e){if(G(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(G(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return S2(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-st+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),I0(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&b2(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),f=r.setContext(h),m=s.setContext(h);k2(this,f,l,o,m)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=xe(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=$e(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}ai(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}B(po,"id","radialLinear"),B(po,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Fa.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),B(po,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),B(po,"descriptors",{angleLines:{_fallback:"grid"}});const Ua={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ge=Object.keys(Ua);function tp(t,e){return t-e}function np(t,e){if(G(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Se(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(ca(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function ip(t,e,n,i){const r=Ge.length;for(let s=Ge.indexOf(t);s<r-1;++s){const o=Ua[Ge[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Ge[s]}return Ge[r-1]}function C2(t,e,n,i,r){for(let s=Ge.length-1;s>=Ge.indexOf(n);s--){const o=Ge[s];if(Ua[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Ge[n?Ge.indexOf(n):0]}function P2(t){for(let e=Ge.indexOf(t)+1,n=Ge.length;e<n;++e)if(Ua[Ge[e]].common)return Ge[e]}function rp(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=nd(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function E2(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function sp(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:E2(t,i,r,n)}class pa extends pi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new Mk._date(e.adapters.date);r.init(n),Vr(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:np(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Se(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Se(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=bb(r,s,o);return this._unit=n.unit||(i.autoSkip?ip(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):C2(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:P2(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),sp(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ct(n,0,o),i=Ct(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||ip(s.minUnit,n,i,this._getLabelCapacity(n)),a=q(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=ca(l)||l===!0,u={};let d=n,h,f;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const m=r.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<i;h=+e.add(h,a,o),f++)rp(u,h,m);return(h===i||r.bounds==="ticks"||f===1)&&rp(u,h,m),Object.keys(u).sort(tp).map(y=>+y)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return ie(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=i[n],f=c&&d&&h&&h.major;return this._adapter.format(e,r||(f?d:u))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=gn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,sp(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(np(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return i0(e.sort(tp))}}B(pa,"id","time"),B(pa,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function go(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Wc(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Wc(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class op extends pa{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=go(n,this.min),this._tableRange=go(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(go(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return go(this._table,i*this._tableRange+this._minPos,!0)}}B(op,"id","timeseries"),B(op,"defaults",pa.defaults);const L0="label";function ap(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function T2(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function R0(t,e){t.labels=e}function z0(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:L0;const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function O2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:L0;const n={labels:[],datasets:[]};return R0(n,t.labels),z0(n,t.datasets,e),n}function A2(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,f=I.exports.useRef(null),m=I.exports.useRef(null),y=()=>{!f.current||(m.current=new qe(f.current,{type:o,data:O2(a,s),options:l&&{...l},plugins:c}),ap(e,m.current))},w=()=>{ap(e,null),m.current&&(m.current.destroy(),m.current=null)};return I.exports.useEffect(()=>{!r&&m.current&&l&&T2(m.current,l)},[r,l]),I.exports.useEffect(()=>{!r&&m.current&&R0(m.current.config.data,a.labels)},[r,a.labels]),I.exports.useEffect(()=>{!r&&m.current&&a.datasets&&z0(m.current.config.data,a.datasets,s)},[r,a.datasets]),I.exports.useEffect(()=>{!m.current||(r?(w(),setTimeout(y)):m.current.update(d))},[r,l,a.labels,a.datasets,d]),I.exports.useEffect(()=>{!m.current||(w(),setTimeout(y))},[o]),I.exports.useEffect(()=>(y(),()=>w()),[]),_("canvas",{ref:f,role:"img",height:n,width:i,...h,children:u})}const D2=I.exports.forwardRef(A2);function M2(t,e){return qe.register(e),I.exports.forwardRef((n,i)=>_(D2,{...n,ref:i,type:t}))}const Ba=M2("bar",Oo);qe.register(li,ci,Tn,Ds,Ms,As);qe.register(li,ci,Tn,Ds,Ms,As);const lp=({closedOpportunities:t=[]})=>{const[e,n]=I.exports.useState(0),[i,r]=I.exports.useState({labels:[],datasets:[]}),[s,o]=I.exports.useState([]),a=I.exports.useRef(null);I.exports.useEffect(()=>{if(console.log("[SalesCycleChart] closedOpportunities:",t==null?void 0:t.length),t&&t.length>0){const d=[...t].sort((m,y)=>new Date(y.actualclosedate)-new Date(m.actualclosedate)).slice(0,15),h=d.map(m=>{const y=new Date(m.createdon),w=new Date(m.actualclosedate);return Math.floor((w-y)/(1e3*60*60*24))});(async()=>{const m=d.map(async(x,b)=>{const k=await fs(x.opportunityid);return{name:x.name||`Opportunity ${b+1}`,description:x.description||"",value:x.estimatedvalue||x.totalamount||0,status:x.statecode===0?"Open":x.statecode===1?"Won":"Lost",id:x.opportunityid,daysOpen:Math.floor((new Date(x.actualclosedate)-new Date(x.createdon))/864e5),url:k}}),y=await Promise.all(m),w=d.map((x,b)=>x.name?x.name.length>10?x.name.substring(0,10)+"...":x.name:`Opp ${b+1}`),p=[...h],g=d.map(x=>x.statecode===1?"rgba(93, 182, 117, 0.7)":x.statecode===2?"rgba(199, 117, 93, 0.7)":"rgba(229, 229, 229, 0.7)");o(y);const v=Math.round(h.reduce((x,b)=>x+b,0)/(h.length||1));console.log("Average closing time calculated:",v,"days"),n(v),r({labels:w,datasets:[{label:"Days to Close",data:p,backgroundColor:g,borderRadius:4,borderSkipped:!1,barThickness:10}]})})()}},[t]);const l=d=>{if(!a.current)return;const f=a.current.getElementsAtEventForMode(d.nativeEvent,"nearest",{intersect:!0},!1);if(f.length===0)return;const m=f[0].index,y=s[m];y&&y.url?window.open(y.url,"_blank"):y&&y.id&&fs(y.id).then(w=>{w&&window.open(w,"_blank")}).catch(w=>{console.error("Error generating URL:",w)})},c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(d){const h=d[0].dataIndex,f=s[h];return f?f.name:`Opportunity ${h+1}`},label:function(d){const h=d.dataIndex,f=s[h];if(!f)return`${d.raw} days`;const m=[`Days Open: ${f.daysOpen}`,`Value: $${f.value.toLocaleString()}`,`Status: ${f.status}`];return f.id&&m.push(`ID: ${f.id}`),m.push("Click to open opportunity"),m}}}},scales:{y:{beginAtZero:!0,grid:{drawBorder:!1},ticks:{font:{size:12}}},x:{grid:{display:!1},ticks:{font:{size:10},maxRotation:45,minRotation:45}}},animation:{duration:500},onHover:(d,h)=>{d.native&&(d.native.target.style.cursor=h.length?"pointer":"default")}},u={id:"averageLine",afterDraw:d=>{const h=e,f=d.ctx,m=d.scales.y,y=d.scales.x;if(m&&y){const w=m.getPixelForValue(h);f.save(),f.beginPath(),f.moveTo(y.left,w),f.lineTo(y.right,w),f.lineWidth=1,f.strokeStyle="#2684ff",f.stroke(),f.restore()}}};return _("div",{children:C("div",{style:{marginBottom:"16px",borderRadius:"8px",padding:"16px"},children:[_("div",{style:{fontSize:"14px",color:"#333",marginBottom:"16px"},children:"Sales Cycle Length - Last 15 Closed Opportunities"}),_("div",{style:{height:250,position:"relative"},children:i.datasets&&i.datasets[0]&&i.datasets[0].data&&i.datasets[0].data.length>0?_(Ba,{ref:a,data:i,options:c,plugins:[u],onClick:l}):_("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#888",fontStyle:"italic"},children:"No closed opportunity data available"})}),C("div",{style:{display:"flex",alignItems:"center",marginTop:"16px",paddingTop:"8px",borderTop:"1px solid #e0e0e0"},children:[_("div",{style:{width:"16px",height:"2px",backgroundColor:"#2684ff",marginRight:"6px"}}),C("div",{style:{fontSize:"12px",color:"#666"},children:["Average: ",e," days"]})]})]})})},cp=t=>t>=80?"#4caf50":t>=50?"#2196f3":t>=30?"#ff9800":"#f44336",I2=({closedOpportunities:t=[]})=>{const{l3mWinRate:e,l12mWinRate:n,l3mCount:i,l12mCount:r,l3mWonCount:s,l12mWonCount:o,l3mTrend:a,l12mTrend:l}=I.exports.useMemo(()=>{if(console.log("[WinRate] Number of closed opportunities:",(t==null?void 0:t.length)||0),t&&t.length>0&&console.log("[WinRate] First opportunity sample:",{actualclosedate:t[0].actualclosedate,createdon:t[0].createdon,statecode:t[0].statecode}),!t||t.length===0)return console.log("[WinRate] No closed opportunities data available"),{l3mWinRate:0,l12mWinRate:0,l3mCount:0,l12mCount:0,l3mWonCount:0,l12mWonCount:0};const u=new Date,d=new Date;d.setMonth(u.getMonth()-3);const h=new Date;h.setMonth(u.getMonth()-12),console.log("[WinRate] Date ranges:",{now:u.toISOString(),threeMonthsAgo:d.toISOString(),twelveMonthsAgo:h.toISOString()});const f=t.filter(T=>{if(!T.actualclosedate)return console.log("[WinRate] Opportunity missing actualclosedate:",T.opportunityid),!1;try{const N=new Date(T.actualclosedate);return N>=d&&N<=u}catch(N){return console.error("[WinRate] Error parsing date:",N),!1}}),m=t.filter(T=>{if(!T.actualclosedate)return!1;try{const N=new Date(T.actualclosedate);return N>=h&&N<=u}catch(N){return console.error("[WinRate] Error parsing date:",N),!1}});console.log("[WinRate] Filtered opportunities:",{l3mCount:f.length,l12mCount:m.length}),f.length>0&&console.log("[WinRate] Sample L3M opportunity statecode:",f[0].statecode,"type:",typeof f[0].statecode);const y=f.filter(T=>T.statecode===1||T.statecode==="1").length,w=f.length>0?Math.round(y/f.length*100):0,p=new Date;p.setMonth(u.getMonth()-6);const g=t.filter(T=>{if(!T.actualclosedate)return!1;try{const N=new Date(T.actualclosedate);return N>=p&&N<d}catch{return!1}}),v=g.filter(T=>T.statecode===1||T.statecode==="1").length,x=g.length>0?Math.round(v/g.length*100):0,b=w-x;console.log("[WinRate] Trend calculation:",{currentPeriod:`${y}/${f.length} = ${w}%`,previousPeriod:`${v}/${g.length} = ${x}%`,trend:b});const k=m.filter(T=>T.statecode===1||T.statecode==="1").length,P=m.length>0?Math.round(k/m.length*100):0,S=new Date;S.setMonth(u.getMonth()-24);const M=t.filter(T=>{if(!T.actualclosedate)return!1;try{const N=new Date(T.actualclosedate);return N>=S&&N<h}catch{return!1}}),O=M.filter(T=>T.statecode===1||T.statecode==="1").length,A=M.length>0?Math.round(O/M.length*100):0,z=P-A;return console.log("[WinRate] L12M Trend calculation:",{currentPeriod:`${k}/${m.length} = ${P}%`,previousPeriod:`${O}/${M.length} = ${A}%`,trend:z}),console.log("[WinRate] Calculation results:",{l3mWonCount:y,l3mWinRate:w,l12mWonCount:k,l12mWinRate:P}),{l3mWinRate:w,l12mWinRate:P,l3mCount:f.length,l12mCount:m.length,l3mWonCount:y,l12mWonCount:k,l3mTrend:b,l12mTrend:z}},[t]),c=u=>!u||u===0?_("span",{style:{fontSize:"10px",marginLeft:"4px",color:"#757575"},children:"="}):u>0?C("span",{style:{fontSize:"10px",marginLeft:"4px",color:"#4caf50"},children:["\u2191 ",u,"% from previous period"]}):C("span",{style:{fontSize:"10px",marginLeft:"4px",color:"#f44336"},children:["\u2193 ",Math.abs(u),"% from previous period"]});return C("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",justifyContent:"space-between"},children:[C("div",{style:{flex:1,backgroundColor:"#f5f5f5",borderRadius:"10px",padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[C("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[_("div",{style:{fontSize:"13px",color:"#666"},children:"L3M Win Rate"}),C("div",{style:{fontSize:"16px",fontWeight:"bold"},children:[e,"%"]})]}),_("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden",marginBottom:"4px"},children:_("div",{style:{height:"100%",width:`${Math.min(e,100)}%`,backgroundColor:cp(e),borderRadius:"2px"}})}),C("div",{style:{fontSize:"10px",color:"#666",textAlign:"right",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[_("div",{children:i>0?`Won ${s} of ${i} opportunities`:"No data in period"}),i>0&&_("div",{style:{marginTop:"2px"},children:c(a)})]})]}),C("div",{style:{flex:1,backgroundColor:"#f5f5f5",borderRadius:"10px",padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[C("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[_("div",{style:{fontSize:"13px",color:"#666"},children:"L12M Win Rate"}),C("div",{style:{fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center"},children:[n,"%"]})]}),_("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden",marginBottom:"4px"},children:_("div",{style:{height:"100%",width:`${Math.min(n,100)}%`,backgroundColor:cp(n),borderRadius:"2px"}})}),C("div",{style:{fontSize:"10px",color:"#666",textAlign:"right",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[_("div",{children:r>0?`Won ${o} of ${r} opportunities`:"No data in period"}),r>0&&_("div",{style:{marginTop:"2px"},children:c(l)})]})]})]})};let Sr=null;const j0=async()=>{if(Sr)return Sr;const t=await Wi();if(!t)throw console.error("[API] Cannot create base URL: Organization ID not found"),new Error("[API] Cannot determine organization ID. Please navigate to Dynamics CRM first.");return Sr=`https://${t}.crm.dynamics.com/api/data/v9.2`,console.log(`[API] Using Dynamics API base URL: ${Sr}`),Sr},L2=t=>{if(!t)throw console.error("[API] No token provided for API request"),new Error("[API] Authentication token missing");const e=t.startsWith("Bearer ")?t:`Bearer ${t}`;return console.log(`[API] Token format: ${e.substring(0,16)}...`),{Authorization:e,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0","Content-Type":"application/json"}},R2=async(t,e)=>{if(console.log(`[API] ${e} response status: ${t.status}`),t.status===401)throw console.error(`[API] Authentication failed (401) during ${e}`),new Error("[API] Authentication failed. Please log in again.");if(!t.ok){let n="";try{const i=await t.json();n=JSON.stringify(i)}catch{n=await t.text()}throw console.error(`[API] API error during ${e}: ${t.status} - ${n}`),new Error(`[API] Failed to ${e}: ${t.status} - ${n}`)}return await t.json()},z2=async t=>{try{const e=await j0();console.log(`[API] Fetching current user with WhoAmI endpoint: ${e}/WhoAmI`);const n=await fetch(`${e}/WhoAmI`,{method:"GET",headers:L2(t)}),i=await R2(n,"fetch current user");if(console.log("[API] WhoAmI response:",JSON.stringify(i,null,2)),!i.UserId)throw console.error("[API] UserId not found in WhoAmI response:",i),new Error("[API] User ID not found in response");return console.log(`[API] Current user ID: ${i.UserId}`),i.UserId}catch(e){throw console.error("[API] Error in getCurrentUserId:",e),e}},j2=async t=>{var e;try{const n=await j0();if(!n)throw new Error("Cannot fetch activities: Organization ID not found");const i=await z2(t);if(!i)throw new Error("Could not determine current user ID");console.log(`[API] Fetching activities for user ${i} for the last 12 months...`);const r=new Date;r.setMonth(r.getMonth()-12);const s=r.toISOString(),o=`${n}/activitypointers?$filter=_createdby_value eq ${i} and createdon ge ${s}&$select=activityid,subject,activitytypecode,createdon,scheduledstart,scheduledend&$orderby=createdon desc&$top=5000`;console.log(`[API] User activities URL: ${o}`);const a=await fetch(o,{headers:{Authorization:`${t}`,Accept:"application/json","OData-MaxVersion":"4.0","OData-Version":"4.0"}});if(a.status===401)throw console.warn("[API] Authentication token expired or invalid"),new Error("Authentication failed. Please log in again.");if(!a.ok){let c="";try{const u=await a.json();c=JSON.stringify(u)}catch{c=await a.text()}throw console.error(`[API] API Error: ${a.status}`,c),new Error(`Failed to fetch user activities: ${a.status} - ${c}`)}const l=await a.json();return console.log(`[API] Received ${((e=l.value)==null?void 0:e.length)||0} user activities`),l.value&&l.value.length>0&&console.log("[API] Sample user activity:",{id:l.value[0].activityid,type:l.value[0].activitytypecode,createdon:l.value[0].createdon}),l.value||[]}catch(n){throw console.error("[API] Error fetching user activities:",n),n}};qe.register(li,ci,Tn,Ds,Ms,As);const up=({accessToken:t})=>{const[e,n]=I.exports.useState({labels:[],datasets:[]}),[i,r]=I.exports.useState(!0),[s,o]=I.exports.useState(null);I.exports.useEffect(()=>{(async()=>{if(!t){o("No access token available"),r(!1);return}try{r(!0);const h=await j2(t),f=a(),m=c(h,f);n(m)}catch(h){console.error("Error fetching user activities:",h),o("Failed to load activity data. Please try again later.")}finally{r(!1)}})()},[t]);const a=()=>{const d=[],h=new Date,f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let m=11;m>=0;m--){const y=new Date;y.setMonth(h.getMonth()-m),d.push(`${f[y.getMonth()]} ${y.getFullYear()}`)}return d},l=d=>{var w,p,g;if(!d)return null;const h=v=>{if(!v)return null;try{const x=new Date(v);return isNaN(x.getTime())?null:x}catch(x){return console.warn("Error parsing date:",v,x),null}},f=h(d.createdon),m=h(d.scheduledstart),y=h(d.actualstart);return((w=d.activitytypecode)==null?void 0:w.toLowerCase())==="appointment"||((p=d.activitytypecode)==null?void 0:p.toLowerCase())==="meeting"?y||m||f:((g=d.activitytypecode)==null?void 0:g.toLowerCase())==="task"&&(m||y)||f},c=(d,h)=>{const f={appointment:{label:"Meetings",color:"rgba(66, 133, 244, 0.7)"},email:{label:"Emails",color:"rgba(15, 157, 88, 0.7)"},phonecall:{label:"Calls",color:"rgba(244, 180, 0, 0.7)"},task:{label:"Tasks",color:"rgba(219, 68, 55, 0.7)"}},m={};Object.keys(f).forEach(p=>{m[p]=Array(h.length).fill(0)});const y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];d.forEach(p=>{var b;const g=l(p);if(!g)return;const v=`${y[g.getMonth()]} ${g.getFullYear()}`,x=h.indexOf(v);if(x>=0){const k=(b=p.activitytypecode)==null?void 0:b.toLowerCase();m[k]&&m[k][x]++}});const w=Object.keys(f).map(p=>({label:f[p].label,data:m[p],backgroundColor:f[p].color,borderWidth:1,borderRadius:4}));return{labels:h,datasets:w}},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12,font:{size:10}}},title:{display:!0,text:"Activity Trends (Last 12 Months)",font:{size:14}}},scales:{x:{stacked:!0,grid:{display:!1},ticks:{font:{size:10}}},y:{stacked:!0,beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{precision:0,font:{size:10}}}}};return i?_("div",{style:{padding:"20px",textAlign:"center",backgroundColor:"#fff",borderRadius:"8px",height:"300px",display:"flex",alignItems:"center",justifyContent:"center"},children:_("div",{children:"Loading activity data..."})}):s?_("div",{style:{padding:"20px",textAlign:"center",backgroundColor:"#fff",color:"#d32f2f",borderRadius:"8px",border:"1px solid #ffcdd2",height:"300px",display:"flex",alignItems:"center",justifyContent:"center"},children:_("div",{children:s})}):_("div",{style:{padding:"16px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:_("div",{style:{height:"300px"},children:_(Ba,{options:u,data:e})})})};qe.register(li,ci,Tn,Ds,Ms,As);const dp=({closedOpportunities:t=[]})=>{const e=()=>{const r=[],s=new Date,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let a=11;a>=0;a--){const l=new Date;l.setMonth(s.getMonth()-a),r.push(`${o[l.getMonth()]} ${l.getFullYear()}`)}return r},n=I.exports.useMemo(()=>{if(console.log("[WonLostChart] Processing closed opportunities:",(t==null?void 0:t.length)||0),!t||t.length===0)return{labels:e(),datasets:[{label:"Won",data:Array(12).fill(0),backgroundColor:"rgba(93, 182, 117, 0.7)",borderRadius:4,stack:"stack0"},{label:"Lost",data:Array(12).fill(0),backgroundColor:"rgba(199, 117, 93, 0.7)",borderRadius:4,stack:"stack0"}]};const r=e(),s=Array(12).fill(0),o=Array(12).fill(0),a=new Date,l=new Date;l.setMonth(a.getMonth()-12);const c=t.filter(d=>{if(!d.actualclosedate)return!1;try{const h=new Date(d.actualclosedate);return h>=l&&h<=a}catch(h){return console.error("[WonLostChart] Error parsing date:",h),!1}});console.log("[WonLostChart] Opportunities in last 12 months:",c.length);const u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return c.forEach(d=>{try{const h=new Date(d.actualclosedate),f=`${u[h.getMonth()]} ${h.getFullYear()}`,m=r.indexOf(f);m>=0&&(d.statecode===1||d.statecode==="1"?s[m]++:(d.statecode===2||d.statecode==="2")&&o[m]++)}catch(h){console.error("[WonLostChart] Error processing opportunity:",h)}}),console.log("[WonLostChart] Data by month:",{won:s,lost:o}),{labels:r,datasets:[{label:"Won",data:s,backgroundColor:"rgba(93, 182, 117, 0.7)",borderRadius:4},{label:"Lost",data:o,backgroundColor:"rgba(199, 117, 93, 0.7)",borderRadius:4}]}},[t]);return _("div",{style:{padding:"16px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:_("div",{style:{height:"300px"},children:_(Ba,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12,font:{size:10}}},title:{display:!0,text:"Won/Lost Opportunities (Last 12 Months)",font:{size:14}},tooltip:{callbacks:{afterTitle:function(r){const s=r[0].dataIndex,o=n.datasets[0].data[s],a=n.datasets[1].data[s],l=o+a;return l===0?"Win rate: N/A":`Win rate: ${Math.round(o/l*100)}%`},label:function(r){let s=r.dataset.label||"";if(s&&(s+=": "),r.parsed.y!==null){s+=r.parsed.y;const o=r.dataIndex,a=n.datasets[0].data[o],l=n.datasets[1].data[o],c=a+l;c>0&&(s+=` (${Math.round(r.parsed.y/c*100)}%)`)}return s}}}},scales:{x:{grid:{display:!1},ticks:{font:{size:10}},stacked:!0},y:{beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{precision:0,font:{size:10}}}}},data:n})})})},jl=({featureName:t,children:e,fallbackMessage:n,teaseComponent:i,subscription:r,subscriptionStatus:s})=>{const[o,a]=I.exports.useState(!1),[l,c]=I.exports.useState(!0),[u,d]=I.exports.useState(null);if(I.exports.useEffect(()=>{(async()=>{try{console.log(`[FeatureGate] Checking access for ${t}`,{externalSub:r,subscriptionStatus:s});const y=r||await Gu();d(y);const w=s||y&&y.status||"free";console.log("[FeatureGate] Using status for access check:",w);const p=Hm(t,w);console.log("[FeatureGate] Access result:",p),a(p)}catch(y){console.error(`Error checking access for ${t}:`,y),a(!1)}finally{c(!1)}})()},[t,r,s]),l)return _("div",{style:{padding:"20px",textAlign:"center"},children:_("p",{children:"Loading..."})});if(console.log(`[FeatureGate] Render state for ${t}:`,{hasAccess:o,subscriptionStatus:s||u&&u.status||"unknown",loading:l}),o)return e;if(i)return C("div",{style:{position:"relative"},children:[i,_("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.7)",backdropFilter:"blur(2px)",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"13px",fontWeight:"500",color:"#333",textAlign:"center",padding:"12px"},children:"Upgrade to Pro to unlock full insights"})]});const h=n||"This feature requires a Pro subscription",f=(u==null?void 0:u.status)==="trialing";return _("div",{style:{padding:"24px",textAlign:"center",backgroundColor:"#f9f9f9",borderRadius:"8px",border:"1px solid #e0e0e0"},children:C("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[_("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"},children:_(m_,{size:24,color:"#666"})}),_("h3",{style:{margin:0,fontSize:"16px",fontWeight:"500"},children:"Pro Feature"}),_("p",{style:{margin:0,fontSize:"14px",color:"#666",maxWidth:"300px"},children:h}),f&&C("p",{style:{margin:0,fontSize:"14px",color:"#40916c",maxWidth:"300px"},children:[_(g_,{style:{marginRight:"4px",verticalAlign:"middle"}}),"You're currently in your Pro trial period"]})]})})},$l=({status:t,subscription:e})=>{const[n,i]=I.exports.useState(!1);if(!t)return null;const r=t==="pro"||t==="team";return t==="trial"?(e!=null&&e.trialDaysRemaining,C("span",{style:{padding:"6px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:"500",backgroundColor:"#e3f2fd",color:"#0277bd",display:"inline-flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap",transition:"background-color 0.2s ease",cursor:"default"},children:[_(Sl,{size:14,color:"#0277bd"}),"Trial"]})):r?C("span",{style:{padding:"6px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:"500",backgroundColor:"#fff",color:"#111",display:"inline-flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap",transition:"background-color 0.2s ease",cursor:"default"},children:[_(Sl,{size:14,color:"#21aef7"}),"Pro"]}):C("a",{href:"https://buy.stripe.com/8wMg1NaB77DG5wcfYY",target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:"500",border:"1px solid #bababa",color:"#000",backgroundColor:n?"#e3f2fd":"#fff",display:"inline-flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap",textDecoration:"none",transition:"background-color 0.2s ease",cursor:"pointer"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[_(Sl,{size:14,color:"#21aef7"}),"Upgrade"]})},$2=({opportunities:t=[],loading:e,onLogout:n,isLoggingOut:i,onOpportunitySelect:r,closedOpportunities:s=[],toggleAutoOpen:o,autoOpen:a,onFetchMyOpenOpportunities:l,accessToken:c,subscription:u})=>{const[d,h]=I.exports.useState({analytics:!0,salesCycle:!1,opportunities:!0,activities:!1,wonLost:!1}),f=y=>{h({...d,[y]:!d[y]})},m={total:t.length,closing:t.filter(y=>{const w=y.estimatedclosedate?new Date(y.estimatedclosedate):null;if(!w)return!1;const p=new Date,g=Math.ceil((w-p)/(1e3*60*60*24));return g>=0&&g<=30}).length};return s&&s.length>0&&Math.round(s.reduce((y,w)=>{const p=new Date(w.createdon),g=new Date(w.actualclosedate);return y+Math.floor((g-p)/(1e3*60*60*24))},0)/s.length),C("div",{style:{flex:1,display:"flex",flexDirection:"column",width:"100%",overflow:"hidden",height:"100%",background:"#ededed"},children:[_(Gm,{title:"Lens",showBackButton:!1,onLogout:n,isLoggingOut:i,onFetchMyOpenOpportunities:l,subscription:u}),C("div",{style:{flex:1,overflowY:"auto",paddingTop:"8px"},children:[_("div",{style:{padding:"12px 16px 0px 16px"},children:C(zt,{title:"Portfolio Analytics",isOpen:d.analytics,onToggle:()=>f("analytics"),children:[C("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",justifyContent:"space-between"},children:[C("div",{style:{flex:1,padding:"8px 12px",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f5f5f5",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[_("div",{style:{fontSize:"13px",color:"#666"},children:"Open Opportunities"}),_("div",{style:{fontSize:"20px",fontWeight:"bold",marginLeft:"10px"},children:m.total})]}),C("div",{style:{flex:1,padding:"8px 12px",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f5f5f5",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[_("div",{style:{fontSize:"13px",color:"#666"},children:"Closing in 30 Days"}),_("div",{style:{fontSize:"20px",fontWeight:"bold",marginLeft:"10px"},children:m.closing})]})]}),_(I2,{closedOpportunities:s})]})}),_("div",{style:{padding:"12px 16px 0px 16px"},children:_(zt,{title:"Win/Loss Distribution",rightElement:(u==null?void 0:u.status)&&_($l,{status:u.status}),isOpen:d.wonLost,onToggle:()=>f("wonLost"),children:_(jl,{featureName:"winLossCharts",fallbackMessage:"Win/Loss Chart is not available with your subscription plan.",teaseComponent:_(dp,{closedOpportunities:s.slice(0,3)}),subscription:u,children:_(dp,{closedOpportunities:s})})})}),_("div",{style:{padding:"12px 16px 0px 16px"},children:_(zt,{title:"Sales Cycle Length",rightElement:(u==null?void 0:u.status)&&_($l,{status:u.status}),isOpen:d.salesCycle,onToggle:()=>f("salesCycle"),children:_(jl,{featureName:"salesCycleAnalytics",fallbackMessage:"Sales Cycle Length analysis is not available with your subscription plan.",teaseComponent:_(lp,{closedOpportunities:s.slice(0,3)}),subscription:u,children:_(lp,{closedOpportunities:s})})})}),_("div",{style:{padding:"12px 16px 0px 16px"},children:_(zt,{title:"Activity Trends",rightElement:(u==null?void 0:u.status)&&_($l,{status:u.status}),isOpen:d.activities,onToggle:()=>f("activities"),children:_(jl,{featureName:"fullActivityTrends",fallbackMessage:"Full activity insights are not available with your current plan.",teaseComponent:_(up,{accessToken:c,limited:!0}),subscription:u,children:_(up,{accessToken:c})})})}),_("div",{style:{padding:"12px 16px 0px 16px"},children:_(zt,{title:`My Open Opportunities (${t.length})`,isOpen:d.opportunities,onToggle:()=>f("opportunities"),children:e?_("div",{style:{textAlign:"center",padding:"20px"},children:_("p",{children:"Loading..."})}):t.length===0?_("p",{children:"No opportunities found."}):_("div",{children:t.map(y=>_(j_,{opportunity:y,onClick:()=>r(y.opportunityid)},y.opportunityid))})})})]}),_("div",{style:{padding:"12px 16px",fontSize:"13px",borderTop:"1px solid #e0e0e0",backgroundColor:"white",marginTop:"auto"},children:C("label",{style:{display:"flex",alignItems:"center"},children:[_("input",{type:"checkbox",checked:a,onChange:o,style:{marginRight:"8px"}}),"Auto-open when visiting Dynamics CRM"]})})]})},F2=({activities:t=[],opportunity:e={},closedOpportunities:n=[],isOpen:i,onToggle:r,subscription:s})=>{var y;const[o,a]=I.exports.useState({ratio:0,wins:0,total:0,percentChange:0}),l=I_(t),c=e.createdon?Hi(e.createdon,new Date):0,u=e.estimatedclosedate?Hi(new Date,e.estimatedclosedate):null,d=((y=L_(t))==null?void 0:y.days)||0,h=e.closeprobability||0;I.exports.useEffect(()=>{const w=()=>{const g=e==null?void 0:e._customerid_value;if(console.log("[statistics] Current opportunity:",e),console.log("[statistics] Account ID from opportunity:",g),console.log("[statistics] Closed opportunities count:",n.length),n.length>0&&(console.log("[statistics] First closed opportunity sample:",n[0]),console.log("[statistics] All properties of first closed opportunity:"),Object.keys(n[0]).forEach(S=>{console.log(`${S}: ${n[0][S]}`)})),!g||!n.length){console.log("[statistics] Skipping calculation: Missing account ID or closed opportunities");return}const v=g.trim().toLowerCase();console.log("[statistics] Normalized account ID:",v);const x=n.filter(S=>{const M=S._customerid_value||S.customerid_value||S.parentaccountid,O=M?M.trim().toLowerCase():"",A=O===v,z=O.includes(v)||v.includes(O);return console.log("[statistics] Comparing account IDs:",{current:v,"closed opp":O,"exact match":A,"partial match":z}),A});console.log("[statistics] Filtered opportunities for account:",x.length),x.length===0&&(console.log("[statistics] No matches found. Trying alternate approach with more flexible matching..."),console.log("[statistics] All closed opportunity account IDs:"),n.forEach((S,M)=>{const O=Object.keys(S),A=O.filter(z=>z.toLowerCase().includes("customer")||z.toLowerCase().includes("account"));console.log(`Opp ${M}:`,{ID:S.opportunityid,Name:S.name,"All Keys":O,"Possible Account Keys":A,"Values of Possible Account Keys":A.map(z=>`${z}: ${S[z]}`),State:S.statecode})}));const b=x.filter(S=>(console.log("[statistics] Checking win status:",{"opp.statecode":S.statecode,isWon:S.statecode===1}),S.statecode===1)).length,k=x.length,P=k>0?Math.round(b/k*100):0;console.log("[statistics] Win/Loss calculation result:",{ratio:P,wins:b,total:k}),a({ratio:P,wins:b,total:k,percentChange:50})};w();const p=setTimeout(()=>{o.total===0&&(e==null?void 0:e._customerid_value)&&(console.log("[statistics] Retry calculation after delay"),w())},1e3);return()=>clearTimeout(p)},[e,n]);const f=({label:w,value:p,unit:g="",progressColor:v="#4caf50",progressPercent:x=50})=>C("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[C("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[_("div",{style:{fontSize:"13px",color:"#666"},children:w}),C("div",{style:{fontSize:"20px",fontWeight:"bold"},children:[p,g]})]}),_("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden"},children:_("div",{style:{height:"100%",width:`${Math.min(x,100)}%`,backgroundColor:v,borderRadius:"2px"}})})]}),m=({status:w})=>_("div",{style:{backgroundColor:w==="pro"?"#f0f8ff":"#f5f5f5",color:w==="pro"?"#0078d4":"#666",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase"},children:w});return C(zt,{title:"Statistics",rightElement:(s==null?void 0:s.status)&&_(m,{status:s.status}),isOpen:i,onToggle:r,children:[C("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"16px"},children:[_(f,{label:"Open days",value:c,progressColor:"#2196f3",progressPercent:Math.min(c/90*100,100)}),_(f,{label:"Days to close",value:u!==null?u:"\u2014",progressColor:"#4caf50",progressPercent:u?Math.max(100-u/30*100,0):0}),_(f,{label:"Days since activity",value:d,progressColor:d>14?"#f44336":d>7?"#ff9800":"#4caf50",progressPercent:Math.min(d/30*100,100)}),_(f,{label:"Probability",value:h,unit:"%",progressColor:"#9c27b0",progressPercent:h})]}),C("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"12px 16px",marginBottom:"24px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[C("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[_("div",{style:{fontSize:"13px",color:"#666"},children:"Account Win Rate"}),C("div",{style:{fontSize:"20px",fontWeight:"bold"},children:[o.ratio,"%"]})]}),C("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:["Won ",o.wins," of ",o.total," opportunities"]}),_("div",{style:{height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",overflow:"hidden",marginTop:"8px"},children:_("div",{style:{height:"100%",width:`${o.ratio}%`,backgroundColor:"#ff9800",borderRadius:"2px"}})})]}),C("div",{children:[_("h4",{style:{fontSize:"13px",fontWeight:"600",marginTop:"0",marginBottom:"16px",color:"#32325d"},children:"Activity Summary"}),t&&t.length>0?_("div",{children:l.map((w,p)=>C("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[_("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px",fontSize:"16px"},children:w.icon}),C("div",{style:{flex:1},children:[w.count," ",M_(w.label,w.count)]})]},p))}):_("p",{children:"No activities recorded yet."})]})]})},N2=({activities:t=[],isOpen:e,onToggle:n})=>{const[i,r]=I.exports.useState(null),[s,o]=I.exports.useState(new Date().getMonth()),[a,l]=I.exports.useState(new Date().getFullYear()),c=d=>{let h=s,f=a;d==="next"?(h++,h>11&&(h=0,f++)):(h--,h<0&&(h=11,f--)),o(h),l(f)},u=(d,h,f)=>!i||!f?!1:i.getDate()===f&&i.getMonth()===h&&i.getFullYear()===d;return C(zt,{title:"Activities",isOpen:e,onToggle:n,children:[C("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px",alignItems:"center"},children:[_("button",{onClick:()=>c("prev"),style:{border:"none",background:"none",cursor:"pointer",fontSize:"16px"},children:"\u25C0"}),C("h4",{style:{margin:"0"},children:[D_[s]," ",a]}),_("button",{onClick:()=>c("next"),style:{border:"none",background:"none",cursor:"pointer",fontSize:"16px"},children:"\u25B6"})]}),C("div",{children:[_("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",textAlign:"center",fontSize:"12px",color:"#666",marginBottom:"8px"},children:A_.map(d=>_("div",{children:d},d))}),z_(a,s,t).map((d,h)=>_("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"4px"},children:d.map((f,m)=>{const y=u(a,s,f==null?void 0:f.day);return C("div",{style:{height:"30px",textAlign:"center",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"14px",border:f!=null&&f.isToday?"2px solid #ff8f6b":"none",backgroundColor:y?"#ff8f6b":"transparent",color:y?"white":f!=null&&f.isToday?"#1f2223":f!=null&&f.day?"black":"#ccc",cursor:(f==null?void 0:f.activities.length)>0?"pointer":"default",boxSizing:"border-box",fontWeight:y?"bold":"normal"},onClick:()=>(f==null?void 0:f.activities.length)>0&&r(new Date(a,s,f.day)),children:[f==null?void 0:f.day,(f==null?void 0:f.activities.length)>0&&_("span",{style:{position:"absolute",bottom:"-2px",width:"6px",height:"6px",borderRadius:"50%",border:"1px solid #1f2223",backgroundColor:y?"white":"#ff8f6b"}})]},m)})},h))]}),i&&C("div",{style:{marginTop:"16px"},children:[C("h4",{style:{margin:"0 0 12px 0"},children:["Activities on ",i.toLocaleDateString(),":"]}),t.filter(d=>{const h=new Date(d.createdon);return h?h.getDate()===i.getDate()&&h.getMonth()===i.getMonth()&&h.getFullYear()===i.getFullYear():!1}).map(d=>C("div",{style:{padding:"8px",borderLeft:`4px solid ${Jm(d.activitytypecode)}`,backgroundColor:"#f5f5f5",marginBottom:"8px",borderRadius:"4px"},children:[_("div",{style:{fontWeight:"bold"},children:d.subject}),C("div",{style:{fontSize:"12px",verticalAlign:"middle"},children:[Ju(sa(d.activitytypecode))," ",sa(d.activitytypecode)]}),_("div",{style:{fontSize:"12px",color:"#666"},children:new Date(d.createdon).toLocaleTimeString()})]},d.activityid)),_("button",{onClick:()=>r(null),style:{border:"none",background:"none",color:"#0078d4",cursor:"pointer",padding:"4px 0",textDecoration:"underline",fontSize:"13px"},children:"Clear selection"})]})]})};qe.register(li,ci,Tn,Ds,Ms,As);const U2=({activities:t=[],closedOpportunities:e=[],opportunity:n,isOpen:i,onToggle:r})=>{const[s,o]=I.exports.useState(0),[a,l]=I.exports.useState({labels:[],datasets:[]}),[c,u]=I.exports.useState(0),[d,h]=I.exports.useState([]),f=I.exports.useRef(null);I.exports.useEffect(()=>{if(n&&n.createdon){const p=Hi(n.createdon,new Date);u(p)}},[n]),I.exports.useEffect(()=>{if(e&&e.length>0){const p=[...e].sort((x,b)=>new Date(b.actualclosedate)-new Date(x.actualclosedate)).slice(0,10),g=p.map(x=>{const b=new Date(x.createdon),k=new Date(x.actualclosedate);return Math.floor((k-b)/(1e3*60*60*24))});(async()=>{const x=p.map(async(A,z)=>{const T=await fs(A.opportunityid);return{name:A.name||"Unnamed Opportunity",description:A.description||"",value:A.estimatedvalue||A.totalamount||0,status:A.statecode===0?"Open":A.statecode===1?"Won":"Lost",daysOpen:Math.floor((new Date(A.actualclosedate)-new Date(A.createdon))/864e5),url:T,id:A.opportunityid}}),b=await Promise.all(x),k=p.map((A,z)=>A.name?A.name.length>10?A.name.substring(0,10)+"...":A.name:`Opp ${z+1}`),P=[...g],S=p.map(A=>A.statecode===1?"rgba(93, 182, 117, 0.7)":"rgba(199, 117, 93, 0.7)");let M=[...b];if(n&&n.createdon){k.unshift("Current"),P.unshift(c),S.unshift("rgba(92, 92, 92, 0.7)");const A=await fs(n.opportunityid);M.unshift({name:n.name||"Current Opportunity",description:n.description||"",value:n.estimatedvalue||0,status:"Open",daysOpen:c,url:A,id:n.opportunityid})}h(M);const O=Math.round(g.reduce((A,z)=>A+z,0)/(g.length||1));o(O),l({labels:k,datasets:[{label:"Days",data:P,backgroundColor:S,borderWidth:0,borderRadius:4,borderSkipped:!1,barThickness:10,maxBarThickness:25}]})})()}},[e,n,c]);const m=p=>{if(!f.current)return;const v=f.current.getElementsAtEventForMode(p.nativeEvent,"nearest",{intersect:!0},!1);if(v.length===0)return;const x=v[0].index,b=d[x];b&&b.id&&chrome.runtime.sendMessage({type:"NAVIGATE_TO_OPPORTUNITY",opportunityId:b.id})},y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(p){const g=p[0].dataIndex,v=d[g];return v?v.name:`Opportunity ${g+1}`},label:function(p){const g=p.dataIndex,v=d[g];if(!v)return`${p.raw} days`;const x=[`Days Open: ${v.daysOpen}`,`Value: ${v.value.toLocaleString()}`,`Status: ${v.status}`];return x.push("Click to navigate to opportunity"),x}}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:11},padding:5,color:"#666"},border:{display:!1}},x:{grid:{display:!1},ticks:{font:{size:10},color:"#666",maxRotation:45,minRotation:45},border:{display:!1}}},animation:{duration:500},onHover:(p,g)=>{p.native&&(p.native.target.style.cursor=g.length?"pointer":"default")}},w={id:"averageLine",afterDraw:p=>{const g=s,v=p.ctx,x=p.scales.y,b=p.scales.x;if(x&&b){const k=x.getPixelForValue(g);v.save(),v.beginPath(),v.moveTo(b.left,k),v.lineTo(b.right,k),v.lineWidth=1,v.strokeStyle="#2196f3",v.stroke(),v.restore()}}};return _(zt,{title:"Sales Cycle",isOpen:i,onToggle:r,children:C("div",{style:{padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[_("div",{style:{fontSize:"14px",fontWeight:"600",color:"#333",marginBottom:"16px"},children:"Sales Cycle Length - Last 10 Closed Opportunities"}),_("div",{style:{height:280,position:"relative"},children:a.datasets&&a.datasets[0]&&a.datasets[0].data&&a.datasets[0].data.length>0?_(Ba,{ref:f,data:a,options:y,plugins:[w],onClick:m}):_("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#888",fontStyle:"italic"},children:"No closed opportunity data available"})}),_("div",{style:{display:"flex",alignItems:"center",marginTop:"16px",paddingTop:"8px",paddingBottom:"8px",borderTop:"1px solid #e0e0e0"},children:C("div",{style:{display:"flex",alignItems:"center"},children:[_("div",{style:{width:"16px",height:"2px",backgroundColor:"#2196f3",marginRight:"6px"}}),C("div",{style:{fontSize:"12px",color:"#666"},children:["Average: ",s," days"]})]})})]})})},B2=({activities:t=[],isOpen:e,onToggle:n})=>{console.log("TimelineLog received activities:",t);const i=()=>{const r={};return t.forEach(o=>{const a=ps(o);if(!a)return;const l=a.toLocaleDateString();r[l]||(r[l]=[]),r[l].push(o)}),{sortedDates:Object.keys(r).sort((o,a)=>new Date(a)-new Date(o)),groupedActivities:r}};return _(zt,{title:"Timeline Log",isOpen:e,onToggle:n,children:t&&t.length>0?_("div",{className:"enhanced-timeline",children:(()=>{const{sortedDates:r,groupedActivities:s}=i();return r.map((o,a)=>{const l=s[o];return C("div",{className:"timeline-date-group",children:[C("div",{style:{padding:"8px 12px",marginBottom:"12px",backgroundColor:"#f5f5f5",borderRadius:"4px",fontWeight:"bold",display:"inline-block"},children:[o," (",l.length," ",l.length===1?"activity":"activities",")"]}),_("div",{style:{position:"relative"},children:l.map(c=>{const u=sa(c.activitytypecode);return Jm(c.activitytypecode),_("div",{style:{position:"relative",marginBottom:"16px",paddingLeft:"22px",zIndex:2},children:C("div",{style:{backgroundColor:"#f9f9f9",borderLeft:"1px solid rgba(155, 155, 155, 0.28)",borderRadius:"4px",padding:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"default"},onMouseEnter:d=>{d.currentTarget.style.transform="translateY(-2px)",d.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)",d.currentTarget.style.borderLeft="1px solidrgb(155, 155, 155)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateY(0)",d.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.08)",d.currentTarget.style.borderLeft="1px solid rgba(155, 155, 155, 0.28)"},children:[C("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[C("div",{children:[_("div",{style:{fontWeight:"400",marginBottom:"4px",fontSize:"12px"},children:c.subject||u}),C("div",{style:{display:"flex",alignItems:"center",color:"#666",fontSize:"12px",marginBottom:"8px"},children:[Ju(u),_("span",{style:{marginLeft:"6px"},children:u})]})]}),_("div",{style:{color:"#888",fontSize:"10px",whiteSpace:"nowrap"},children:new Date(ps(c)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),c.description&&_("div",{style:{marginTop:"8px",fontSize:"14px",color:"#444",borderTop:"1px solid #eee",paddingTop:"8px"},children:c.description})]})},c.activityid)})})]},o)})})()}):_("p",{children:"No activities in the timeline."})})},W2=({opportunity:t,isOpen:e,onToggle:n})=>{const[i,r]=I.exports.useState("");return I.exports.useEffect(()=>{async function s(){if(t&&t.opportunityid)try{const o=await fs(t.opportunityid);r(o)}catch(o){console.error("Error generating Dynamics URL:",o),r("")}}s()},[t]),_(zt,{title:"Basic Info",isOpen:e,onToggle:n,children:C("div",{style:{marginBottom:"16px",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",padding:"16px"},children:[_("h3",{style:{margin:"0 0 12px 0",fontSize:"16px"},children:"Opportunity Details"}),C("div",{style:{marginBottom:"8px"},children:[_("strong",{children:"ID:"})," ",t.opportunityid]}),t.customerid_account&&C("div",{style:{marginBottom:"8px"},children:[_("strong",{children:"Customer:"})," ",t.customerid_account.name]}),t.estimatedvalue&&C("div",{style:{marginBottom:"8px"},children:[_("strong",{children:"Estimated Value:"})," $",t.estimatedvalue.toLocaleString()]}),t.statecode!==void 0&&C("div",{style:{marginBottom:"8px"},children:[_("strong",{children:"Status:"})," ",t.statecode===0?"Open":"Closed"]}),t.createdon&&C("div",{style:{marginBottom:"8px"},children:[_("strong",{children:"Created on:"})," ",new Date(t.createdon).toLocaleDateString()]}),t.estimatedclosedate&&C("div",{style:{marginBottom:"8px"},children:[_("strong",{children:"Est. Close Date:"})," ",new Date(t.estimatedclosedate).toLocaleDateString()]}),t.actualclosedate&&C("div",{style:{marginBottom:"8px"},children:[_("strong",{children:"Actual Close Date:"})," ",new Date(t.actualclosedate).toLocaleDateString()]}),_("div",{style:{marginTop:"16px"},children:i?_("a",{href:i,target:"_blank",rel:"noopener noreferrer",style:{color:"#0078d4",textDecoration:"none"},children:"Open in Dynamics \u2192"}):_("span",{style:{color:"#999",fontSize:"14px"},children:"Dynamics URL not available"})})]})})},H2=({opportunity:t,activities:e,closedOpportunities:n=[],onBackClick:i,onLogout:r,isLoggingOut:s,toggleAutoOpen:o,autoOpen:a,subscription:l})=>{const[c,u]=I.exports.useState({statistics:!0,entries:!0,analytics:!0,basicInfo:!1,timeline:!1}),d=h=>{u({...c,[h]:!c[h]})};return C("div",{style:{flex:1,display:"flex",flexDirection:"column",width:"100%",overflow:"auto",backgroundColor:"#ededed"},children:[_(Gm,{title:"Lens",showBackButton:!0,onBackClick:i,onLogout:r,isLoggingOut:s,subscription:l}),C("div",{children:[_("h4",{style:{padding:"0px 16px 0px 16px",display:"flex",color:"#1f2223",fontSize:"14px",marginBottom:"2px"},children:t.name}),t.createdon&&C("div",{style:{marginBottom:"8px",padding:"2px 16px",display:"flex",alignItems:"center",fontWeight:"500",color:"#5f646a"},children:[_("p",{children:"Created on:\xA0"})," ",new Date(t.createdon).toLocaleDateString()]})]}),C("div",{style:{flex:1,overflow:"auto",padding:"0 16px 16px 16px"},children:[_(F2,{activities:e,opportunity:t,closedOpportunities:n,isOpen:c.statistics,onToggle:()=>d("statistics")}),_(U2,{activities:e,closedOpportunities:n,opportunity:t,isOpen:c.analytics,onToggle:()=>d("analytics")}),_(N2,{activities:e,isOpen:c.entries,onToggle:()=>d("entries")}),_(B2,{activities:e,isOpen:c.timeline,onToggle:()=>d("timeline")}),_(W2,{opportunity:t,isOpen:c.basicInfo,onToggle:()=>d("basicInfo")})]}),_("div",{style:{padding:"12px 16px",fontSize:"13px",borderTop:"1px solid #e0e0e0",backgroundColor:"white"},children:C("label",{style:{display:"flex",alignItems:"center"},children:[_("input",{type:"checkbox",checked:a,onChange:o,style:{marginRight:"8px"}}),"Auto-open when visiting Dynamics CRM"]})})]})},V2=()=>{const[t,e]=I.exports.useState(null),[n,i]=I.exports.useState(null),[r,s]=I.exports.useState({status:"free",isActive:!0}),[o,a]=I.exports.useState([]),[l,c]=I.exports.useState(null),[u,d]=I.exports.useState(null),[h,f]=I.exports.useState([]),[m,y]=I.exports.useState([]),w=I.exports.useRef(null),[p,g]=I.exports.useState(!1),[v,x]=I.exports.useState(null),[b,k]=I.exports.useState(!0),[P,S]=I.exports.useState(null),[M,O]=I.exports.useState(null),[A,z]=I.exports.useState(!1),T=I.exports.useRef(!1),N=I.exports.useRef(null),X=I.exports.useRef(null),ae=async()=>{try{const{user:R}=await chrome.storage.local.get(["user"]);if(!R||!R.email){console.warn("[Popup] No user in storage, defaulting to free tier"),s({status:"free",isActive:!0});return}console.log("[Popup] Initializing subscription for email:",R.email);const $=await Gu();s($),chrome.storage.local.set({subscriptionStatus:$.status,subscriptionEndDate:$.endDate})}catch(R){console.error("Error initializing subscriptions:",R),s({status:"free",isActive:!0})}},ye=async(R,$)=>{try{if(console.log("[Popup.jsx] handleFetchOpportunityDetails called for opportunity:",$),!R){console.error("[Popup.jsx] No token provided to handleFetchOpportunityDetails"),x("Authentication required");return}if(!$){console.error("[Popup.jsx] No opportunity ID provided to handleFetchOpportunityDetails"),x("No opportunity ID available");return}if(T.current){console.log("[Popup.jsx] State transition in progress, deferring opportunity details fetch");return}if(T.current=!0,g(!0),w.current===$){console.log("[Popup] Skipping re-fetch \u2014 already fetched:",$),T.current=!1,g(!1);return}if((u==null?void 0:u.opportunityid)===$){console.log("[Popup] Already displaying this opportunity, skipping update");return}try{if(!await jh()){console.log("[Popup.jsx] Token invalid or expired, clearing token state"),e(null),i(null),x("Your session has expired. Please log in again.");return}try{console.log("[Popup.jsx] Calling fetchOpportunityDetails for ID:",$),await Fh(R,$,te=>g(te),x,d,f),console.log("[Popup.jsx] Successfully loaded opportunity details"),D(R).catch(te=>{console.warn("[Popup.jsx] Error fetching closed opportunities:",te)})}catch(te){te.message&&(te.message.includes("Authentication failed")||te.message.includes("401"))?(console.error("[Popup.jsx] Authentication failed during API call:",te),await qx(g,e,a,d,f,i,x)):(console.error("[Popup.jsx] Error fetching opportunity details:",te),x(`Failed to fetch opportunity details: ${te.message}`),d(null))}}catch(Te){console.error("[Popup.jsx] Error checking login status:",Te),x("Failed to verify authentication status. Please try again."),d(null)}finally{g(!1),T.current=!1}}catch(Te){console.error("[Popup.jsx] General error in handleFetchOpportunityDetails:",Te),x("An unexpected error occurred"),g(!1),T.current=!1,d(null)}};I.exports.useEffect(()=>{async function R(){try{if(T.current){console.log("[Popup] Initialization already in progress, skipping");return}T.current=!0;try{const W=await Ex();W.connected||console.warn("Supabase connection issue:",W.error)}catch(W){console.warn("Error checking Supabase connection:",W)}chrome.runtime.sendMessage({type:"POPUP_OPENED"}),x(null),S(null);try{const W=await Wi();if(O(W),W&&chrome.storage.local.set({organizationId:W}),!W){await new Promise(Fe=>setTimeout(Fe,500));const gi=await Wi();if(O(gi),!gi){x("Please navigate to your Dynamics CRM environment first to use this extension."),T.current=!1;return}}}catch(W){console.warn("Error getting organization ID:",W),x("Could not determine your Dynamics CRM organization. Please navigate to Dynamics CRM first."),T.current=!1;return}if(await jh()){const{accessToken:W}=await chrome.storage.local.get(["accessToken"]);e(W);const gi=await Yx();i(gi);try{await ae()}catch(Fe){console.warn("Error initializing subscriptions, continuing with free tier:",Fe),s({status:"free",isActive:!0})}console.log("[Popup.jsx] Got access token:",W?"yes":"no");try{const Fe=await Qx();console.log("[Popup.jsx] Current opportunity ID:",Fe),Fe?(console.log("[Popup.jsx] Setting initial opportunity ID:",Fe),c(Fe)):await j(W),Fe?(d({opportunityid:Fe,name:"Loading...",loading:!0}),console.log("[Popup.jsx] Fetching initial opportunity details:",Fe),setTimeout(async()=>{try{await Fh(W,Fe,Wa=>g(Wa),x,d,f),N.current=Fe,console.log("[Popup.jsx] Initial opportunity details loaded successfully")}catch(Wa){console.error("[Popup.jsx] Error loading initial opportunity:",Wa),d(null),c(null),await j(W)}},100)):await j(W),await D(W)}catch(Fe){console.warn("Error getting opportunity ID:",Fe),await j(W),await D(W)}}else console.log("[Popup.jsx] No valid login found, user needs to log in.");chrome.storage.local.get(["autoOpen"],W=>{k(W.autoOpen!==!1)})}catch(te){console.error("Initialization error:",te),x("Failed to initialize extension: "+te.message),S({errorType:"Initialization Error",message:te.message,timestamp:new Date().toISOString()})}finally{T.current=!1}}R();const $=setInterval(()=>{T.current||chrome.storage.local.get(["currentOpportunityId","lastUpdated","currentOrgId"],te=>{if(!te.currentOpportunityId&&(l||N.current)){if(console.log("[Popup.jsx] Opportunity ID cleared in storage"),T.current)return;T.current=!0,c(null),d(null),N.current=null,t&&setTimeout(async()=>{try{await j(t)}catch(gi){console.error("[Popup.jsx] Error refetching opportunities:",gi)}finally{T.current=!1}},500);return}})},2e3),Te=te=>{if(console.log("[Popup.jsx] Popup received message:",te.type),T.current){console.log("[Popup.jsx] State transition lock active, skipping message");return}if(te.type==="OPPORTUNITY_DETECTED"){console.log("[Popup.jsx] Opportunity detected message received");const W=te.opportunityId;W&&W!==l&&W!==N.current&&!T.current&&(console.log("[Popup.jsx] Setting currentOpportunityId from OPPORTUNITY_DETECTED:",W),c(W))}if(te.type==="OPPORTUNITY_CLEARED"){if(console.log("[Popup.jsx] Opportunity cleared notification received"),!l&&!u){console.log("[Popup.jsx] Already in list view, skipping refresh");return}T.current=!0,c(null),d(null),N.current=null,setTimeout(async()=>{try{await j(t)}catch(W){console.error("[Popup.jsx] Error refetching opportunities:",W)}finally{T.current=!1}},300)}};return chrome.runtime.onMessage.addListener(Te),()=>{chrome.runtime.onMessage.removeListener(Te),clearInterval($),X.current&&clearTimeout(X.current)}},[t,M,l,JSON.stringify(n),JSON.stringify(r)]),I.exports.useEffect(()=>{document.title="Lens";const R=document.documentElement.style;R.setProperty("width","100%"),R.setProperty("height","100%"),R.setProperty("overflow","hidden"),document.body.style.margin="0",document.body.style.padding="0",document.body.style.height="100%",document.body.style.overflow="auto";const $=document.getElementById("root");$&&($.style.height="100%",$.style.overflow="auto")},[]);const D=async R=>{try{console.log("BEFORE: Fetching closed opportunities..."),await Xx(R,g,x,y),setTimeout(()=>{console.log("AFTER: Closed opportunities fetched:",m.length)},100)}catch($){console.error("Error fetching closed opportunities:",$)}},j=async(R,$=null)=>{try{if(T.current){console.log("[Popup.jsx] State transition in progress, deferring opportunities fetch");return}T.current=!0,await Nh(R,g,x,a,S)}catch(Te){console.error("Error fetching opportunities:",Te),x(`Failed to fetch opportunities list: ${Te.message}`)}finally{T.current=!1}},F=async()=>{try{if(T.current){console.log("[Popup.jsx] State transition in progress, deferring refresh");return}T.current=!0,g(!0),l&&u?await ye(t,l):await Nh(t,g,x,a,S),await D(t),console.log("[Popup.jsx] Refresh completed successfully")}catch(R){console.error("Error during refresh:",R),x(`Failed to refresh data: ${R.message}`)}finally{T.current=!1,g(!1)}},Z=async()=>{var R;try{if(T.current){console.log("[Popup.jsx] State transition in progress, deferring login");return}if(T.current=!0,!M){const $=await Wi();if(!$){x("Please navigate to your Dynamics CRM environment first to use this extension."),T.current=!1;return}O($)}x(null),g(!0);try{const $=await Kx();if(!$.success)throw new Error(((R=$.error)==null?void 0:R.message)||"Login failed");console.log("[Popup.jsx] Login successful, got token"),e($.token),$.user?(i($.user),await ae($.user)):console.warn("[Popup.jsx] No user data in login result"),N.current?ye($.token,N.current):(j($.token),D($.token))}catch($){$.message&&$.message.includes("did not approve")?(console.log("[Popup.jsx] User cancelled the login dialog"),x("Authentication cancelled. Please try again.")):(console.error("Login failed:",$),x(`Login failed: ${$.message}`))}finally{g(!1)}}catch($){console.error("Login preparation error:",$),x(`Login preparation failed: ${$.message}`),g(!1)}finally{T.current=!1}},ee=async R=>{try{console.log("[Popup.jsx] Navigating to opportunity:",R);const $=await chrome.tabs.query({url:"*://*.crm.dynamics.com/*"});if(!$||$.length===0){x("No Dynamics CRM tab found");return}const Te=$[0],W=`${Te.url.match(/(https:\/\/[^\/]+)/)[1]}/main.aspx?etn=opportunity&pagetype=entityrecord&id=${R}`;console.log("[Popup.jsx] Navigating CRM tab to:",W),await chrome.tabs.update(Te.id,{url:W,active:!0})}catch($){console.error("[Popup.jsx] Error navigating to opportunity:",$),x(`Could not navigate to opportunity: ${$.message}`)}},et=async()=>{if(T.current){console.log("[Popup.jsx] State transition or logout in progress, deferring logout");return}T.current=!0,z(!0);try{await chrome.storage.local.remove(["accessToken","expirationTime","user","subscription","currentOpportunityId","lastUpdated"]),c(null),d(null),a([]),f([]),y([]),N.current=null,e(null),i(null),x(null),console.log("[Popup.jsx] Logout successful - all state cleared")}catch(R){console.error("Unexpected error during logout:",R),x(`An unexpected error occurred during logout: ${R.message}`)}finally{T.current=!1,z(!1)}},Ee=async()=>{try{console.log("[Popup.jsx] Navigating back to opportunities list");const R=await chrome.tabs.query({url:"*://*.crm.dynamics.com/*"});if(!R||R.length===0){x("No Dynamics CRM tab found");return}const $=R[0],te=`${$.url.match(/(https:\/\/[^\/]+)/)[1]}/main.aspx?pagetype=entitylist&etn=opportunity&viewid=00000000-0000-0000-00AA-000010001003&viewtype=1039`;console.log("[Popup.jsx] Navigating CRM tab to:",te),await chrome.tabs.update($.id,{url:te,active:!0}),T.current=!0,await chrome.storage.local.remove(["currentOpportunityId","lastUpdated"]),d(null),c(null),N.current=null,setTimeout(async()=>{try{await j(t),await D(t)}catch(W){console.error("[Popup.jsx] Error refreshing opportunities after back:",W)}finally{T.current=!1}},500)}catch(R){console.error("[Popup.jsx] Error navigating to opportunities list:",R),x(`Could not navigate to opportunities list: ${R.message}`),T.current=!1}},ut=()=>{const R=!b;k(R),chrome.storage.local.set({autoOpen:R}),chrome.runtime.sendMessage({type:"SET_AUTO_OPEN",enabled:R})},_e=R=>Hm(R,(r==null?void 0:r.status)||"free");return C("div",{style:{padding:"0",fontFamily:"Arial, sans-serif",height:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#ededed"},children:[_(o_,{message:v,onDismiss:()=>x(null)}),(()=>{try{return console.log("[Popup] RENDER DECISION:",{accessToken:!!t,currentOpportunityId:l,hasCurrentOpportunity:!!u,opportunityIdMatch:(u==null?void 0:u.opportunityid)===l,loading:p,stateTransitionLock:T.current}),console.log("[Popup] RENDER CONTENT DEBUG:"),console.log("[Popup] Organization ID:",M),console.log("[Popup] Access Token:",!!t),console.log("[Popup] User:",(n==null?void 0:n.email)||"not logged in"),console.log("[Popup] Subscription:",(r==null?void 0:r.status)||"none"),console.log("[Popup] Current Opportunity:",u?u.opportunityid:"none"),console.log("[Popup] Current Opportunity ID:",l),console.log("[Popup] State Transition Lock:",T.current),console.log("[Popup] Last Opportunity ID Ref:",N.current),console.log("[Popup] Opportunities Count:",o.length),console.log("[Popup] Closed Opportunities Count:",m.length),M?t?l&&u&&u.opportunityid===l?(console.log("[Popup] Rendering opportunity detail view for:",l),_(H2,{opportunity:u,activities:h||[],closedOpportunities:m||[],onBackClick:Ee,toggleAutoOpen:ut,autoOpen:b,onLogout:et,onFetchMyOpenOpportunities:F,isLoggingOut:A,subscription:r,canUseFeature:_e,user:n})):(console.log("[Popup] Rendering opportunity list view"),_($2,{opportunities:(()=>{try{return Array.isArray(o)?o.map(R=>{var Te;return R?{...R,opportunityIndex:(Te=R.opportunities_list_index)!=null?Te:0,activities:Array.isArray(R.activities)?R.activities:[],lastActivity:R.lastActivity||null}:(console.warn("Received undefined opportunity object"),{opportunityid:`unknown-${Math.random().toString(36).substring(7)}`,name:"Unknown opportunity",activities:[],opportunityIndex:0,lastActivity:null})}):(console.warn("Opportunities is not an array:",o),[])}catch(R){return console.error("Error mapping opportunities:",R),[]}})(),loading:p,onLogout:et,onOpportunitySelect:ee,isLoggingOut:A,closedOpportunities:m,toggleAutoOpen:ut,autoOpen:b,accessToken:t,onFetchMyOpenOpportunities:F,subscription:r,canUseFeature:_e,user:n})):_(E_,{onLogin:Z}):C("div",{style:{padding:"20px",textAlign:"center"},children:[_("h3",{children:"Organization Not Detected"}),_("p",{children:"Please navigate to your Dynamics CRM environment first to use this extension."}),_("p",{children:"The extension will automatically detect your organization ID from the URL."}),_("p",{style:{marginTop:"20px",fontWeight:"bold"},children:"Your URL should look like: https://yourorgname.crm.dynamics.com/..."}),_("button",{onClick:()=>window.open("https://make.powerapps.com/environments","_blank"),style:{marginTop:"20px",padding:"10px 16px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go to Power Apps"})]})}catch(R){return console.error("FATAL RENDER ERROR:",R),C("div",{children:["Error rendering content: ",R.message]})}})(),_("div",{style:{position:"fixed",bottom:"0",right:"0",fontSize:"10px",color:"#999",padding:"2px",backgroundColor:"rgba(255,255,255,0.8)"},children:C("details",{children:[_("summary",{children:"Debug"}),C("div",{children:["Org ID: ",M||"Not detected"]}),C("div",{children:["Token: ",t?"Yes":"No"]}),C("div",{children:["User: ",(n==null?void 0:n.email)||"None"]}),C("div",{children:["Subscription: ",(r==null?void 0:r.status)||"None"]}),C("div",{children:["Opp ID: ",l||"None"]}),C("div",{children:["Last Opp Ref: ",N.current||"None"]}),C("div",{children:["Lock: ",T.current?"Active":"Inactive"]}),C("div",{children:["Opportunities: ",o.length]}),C("div",{children:["Closed Opportunities: ",m.length]})]})})]})};Fl.createRoot(document.getElementById("root")).render(_(yn.StrictMode,{children:_(V2,{})}));
